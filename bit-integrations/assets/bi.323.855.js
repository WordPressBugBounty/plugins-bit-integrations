var _=Object.defineProperty;var u=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var w=(t,e,a)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,d=(t,e)=>{for(var a in e||(e={}))b.call(e,a)&&w(t,a,e[a]);if(u)for(var a of u(e))y.call(e,a)&&w(t,a,e[a]);return t};import{_ as l,c as m,s as I}from"./bi.964.0.js";const S=t=>{const e={},r=window.location.href.replace(`${window.opener.location.href}`,"").split("&");r&&r.forEach(s=>{const o=s.split("=");o[1]&&(e[o[0]]=o[1])}),localStorage.setItem(`__${t}`,JSON.stringify(e)),window.close()},R=(t,e,a,r,s,o,n,i,h)=>{let c=d({},e);if(n){const f=d({},i);f[t.target.name]="",h(d({},f))}c[t.target.name]=t.target.value,a(d({},c))},z=(t,e,a,r,s)=>{r(!0);const o={formID:t,clientId:e.clientId,accessToken:e.tokenDetails.access_token,clientSecret:e.clientSecret,refreshToken:e.tokenDetails.refresh_token,tokenDetails:e.tokenDetails};m(o,"zoom_webinar_fetch_all_webinar").then(n=>{if(n&&n.success){const i=d({},e);i.default||(i.default={}),n.data.allWebinar&&(i.default.allWebinar=n.data.allWebinar),s({show:!0,msg:l("Webinar list refreshed","bit-integrations")}),a(d({},i))}else n&&n.data&&n.data.data||!n.success&&typeof n.data=="string"?s({show:!0,msg:I(l("All Webinar list refresh failed Cause: %s. please try again","bit-integrations"),n.data.data||n.data)}):s({show:!0,msg:l("All Webinar list failed. please try again","bit-integrations")});r(!1)}).catch(()=>r(!1))},A=(t,e,a,r,s,o)=>{if(!t.clientId||!t.clientSecret){a({clientId:t.clientId?"":l("Client Id can't be empty","bit-integrations"),clientSecret:t.clientSecret?"":l("Secret key can't be empty","bit-integrations")});return}s(!0);const n=`https://zoom.us/oauth/authorize?response_type=code&client_id=${t.clientId}&state=${encodeURIComponent(window.location.href)}/redirect&redirect_uri=${encodeURIComponent(`${btcbi.api.base}/redirect`)}`,i=window.open(n,"zoom","width=400,height=609,toolbar=off"),h=setInterval(()=>{if(i.closed){clearInterval(h);let c={},f=!1;const p=localStorage.getItem("__zoom");if(p&&(f=!0,c=JSON.parse(p),localStorage.removeItem("__zoom")),!c.code||c.error||!c||!f){const g=c.error?`Cause: ${c.error}`:"";o({show:!0,msg:`${l("Authorization Failed","bit-integrations")} ${g}. ${l("please try again","bit-integrations")}`}),s(!1)}else{const g=d({},t);g.accountServer=c["accounts-server"],k(c,g,e,r,s,o)}}},500)},k=(t,e,a,r,s,o)=>{const n=d({},t);n.clientId=e.clientId,n.clientSecret=e.clientSecret,n.redirectURI=`${btcbi.api.base}/redirect`,m(n,"zoom_webinar_generate_token").then(i=>i).then(i=>{if(i&&i.success){const h=d({},e);h.tokenDetails=i.data,a(h),r(!0),o({show:!0,msg:l("Authorized Successfully","bit-integrations")})}else i&&i.data&&i.data.data||!i.success&&typeof i.data=="string"?o({show:!0,msg:`${l("Authorization failed Cause:","bit-integrations")}${i.data.data||i.data}. ${l("please try again","bit-integrations")}`}):o({show:!0,msg:l("Authorization failed. please try again","bit-integrations")});s(!1)})},v=t=>!((t.field_map?t.field_map.filter(a=>!a.formField&&!a.zoomWebinarConf):[]).length>0),D=t=>{const e=t==null?void 0:t.zoomWebinarFields.filter(a=>a.required===!0);return e.length>0?e.map(a=>({formField:"",zoomField:a.key})):[{formField:"",zoomField:""}]};export{A as a,v as c,D as g,R as h,S as s,z};
