import{k as v,g as y,j as t,_ as e,s as _,L as q}from"./main.2.7.8.js";import{x as F,u as N}from"./Note.CbpnsFnB.js";import{c as j,g as S}from"./ProUtilHelpers.Cc27_Hfd.js";import{a as I,b as R}from"./Integrations.DsKoVZo5.js";import{g as T}from"./WPCafeCommonFunc.CRl2f-GM.js";import{T as P}from"./TagifyInput.AWOXl6wg.js";import{h as k,a as D,b as M,d as A}from"./GlobalIntegrationHelper.BwprkiWd.js";function $({i:l,formFields:b,field:a,wpcafeConf:s,setWpcafeConf:n}){var g,m,u;const p=v(y),{isPro:h}=p,r=((g=s==null?void 0:s.wpcafeFields)==null?void 0:g.filter(i=>i.required===!0))||[],c=((m=s==null?void 0:s.wpcafeFields)==null?void 0:m.filter(i=>i.required===!1))||[];return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:a.formField||"",onChange:i=>k(i,l,s,n),children:[t.jsx("option",{value:"",children:e("Select Field","bit-integrations")}),t.jsx("optgroup",{label:e("Form Fields","bit-integrations"),children:b==null?void 0:b.map(i=>t.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`))}),t.jsx("option",{value:"custom",children:e("Custom...","bit-integrations")}),t.jsx("optgroup",{label:_(e("General Smart Codes %s","bit-integrations"),h?"":`(${e("Pro","bit-integrations")})`),children:h&&((u=I)==null?void 0:u.map(i=>t.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`)))})]}),a.formField==="custom"&&t.jsx(P,{onChange:i=>D(i,l,s,n),label:e("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:a.customValue,placeholder:e("Custom Value","bit-integrations"),formFields:b}),t.jsxs("select",{className:"btcd-paper-inp",disabled:l<r.length,name:"wpcafeField",value:l<r?r[l].label||"":a.wpcafeField||"",onChange:i=>k(i,l,s,n),children:[t.jsx("option",{value:"",children:e("Select Field","bit-integrations")}),l<r.length?t.jsx("option",{value:r[l].key,children:r[l].label},r[l].key):c.map(({key:i,label:o})=>t.jsx("option",{value:i,children:o},i))]})]}),l>=r.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>M(l,s,n),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>A(l,s,n),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}const x=[{label:e("Create Reservation","bit-integrations"),name:"create_reservation",is_pro:!0},{label:e("Update Reservation","bit-integrations"),name:"update_reservation",is_pro:!0},{label:e("Delete Reservation","bit-integrations"),name:"delete_reservation",is_pro:!0}],E=[{key:"name",label:e("Name","bit-integrations"),required:!0},{key:"email",label:e("Email","bit-integrations"),required:!0},{key:"phone",label:e("Phone","bit-integrations"),required:!0},{key:"date",label:e("Date","bit-integrations"),required:!0},{key:"start_time",label:e("Start Time","bit-integrations"),required:!0},{key:"total_guest",label:e("Total Guest","bit-integrations"),required:!0},{key:"end_time",label:e("End Time","bit-integrations"),required:!1},{key:"table_name",label:e("Table Name","bit-integrations"),required:!1},{key:"branch_id",label:e("Branch ID","bit-integrations"),required:!1},{key:"branch_name",label:e("Branch Name","bit-integrations"),required:!1},{key:"notes",label:e("Notes","bit-integrations"),required:!1},{key:"status",label:e("Status","bit-integrations"),required:!1}],L=[{key:"reservation_id",label:e("Reservation ID","bit-integrations"),required:!0}],V=[{key:"reservation_id",label:e("Reservation ID","bit-integrations"),required:!0},{key:"name",label:e("Name","bit-integrations"),required:!1},{key:"email",label:e("Email","bit-integrations"),required:!1},{key:"phone",label:e("Phone","bit-integrations"),required:!1},{key:"date",label:e("Date","bit-integrations"),required:!1},{key:"start_time",label:e("Start Time","bit-integrations"),required:!1},{key:"end_time",label:e("End Time","bit-integrations"),required:!1},{key:"total_guest",label:e("Total Guest","bit-integrations"),required:!1},{key:"table_name",label:e("Table Name","bit-integrations"),required:!1},{key:"branch_id",label:e("Branch ID","bit-integrations"),required:!1},{key:"branch_name",label:e("Branch Name","bit-integrations"),required:!1},{key:"notes",label:e("Notes","bit-integrations"),required:!1},{key:"status",label:e("Status","bit-integrations"),required:!1}];function K({formID:l,formFields:b,wpcafeConf:a,setWpcafeConf:s,isLoading:n,setIsLoading:p,setSnackbar:h}){var m,u;const r=v(y),{isPro:c}=r,g=i=>{s(o=>N(o,d=>{switch(d.mainAction=i,i){case"create_reservation":d.wpcafeFields=E;break;case"update_reservation":d.wpcafeFields=V;break;case"delete_reservation":d.wpcafeFields=L;break;default:d.wpcafeFields=[]}d.field_map=T(d.wpcafeFields)}))};return t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsxs("div",{className:"flx",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:e("Action:","bit-integrations")}),t.jsx(F,{title:"mainAction",defaultValue:(m=a==null?void 0:a.mainAction)!=null?m:null,className:"mt-2 w-5",onChange:i=>g(i),options:x==null?void 0:x.map(i=>({label:j(c,i.is_pro)?i.label:S(i.label),value:i.name,disabled:!j(c,i.is_pro)})),singleSelect:!0,closeOnSelect:!0})]}),n&&t.jsx(q,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(a==null?void 0:a.mainAction)&&a.wpcafeFields&&t.jsxs("div",{className:"mt-4",children:[t.jsx("b",{className:"wdt-100",children:e("Map Fields","bit-integrations")}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:e("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:e("WPCafe Fields","bit-integrations")})})]}),(u=a==null?void 0:a.field_map)==null?void 0:u.map((i,o)=>t.jsx($,{i:o,field:i,wpcafeConf:a,formFields:b,setWpcafeConf:s},`wpcafe-m-${o+9}`)),t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>R(a.field_map.length,a,s),className:"icn-btn sh-sm",type:"button",children:"+"})}),t.jsx("br",{})]})]})}export{K as W};
