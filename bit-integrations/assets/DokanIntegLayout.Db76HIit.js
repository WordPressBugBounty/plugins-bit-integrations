var R=Object.defineProperty;var v=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var V=(l,e,i)=>e in l?R(l,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[e]=i,n=(l,e)=>{for(var i in e||(e={}))D.call(e,i)&&V(l,i,e[i]);if(v)for(var i of v(e))y.call(e,i)&&V(l,i,e[i]);return l};import{k as S,g as w,j as t,_ as c,L as M}from"./main.2.7.11.js";import{x as T}from"./Note.iI4FM_zT.js";import{d as A}from"./react-router-dom.BLIKw1eE.js";import{b as j}from"./Table.NqkguWs5.js";import{T as d,a as P,g as F,d as O,b as I}from"./dokanCommonFunctions.CUs2Fe3u.js";import{a as L,h as U}from"./Integrations.CiiC6YXN.js";import{T as W}from"./TagifyInput.ey_dUHW4.js";function $({dokanConf:l,setDokanConf:e,loading:i,setLoading:a}){var s,r,x,N;const[m,h]=A.useState({show:!1}),g=S(w),{isPro:p}=g,u=(b,Q)=>{const E=n({},l);b.target.checked?E.actions[b.target.value]=!0:delete E.actions[b.target.value],e(n({},E))};return t.jsxs(t.Fragment,{children:[!p&&t.jsx("div",{className:"pt-2",children:t.jsx("span",{className:"actions-note",children:c("The Bit Integrations Pro plugin needs to be installed and activated to utilize these features","bit-integrations")})}),t.jsx("div",{className:"pos-rel d-flx w-8",children:(l.selectedTask===d.CREATE_VENDOR||l.selectedTask===d.UPDATE_VENDOR)&&t.jsxs(t.Fragment,{children:[t.jsx(j,{checked:((s=l.actions)==null?void 0:s.notifyVendor)||!1,onChange:b=>u(b),className:"wdt-200 mt-4 mr-2",value:"notifyVendor",title:c("Notify Vendor","bit-integrations"),subTitle:c("Send the vendor an email about their account","bit-integrations"),isInfo:!p}),t.jsx(j,{checked:((r=l.actions)==null?void 0:r.enableSelling)||!1,onChange:b=>u(b),className:"wdt-200 mt-4 mr-2",value:"enableSelling",title:c("Enable Selling","bit-integrations"),subTitle:c("Enable selling for this vendor","bit-integrations"),isInfo:!p}),t.jsx(j,{checked:((x=l.actions)==null?void 0:x.publishProduct)||!1,onChange:b=>u(b),className:"wdt-200 mt-4 mr-2",value:"publishProduct",title:c("Publish Product Directly","bit-integrations"),subTitle:c("Publish product of this vendor directly","bit-integrations"),isInfo:!p}),t.jsx(j,{checked:((N=l.actions)==null?void 0:N.featureVendor)||!1,onChange:b=>u(b),className:"wdt-200 mt-4 mr-2",value:"featureVendor",title:c("Make Vendor Featured","bit-integrations"),subTitle:c("Make this vendor featured","bit-integrations"),isInfo:!p})]})})]})}const o=(l,e,i)=>{const a=n({},e);a.field_map.splice(l,0,{}),i(n({},a))},q=(l,e,i)=>{const a=n({},e);a.field_map.length>1&&a.field_map.splice(l,1),i(n({},a))},_=(l,e,i,a)=>{const m=n({},i);m.field_map[e][l.target.name]=l.target.value,l.target.value==="custom"&&(m.field_map[e].customValue=""),a(n({},m))};function H({i:l,formFields:e,field:i,dokanConf:a,setDokanConf:m}){var p,u;const h=(a==null?void 0:a.staticFields.filter(s=>s.required===!0))||[],g=((p=a==null?void 0:a.staticFields)==null?void 0:p.filter(s=>s.required===!1))||[];return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:i.formField||"",onChange:s=>_(s,l,a,m),children:[t.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),t.jsx("optgroup",{label:c("Form Fields","bit-integrations"),children:e==null?void 0:e.map(s=>t.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`))}),t.jsx("option",{value:"custom",children:c("Custom...","bit-integrations")}),t.jsx("optgroup",{label:"General Smart Codes",children:(u=L)==null?void 0:u.map(s=>t.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`))})]}),i.formField==="custom"&&t.jsx(W,{onChange:s=>U(s,l,a,m),label:c("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:i.customValue,placeholder:c("Custom Value","bit-integrations"),formFields:e}),t.jsxs("select",{className:"btcd-paper-inp",disabled:l<h.length,name:"dokanField",value:l<h?h[l].label||"":i.dokanField||"",onChange:s=>_(s,l,a,m),children:[t.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),l<h.length?t.jsx("option",{value:h[l].key,children:h[l].label},h[l].key):g.map(({key:s,label:r})=>t.jsx("option",{value:s,children:r},s))]})]}),t.jsx("div",{className:"flx integ-fld-wrp",children:l>=h.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>o(l,a,m),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>q(l,a,m),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})})]})})}function f({formFields:l,dokanConf:e,setDokanConf:i,loading:a,setLoading:m,setSnackbar:h}){const g=s=>{const r=n({},e);if(r.selectedTask=s,s){const x=O(s);r.staticFields=x.staticFields,r.field_map=x.fieldMap,s===d.CREATE_VENDOR||s===d.UPDATE_VENDOR?I(r,i,a,m):(s===d.DELETE_VENDOR||s===d.WITHDRAW_REQUEST)&&F(r,i,a,m)}else r.staticFields=[],r.field_map=[];i(n({},r))},p=(s,r)=>{const x=n({},e);x[r]=s,i(n({},x))},u=s=>{const r=n({},e);s.target.checked?r.deleteVendorFieldMap=!0:r.deleteVendorFieldMap=!1,i(n({},r))};return t.jsx(t.Fragment,{children:t.jsxs("div",{children:[t.jsxs("div",{className:"flx mt-3 mb-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:c("Select Task:","bit-integrations")}),t.jsx(T,{style:{width:"450px"},options:P,className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedTask,onChange:s=>g(s),singleSelect:!0})]}),e.selectedTask===d.REFUND_REQUEST&&t.jsx("span",{className:"action-delete-task-note",children:"The Dokan Pro plugin needs to be installed and activated to use this (Refund Request) task."}),(a.euFields||a.vendors)&&t.jsx(M,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}),(e.selectedTask===d.UPDATE_VENDOR||e.selectedTask===d.DELETE_VENDOR||e.selectedTask===d.WITHDRAW_REQUEST)&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flx mt-3 mb-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:c("Select Vendor:","bit-integrations")}),t.jsx(T,{style:{width:"450px"},options:e==null?void 0:e.vendors,className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedVendor,onChange:s=>p(s,"selectedVendor"),singleSelect:!0}),t.jsx("button",{onClick:()=>F(e,i,a,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${c("Refresh Vendors","bit-integrations")}'`},type:"button",children:"â†»"})]}),e.selectedTask===d.DELETE_VENDOR&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsxs("div",{className:"flx",children:[t.jsx("span",{className:"action-delete-task-note",children:c("To delete a vendor, you can select a vendor from the list above, or you can map fields","bit-integrations")}),t.jsx(j,{checked:e.deleteVendorFieldMap,onChange:s=>u(s),className:" ml-2",value:"select_group",title:c("Map Fields","bit-integrations")})]})]})]}),e.selectedTask===d.WITHDRAW_REQUEST&&t.jsxs("div",{className:"flx mt-3 mb-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:c("Select Payment Method:","bit-integrations")}),t.jsx(T,{style:{width:"450px"},options:[{label:c("PayPal","bit-integrations"),value:"paypal"},{label:c("Bank Transfer","bit-integrations"),value:"bank"},{label:c("Skrill","bit-integrations"),value:"skrill"}],className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedPaymentMethod,onChange:s=>p(s,"selectedPaymentMethod"),singleSelect:!0})]}),(e.selectedTask!==d.DELETE_VENDOR||e.selectedTask===d.DELETE_VENDOR&&e.deleteVendorFieldMap)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mt-5",children:t.jsx("b",{className:"wdt-100",children:c("Field Map","bit-integrations")})}),t.jsx("br",{}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:c("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:c("Dokan Fields","bit-integrations")})})]})]}),((e==null?void 0:e.selectedTask)&&(e==null?void 0:e.selectedTask)!==d.DELETE_VENDOR||e.selectedTask===d.DELETE_VENDOR&&e.deleteVendorFieldMap)&&(e==null?void 0:e.field_map.map((s,r)=>t.jsx(H,{i:r,field:s,dokanConf:e,formFields:l,setDokanConf:i,setSnackbar:h},`rp-m-${r+9}`))),((e==null?void 0:e.selectedTask)&&(e==null?void 0:e.selectedTask)!==d.DELETE_VENDOR||e.selectedTask===d.DELETE_VENDOR&&e.deleteVendorFieldMap)&&t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>o(e.field_map.length,e,i),className:"icn-btn sh-sm",type:"button",children:"+"})}),(e.selectedTask===d.CREATE_VENDOR||e.selectedTask===d.UPDATE_VENDOR)&&t.jsxs("div",{children:[t.jsx("br",{}),t.jsx("br",{}),t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:c("Utilities","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsx($,{dokanConf:e,setDokanConf:i,loading:a,setLoading:m})]})]})})}export{f as D};
