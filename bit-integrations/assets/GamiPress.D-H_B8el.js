var I=Object.defineProperty;var j=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var N=(a,s,i)=>s in a?I(a,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[s]=i,A=(a,s)=>{for(var i in s||(s={}))T.call(s,i)&&N(a,i,s[i]);if(j)for(var i of j(s))R.call(s,i)&&N(a,i,s[i]);return a};import{j as e,_ as n,s as z,d as L,k as _,g as B}from"./main.2.7.8.js";import{d as m,u as D,h as F}from"./react-router-dom.BLIKw1eE.js";import{z as E,y as M}from"./Note.CbpnsFnB.js";import{S as q}from"./SnackMsg.DGLO5_fd.js";import{S as H}from"./Steps.CeG8Itxy.js";import{I as $,s as J}from"./Integrations.DsKoVZo5.js";import{G as K,h as O}from"./GamiPressIntegLayout.C7UBFXd_.js";import{B as Q}from"./BackIcn.B0Uf3wb7.js";import{t as U}from"./tutorialLinks.C1WWujPT.js";import{T as S}from"./TutorialLink.CvfNjaff.js";import"./CopyIcn.CrDMgwxJ.js";import"./Table.PPpIxK2a.js";import"./index.rAvPDjud.js";import"./TagifyInput.AWOXl6wg.js";import"./tagify.YxUZd8Ix.js";function V({formID:a,gamiPressConf:s,setGamiPressConf:i,step:d,setStep:x,isLoading:p,setIsLoading:h,setSnackbar:v}){const[c,y]=m.useState(!1),[l,u]=m.useState(!1),{gamiPress:o}=U,b=()=>{h("auth"),L({},"gamiPress_authorize").then(r=>{r!=null&&r.success&&(y(!0),v({show:!0,msg:n("Connected with GamiPress Successfully","bit-integrations")})),h(!1),u(!0)})},k=r=>{const f=M(s);f[r.target.name]=r.target.value,i(f)};return e.jsxs("div",{className:"btcd-stp-page",style:{width:d===1&&900,height:d===1&&"auto"},children:[e.jsx(S,{title:"GamiPress",youTubeLink:o==null?void 0:o.youTubeLink}),e.jsx(S,{title:"GamiPress",docLink:o==null?void 0:o.docLink}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:n("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:k,name:"name",value:s.name,type:"text",placeholder:n("Integration Name...","bit-integrations")}),p==="auth"&&e.jsxs("div",{className:"flx mt-5",children:[e.jsx(E,{size:25,clr:"#022217",className:"mr-2"}),"Checking if GamiPress is active!!!"]}),l&&!c&&!p&&e.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[e.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),z(n("%s plugin must be activated to integrate with Bit Integrations","bit-integrations"),"GamiPress")]}),!c&&e.jsx("button",{onClick:b,className:"btn btcd-btn-lg purple sh-sm flx mt-5",type:"button",children:n("Connect","bit-integrations")}),c&&e.jsxs("button",{onClick:()=>x(2),className:"btn btcd-btn-lg purple sh-sm flx mt-5",type:"button",disabled:!c,children:[n("Next","bit-integrations"),e.jsx(Q,{className:"ml-1 rev-icn"})]})]})}function ue({formFields:a,setFlow:s,flow:i,allIntegURL:d,isInfo:x,edit:p}){const h=D(),{formID:v}=F(),c=_(B),{siteURL:y}=c,[l,u]=m.useState(!1),[o,b]=m.useState(1),[k,r]=m.useState({show:!1}),f=[{key:"1",label:n("Award rank to the user","bit-integrations")},{key:"2",label:n("Award an achievement to the user","bit-integrations")},{key:"3",label:n("Award a points to the user","bit-integrations")},{key:"4",label:n("Revoke a rank form the user","bit-integrations")},{key:"5",label:n("Revoke an achievement form the user","bit-integrations")},{key:"6",label:n("Revoke points from the user","bit-integrations")}],w=[{key:"point",label:"Point",required:!0}],[t,g]=m.useState({name:"GamiPress",type:"GamiPress",mainAction:"",field_map:[{formField:"",gamiPressFormField:""}],pointFields:w,allActions:f,actions:{}}),P=()=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),t.mainAction!==""&&b(3)};function C(){switch(t.mainAction){case"1":return t.selectedRank===void 0||t.selectedRank==="";case"2":return t.selectedAchievement===void 0||t.selectedAchievement==="";case"3":return t.selectedPointType===void 0||t.selectedPointType==="";case"4":return t.selectedRank===void 0||t.selectedRank==="";case"5":return t.selectedAchievement===void 0||t.selectedAchievement==="";case"6":return t.selectedPointType===void 0||t.selectedPointType==="";default:return!1}}return e.jsxs("div",{children:[e.jsx(q,{snack:k,setSnackbar:r}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(H,{step:3,active:o})}),e.jsx(V,{formID:v,gamiPressConf:t,setGamiPressConf:g,step:o,setStep:b,isLoading:l,setIsLoading:u,setSnackbar:r}),e.jsxs("div",{className:"btcd-stp-page",style:A({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[e.jsx(K,{formFields:a,handleInput:G=>O(G,t,g),gamiPressConf:t,setGamiPressConf:g,isLoading:l,setIsLoading:u,setSnackbar:r,allIntegURL:d,isInfo:x,edit:p}),e.jsxs("button",{onClick:()=>P(),disabled:!t.mainAction||l||C(),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[n("Next","bit-integrations")," ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),e.jsx($,{step:o,saveConfig:()=>J({flow:i,setFlow:s,allIntegURL:d,navigate:h,conf:t,setIsLoading:u,setSnackbar:r}),isLoading:l,dataConf:t,setDataConf:g,formFields:a})]})}export{ue as default};
