var y=Object.defineProperty;var v=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var N=(i,t,a)=>t in i?y(i,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[t]=a,o=(i,t)=>{for(var a in t||(t={}))k.call(t,a)&&N(i,a,t[a]);if(v)for(var a of v(t))M.call(t,a)&&N(i,a,t[a]);return i};import{j as s,_ as l,k as L,g as T,s as F}from"./main.2.7.9.js";import{d as j}from"./react-router-dom.BLIKw1eE.js";import{ak as _,x as V}from"./Note.B1QjZ60t.js";import{a as A}from"./CopyIcn.Bz4pX3qF.js";import{b as B}from"./Table.Bhs4KlDc.js";import{l as $,g as z}from"./NewsletterCommonFunc.Ul6uAifg.js";import{a as P,h as U}from"./Integrations.CEc3UakZ.js";import{T as q}from"./TagifyInput.BafnMlYq.js";function E({newsletterConf:i,setNewsletterConf:t}){const[a,e]=j.useState({show:!1}),n=r=>{const m=o({},i);r.target.checked?m.actions.lists=!0:delete m.actions.lists,e({show:"lists"}),t(o({},m))},d=()=>{e({show:!1})},p=(r,m)=>{const h=o({},i);h[m]=r,t(o({},h))},b=$();return s.jsxs("div",{className:"pos-rel d-flx w-8",children:[s.jsx(B,{checked:i.selectedLists||!1,onChange:r=>n(r),className:"wdt-200 mt-4 mr-2",value:"select_lists",title:l("Select Lists","bit-integrations"),subTitle:l("Choose which lists to add subscribers to.","bit-integrations")}),s.jsxs(A,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:l("Ok","bit-integrations"),show:a.show==="lists",close:d,action:d,title:l("Lists","bit-integrations"),children:[s.jsx("div",{className:"btcd-hr mt-2 mb-2"}),s.jsxs("div",{className:"mt-2 flx",children:[l("Select Lists","bit-integrations"),s.jsx(_,{width:250,icnSize:17,className:"ml-1",children:s.jsx("div",{className:"txt-body",children:l("Subscribers will be associated with the selected lists","bit-integrations")})})]}),s.jsx("div",{className:"mt-2",children:s.jsx(V,{options:b,className:"msl-wrp-options",defaultValue:i==null?void 0:i.selectedLists,onChange:r=>p(r,"selectedLists"),style:{width:"100%"}})})]})]})}const S=(i,t,a)=>{const e=o({},t);e.field_map.splice(i,0,{}),a(o({},e))},I=(i,t,a)=>{const e=o({},t);e.field_map.length>1&&e.field_map.splice(i,1),a(o({},e))},f=(i,t,a,e)=>{const n=o({},a);n.field_map[t][i.target.name]=i.target.value,i.target.value==="custom"&&(n.field_map[t].customValue=""),e(o({},n))};function O({i,formFields:t,field:a,newsletterConf:e,setNewsletterConf:n}){var h,x,g;const d=(e==null?void 0:e.staticFields.filter(c=>c.required===!0))||[],p=((h=e==null?void 0:e.staticFields)==null?void 0:h.filter(c=>c.required===!1))||[];if(((x=e==null?void 0:e.field_map)==null?void 0:x.length)===1&&a.newsletterFormField===""){const c=o({},e),u=z(c);c.field_map=u,n(c)}let b=!1;a.newsletterFormField==="status"&&(b=!0);const r=L(T),{isPro:m}=r;return s.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:s.jsxs("div",{className:"pos-rel flx",children:[s.jsxs("div",{className:"flx integ-fld-wrp",children:[s.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:a.formField||"",onChange:c=>f(c,i,e,n),children:[s.jsx("option",{value:"",children:l("Select Field","bit-integrations")}),s.jsx("optgroup",{label:l("Form Fields","bit-integrations"),children:t==null?void 0:t.map(c=>s.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`))}),s.jsx("option",{value:"custom",children:l("Custom...","bit-integrations")}),s.jsx("optgroup",{label:F(l("General Smart Codes %s","bit-integrations"),m?"":`(${l("Pro","bit-integrations")})`),children:m&&((g=P)==null?void 0:g.map(c=>s.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`)))})]}),a.formField==="custom"&&s.jsx(q,{onChange:c=>U(c,i,e,n),label:l("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:a.customValue,placeholder:l("Custom Value","bit-integrations"),formFields:t}),s.jsxs("select",{className:"btcd-paper-inp",disabled:i<d.length,name:"newsletterFormField",value:i<d?d[i].label||"":a.newsletterFormField||"",onChange:c=>f(c,i,e,n),children:[s.jsx("option",{value:"",children:l("Select Field","bit-integrations")}),i<d.length?s.jsx("option",{value:d[i].key,children:d[i].label},d[i].key):p.map(({key:c,label:u})=>s.jsx("option",{value:c,children:u},c))]})]}),s.jsxs("div",{className:"flx integ-fld-wrp",children:[b&&s.jsx("div",{children:s.jsx(_,{width:350,icnSize:17,className:"ml-2",children:s.jsxs("div",{className:"txt-body",children:[s.jsxs("p",{children:[l("Below are the available statuses for newsletter (single letters are the value)","bit-integrations"),":"]}),s.jsxs("li",{children:[l("Confirmed","bit-integrations")," = C"]}),s.jsxs("li",{children:[l("Not Confirmed","bit-integrations")," = S"]}),s.jsxs("li",{children:[l("Unsubscribed","bit-integrations")," = U"]}),s.jsxs("li",{children:[l("Bounced","bit-integrations")," = B"]}),s.jsxs("li",{children:[l("Complained","bit-integrations")," = P"]}),s.jsxs("p",{children:[s.jsxs("strong",{children:[l("Note","bit-integrations"),": "]}),F(l("you have to insert one of the mentioned %s statuses; otherwise, subscriber adding will fail. You can also omit this status field; if omitted, the status will be set to %s by default","bit-integrations"),"(C, S, U, B, P)",'"Confirmed (C)"')]})]})})}),i>=d.length&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>S(i,e,n),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),s.jsx("button",{onClick:()=>I(i,e,n),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:s.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})]})})}function X({formFields:i,newsletterConf:t,setNewsletterConf:a,loading:e,setLoading:n,setSnackbar:d}){const[p,b]=j.useState({name:"",auth_token:""}),[r,m]=j.useState(!1);return s.jsx(s.Fragment,{children:s.jsxs("div",{children:[s.jsx("br",{}),s.jsx("div",{className:"mt-5",children:s.jsx("b",{className:"wdt-100",children:l("Field Map","bit-integrations")})}),s.jsx("br",{}),s.jsx("div",{className:"btcd-hr mt-1"}),s.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[s.jsx("div",{className:"txt-dp",children:s.jsx("b",{children:l("Form Fields","bit-integrations")})}),s.jsx("div",{className:"txt-dp",children:s.jsx("b",{children:l("Newsletter Fields","bit-integrations")})})]}),t==null?void 0:t.field_map.map((h,x)=>s.jsx(O,{i:x,field:h,newsletterConf:t,formFields:i,setNewsletterConf:a,setSnackbar:d},`rp-m-${x+9}`)),s.jsxs("div",{children:[s.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:s.jsx("button",{onClick:()=>S(t.field_map.length,t,a),className:"icn-btn sh-sm",type:"button",children:"+"})}),s.jsx("br",{}),s.jsx("br",{}),s.jsx("div",{className:"mt-4",children:s.jsx("b",{className:"wdt-100",children:l("Utilities","bit-integrations")})}),s.jsx("div",{className:"btcd-hr mt-1"}),s.jsx(E,{newsletterConf:t,setNewsletterConf:a})]})]})})}export{X as N};
