var C=Object.defineProperty;var k=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var y=(a,t,s)=>t in a?C(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,p=(a,t)=>{for(var s in t||(t={}))S.call(t,s)&&y(a,s,t[s]);if(k)for(var s of k(t))P.call(t,s)&&y(a,s,t[s]);return a};import{j as n,_ as e}from"./main.2.7.11.js";import{u as w,d as o}from"./react-router-dom.BLIKw1eE.js";import{al as b}from"./Note.iI4FM_zT.js";import{S as A}from"./SnackMsg.DJhRycHe.js";import{S as _}from"./Steps.KpTwh2fS.js";import{I as E,g as I}from"./Integrations.CiiC6YXN.js";import j from"./FabmanAuthorization.CZuMXkDJ.js";import{i as g,g as F,c as L,b as H,d as T}from"./FabmanCommonFunc.L0DLieaq.js";import{F as W}from"./FabmanIntegLayout.CE9tzTJb.js";import"./CopyIcn.DaX9e6Na.js";import"./Table.NqkguWs5.js";import"./index.rAvPDjud.js";import"./tutorialLinks.C1WWujPT.js";import"./TutorialLink.BQJGOONg.js";import"./TagifyInput.ey_dUHW4.js";import"./tagify.YxUZd8Ix.js";const R=[{key:"emailAddress",label:e("Email Address","bit-integrations"),required:!1},{key:"firstName",label:e("First Name","bit-integrations"),required:!0},{key:"lastName",label:e("Last Name","bit-integrations"),required:!1},{key:"memberNumber",label:e("Member Number","bit-integrations"),required:!1},{key:"gender",label:e("Gender","bit-integrations"),required:!1},{key:"dateOfBirth",label:e("Date of Birth","bit-integrations"),required:!1},{key:"company",label:e("Company","bit-integrations"),required:!1},{key:"phone",label:e("Phone","bit-integrations"),required:!1},{key:"address",label:e("Address","bit-integrations"),required:!1},{key:"address2",label:e("Address 2","bit-integrations"),required:!1},{key:"city",label:e("City","bit-integrations"),required:!1},{key:"zip",label:e("ZIP Code","bit-integrations"),required:!1},{key:"countryCode",label:e("Country Code","bit-integrations"),required:!1},{key:"region",label:e("Region","bit-integrations"),required:!1},{key:"notes",label:e("Notes","bit-integrations"),required:!1},{key:"billingFirstName",label:e("Billing First Name","bit-integrations"),required:!1},{key:"billingLastName",label:e("Billing Last Name","bit-integrations"),required:!1},{key:"billingCompany",label:e("Billing Company","bit-integrations"),required:!1},{key:"billingAddress",label:e("Billing Address","bit-integrations"),required:!1},{key:"billingAddress2",label:e("Billing Address 2","bit-integrations"),required:!1},{key:"billingCity",label:e("Billing City","bit-integrations"),required:!1},{key:"billingZip",label:e("Billing ZIP Code","bit-integrations"),required:!1},{key:"billingCountryCode",label:e("Billing Country Code","bit-integrations"),required:!1},{key:"billingRegion",label:e("Billing Region","bit-integrations"),required:!1},{key:"billingInvoiceText",label:e("Billing Invoice Text","bit-integrations"),required:!1},{key:"billingEmailAddress",label:e("Billing Email Address","bit-integrations"),required:!1},{key:"language",label:e("Language","bit-integrations"),required:!1},{key:"state",label:e("State","bit-integrations"),required:!1},{key:"taxExempt",label:e("Tax Exempt","bit-integrations"),required:!1},{key:"hasBillingAddress",label:e("Has Billing Address","bit-integrations"),required:!1},{key:"requireUpfrontPayment",label:e("Require Upfront Payment","bit-integrations"),required:!1},{key:"upfrontMinimumBalance",label:e("Upfront Minimum Balance","bit-integrations"),required:!1}],D=[{key:"name",label:e("Name","bit-integrations"),required:!0},{key:"shortName",label:e("Short Name","bit-integrations"),required:!1},{key:"timezone",label:e("Timezone","bit-integrations"),required:!0},{key:"emailAddress",label:e("Email Address","bit-integrations"),required:!1},{key:"website",label:e("Website","bit-integrations"),required:!1},{key:"phone",label:e("Phone","bit-integrations"),required:!1},{key:"infoText",label:e("Info Text","bit-integrations"),required:!1},{key:"bookingTermsOfService",label:e("Booking Terms Of Service","bit-integrations"),required:!1},{key:"bookingSlotsPerHour",label:e("Booking Slots Per Hour","bit-integrations"),required:!1},{key:"bookingWindowMinHours",label:e("Booking Window Min Hours","bit-integrations"),required:!1},{key:"bookingWindowMaxDays",label:e("Booking Window Max Days","bit-integrations"),required:!1},{key:"bookingLockInHours",label:e("Booking Lock-in Hours","bit-integrations"),required:!1},{key:"bookingMaxMinutesPerMemberDay",label:e("Booking Max Minutes Per Member/Day","bit-integrations"),required:!1},{key:"bookingMaxMinutesPerMemberWeek",label:e("Booking Max Minutes Per Member/Week","bit-integrations"),required:!1},{key:"bookingExclusiveMinutes",label:e("Booking Exclusive Minutes","bit-integrations"),required:!1},{key:"bookingOpeningHours",label:e("Booking Opening Hours","bit-integrations"),required:!1},{key:"bookingRefundable",label:e("Booking Refundable","bit-integrations"),required:!1},{key:"bookingNamesPublic",label:e("Booking Names Public","bit-integrations"),required:!1}];function ne({formFields:a,setFlow:t,flow:s,allIntegURL:q}){const x=w(),[h,B]=o.useState(!1),[m,u]=o.useState({auth:!1,workspaces:!1,members:!1}),[l,f]=o.useState(1),[M,r]=o.useState({show:!1}),[i,d]=o.useState({name:"Fabman",type:"Fabman",field_map:[{formField:"",fabmanFormField:""}],customFields:[],actions:{},condition:{action_behavior:"",actions:[{field:"",action:"value"}],logics:[{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}]},fields:[],accountId:"",apiKey:"",selectedLockVersion:"",memberStaticFields:R,spacesStaticFields:D}),N=()=>{if(g(i,a,b)){const c=F(i,a,b);c&&r({show:!0,msg:c});return}I(s,t,q,i,x,"","",B)},v=()=>{if(!g(i,a,b)){f(3);return}i.actionName?!["delete_member","delete_spaces"].includes(i.actionName)&&!L(i)?r({show:!0,msg:e("Please map mandatory fields","bit-integrations")}):["update_member","delete_member"].includes(i.actionName)&&H(i,a,b)?r({show:!0,msg:e("Please map a valid email address","bit-integrations")}):["create_member","update_member","update_spaces","delete_spaces"].includes(i.actionName)&&!i.selectedWorkspace?r({show:!0,msg:e("Please select a workspace","bit-integrations")}):i.actionName==="delete_member"&&(T(i)||r({show:!0,msg:e("Please map email field for member lookup","bit-integrations")})):r({show:!0,msg:e("Please select an action","bit-integrations")})};return n.jsxs("div",{children:[n.jsx(A,{snack:M,setSnackbar:r}),n.jsx("div",{className:"mt-3 txt-center",children:n.jsx(_,{step:3,active:l})}),n.jsx(j,{fabmanConf:i,setFabmanConf:d,step:l,setStep:f,loading:m,setLoading:u}),l===2&&n.jsxs("div",{className:"btcd-stp-page",style:p({},l===2&&{width:900,height:"auto",overflow:"visible"}),children:[n.jsx(W,{formFields:a,fabmanConf:i,setFabmanConf:d,loading:m,setLoading:u,setSnackbar:r}),n.jsxs("button",{onClick:v,disabled:g(i,a,b),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[e("Next","bit-integrations"),n.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),n.jsx(E,{step:l,saveConfig:N,isLoading:h,dataConf:i,setDataConf:d,formFields:a})]})}export{ne as default};
