var y=Object.defineProperty;var D=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var u=(a,t,l)=>t in a?y(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,n=(a,t)=>{for(var l in t||(t={}))k.call(t,l)&&u(a,l,t[l]);if(D)for(var l of D(t))w.call(t,l)&&u(a,l,t[l]);return a};import{d as g,_ as h,s as _}from"./main.2.7.11.js";const O=(a,t,l,i,o,d,e,s,m,f)=>{let F=n({},l);t===0?F[a.target.name]=a.target.value:F.relatedlists[t-1][a.target.name]=a.target.value,a.target.name==="module"&&(F=z(t,F,o,i,d,e)),i(n({},F))},N=(a,t,l,i,o,d,e)=>{var s,m;a&&!((m=(s=l==null?void 0:l.default)==null?void 0:s.relatedlists)!=null&&m[l.module])&&q(o,l,i,d,e),t(a)},z=(a,t,l,i,o,d)=>{var m,f;const e=n({},t),s=a===0?e.module:e.relatedlists[a-1].module;return a===0?(e.actions={},e.field_map=[{formField:"",zohoFormField:""}],e.upload_field_map=[{formField:"",zohoFormField:""}],a&&(e.relatedlists[a-1]={})):(e.relatedlists[a-1].field_map=[{formField:"",zohoFormField:""}],e.relatedlists[a-1].upload_field_map=[{formField:"",zohoFormField:""}],e.relatedlists[a-1].actions={}),(f=(m=e.default)==null?void 0:m.moduleData)!=null&&f[s]?a===0?(e.field_map=p(a,e),Object.keys(e.default.moduleData[s].fileUploadFields).length>0&&(e.upload_field_map=p(a,e,!0))):(e.relatedlists[a-1].field_map=p(a,e),Object.keys(e.default.moduleData[s].fileUploadFields).length>0&&(e.relatedlists[a-1].upload_field_map=p(a,e,!0))):R(a,l,e,i,o,d),e},j=(a,t,l,i,o)=>{i(!0);const d={formID:a,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};g(d,"zrecruit_refresh_modules").then(e=>{if(e&&e.success){const s=n({},t);s.default||(s.default={}),e.data.modules&&(s.default.modules=e.data.modules),e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),l(n({},s)),o({show:!0,msg:h("Modules refreshed","bit-integrations")})}else e&&e.data&&e.data.data||!e.success&&typeof e.data=="string"?o({show:!0,msg:_(h("Modules refresh failed Cause: %s. please try again","bit-integrations"),e.data.data||e.data)}):o({show:!0,msg:h("Modules refresh failed. please try again","bit-integrations")});i(!1)}).catch(()=>i(!1))},P=(a,t,l,i,o)=>{i(!0);const d={formID:a,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};g(d,"zrecruit_refresh_notetypes").then(e=>{if(e&&e.success){const s=n({},t);s.default||(s.default={}),e.data.noteTypes&&(s.default.noteTypes=e.data.noteTypes),e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),l(n({},s)),o({show:!0,msg:h("Note Types refreshed","bit-integrations")})}else e&&e.data&&e.data.data||!e.success&&typeof e.data=="string"?o({show:!0,msg:_(h("Note Types refresh failed Cause: %s. please try again","bit-integrations"),e.data.data||e.data)}):o({show:!0,msg:h("Note Types refresh failed. please try again","bit-integrations")});i(!1)}).catch(()=>i(!1))},q=(a,t,l,i,o)=>{if(!t.module)return;i(!0);const d={formID:a,module:t.module,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};g(d,"zrecruit_refresh_related_lists").then(e=>{var s;if(e&&e.success){const m=n({},t);e.data.related_modules&&(m.default.relatedlists||(m.default.relatedlists={}),m.default.relatedlists[m.module]=e.data.related_modules),e.data.tokenDetails&&(m.tokenDetails=e.data.tokenDetails),l(n({},m)),o({show:!0,msg:h("RelatedLists refreshed","bit-integrations")})}else(s=e==null?void 0:e.data)!=null&&s.data||!e.success&&typeof e.data=="string"?o({show:!0,msg:_(h("RelatedLists refresh failed Cause: %s. please try again","bit-integrations"),e.data.data||e.data)}):o({show:!0,msg:h("RelatedLists refresh failed. please try again","bit-integrations")});i(!1)}).catch(()=>i(!1))},R=(a,t,l,i,o,d)=>{const e=a===0?l.module:l.relatedlists[a-1].module;if(!e)return;o(!0);const s={formID:t,module:e,dataCenter:l.dataCenter,clientId:l.clientId,clientSecret:l.clientSecret,tokenDetails:l.tokenDetails};g(s,"zrecruit_get_fields").then(m=>{if(m&&m.success){const f=n({},l);m.data.fieldDetails&&(f.default.moduleData||(f.default.moduleData={}),f.default.moduleData[e]=m.data.fieldDetails,a===0?(f.field_map=p(a,f),Object.keys(f.default.moduleData[e].fileUploadFields).length>0&&(f.upload_field_map=p(a,f,!0))):(f.relatedlists[a-1].field_map=p(a,f),Object.keys(f.default.moduleData[e].fileUploadFields).length>0&&(f.relatedlists[a-1].upload_field_map=p(a,f,!0)))),m.data.tokenDetails&&(f.tokenDetails=m.data.tokenDetails),i(n({},f))}else d({show:!0,msg:h("Fields refresh failed. please try again","bit-integrations")});o(!1)}).catch(()=>o(!1))},p=(a,t,l)=>{var o,d;const i=a===0?t.module:t.relatedlists[a-1].module;return l?t.default.moduleData[i].requiredFileUploadFields.length>0?(o=t.default.moduleData[i].requiredFileUploadFields)==null?void 0:o.map(e=>({formField:"",zohoFormField:e})):[{formField:"",zohoFormField:""}]:t.default.moduleData[i].required.length>0?(d=t.default.moduleData[i].required)==null?void 0:d.map(e=>({formField:"",zohoFormField:e})):[{formField:"",zohoFormField:""}]},x=a=>{const t=a!=null&&a.field_map?a.field_map.filter(d=>{var e,s,m;return!d.formField&&d.zohoFormField&&((m=(s=(e=a==null?void 0:a.default)==null?void 0:e.moduleData)==null?void 0:s[a.module])==null?void 0:m.required.indexOf(d.zohoFormField))!==-1}):[],l=a!=null&&a.upload_field_map?a.upload_field_map.filter(d=>{var e,s,m;return!d.formField&&d.zohoFormField&&((m=(s=(e=a==null?void 0:a.default)==null?void 0:e.moduleData)==null?void 0:s[a.module])==null?void 0:m.requiredFileUploadFields.indexOf(d.zohoFormField))!==-1}):[],i=a.relatedlists.map(d=>d.field_map.filter(e=>!e.formField&&e.zohoFormField)),o=a.relatedlists.map(d=>d.upload_field_map.filter(e=>!e.formField&&e.zohoFormField));return!(t.length>0||l.length>0||i.some(d=>d.length)||o.some(d=>d.length))};export{N as a,q as b,x as c,j as d,O as h,P as r};
