import{j as t,_ as a}from"./main.2.7.8.js";import{u as j,h as v,d as i}from"./react-router-dom.BLIKw1eE.js";import"./Note.CbpnsFnB.js";import{B as I}from"./BackIcn.B0Uf3wb7.js";import{S as B}from"./SnackMsg.DGLO5_fd.js";import{S as y}from"./Steps.CeG8Itxy.js";import{I as k,g as C}from"./Integrations.DsKoVZo5.js";import _ from"./SendinBlueAuthorization.CQt2VVgR.js";import{c as N}from"./SendinBlueCommonFunc.CJ-J99U1.js";import{S as w}from"./SendinBlueIntegLayout.Dqsb_yRl.js";import"./CopyIcn.CrDMgwxJ.js";import"./Table.PPpIxK2a.js";import"./index.rAvPDjud.js";import"./tutorialLinks.C1WWujPT.js";import"./TutorialLink.CvfNjaff.js";import"./TagifyInput.AWOXl6wg.js";import"./tagify.YxUZd8Ix.js";function V({formFields:l,setFlow:u,flow:f,allIntegURL:g}){const x=j(),{formID:p}=v(),[r,o]=i.useState(!1),[s,d]=i.useState(1),[S,n]=i.useState({show:!1}),[b,c]=i.useState({templateId:"",RedirectionUrl:""}),[e,m]=i.useState({name:"Brevo(Sendinblue)",type:"Brevo(Sendinblue)",lists:[],api_key:"",field_map:[{formField:"",sendinBlueField:""}],actions:{}}),h=E=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300);{if(e.templateId===""||e.redirectionUrl===""){c({templateId:e.templateId?"":a("Template name can't be empty","bit-integrations"),redirectionUrl:e.redirectionUrl?"":a("Redirection url name can't be empty","bit-integrations")});return}if(!N(e)){n({show:!0,msg:a("Please map all required fields to continue.","bit-integrations")});return}e.name!==""&&e.field_map.length>0&&d(3)}};return t.jsxs("div",{children:[t.jsx(B,{snack:S,setSnackbar:n}),t.jsx("div",{className:"txt-center mt-2",children:t.jsx(y,{step:3,active:s})}),t.jsx(_,{formID:p,sendinBlueConf:e,setSendinBlueConf:m,step:s,setstep:d,isLoading:r,setIsLoading:o,setSnackbar:n}),t.jsxs("div",{className:"btcd-stp-page",style:{width:s===2&&900,height:s===2&&"auto"},children:[t.jsx(w,{formID:p,formFields:l,sendinBlueConf:e,setSendinBlueConf:m,isLoading:r,setIsLoading:o,setSnackbar:n,error:b,setError:c}),t.jsxs("button",{onClick:()=>h(),disabled:e.field_map.length<1,className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[a("Next","bit-integrations"),t.jsx(I,{className:"ml-1 rev-icn"})]})]}),t.jsx(k,{step:s,saveConfig:()=>C(f,u,g,e,x,"","",o),isLoading:r,dataConf:e,setDataConf:m,formFields:l})]})}export{V as default};
