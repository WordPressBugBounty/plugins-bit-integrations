var _=Object.defineProperty;var j=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var v=(i,l,a)=>l in i?_(i,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[l]=a,p=(i,l)=>{for(var a in l||(l={}))A.call(l,a)&&v(i,a,l[a]);if(j)for(var a of j(l))M.call(l,a)&&v(i,a,l[a]);return i};import{k as S,g as y,j as e,_ as r}from"./main.2.7.9.js";import"./Note.B1QjZ60t.js";import{a as k,h as T}from"./Integrations.CEc3UakZ.js";import{g as V}from"./GoogleContactsCommonFunc.Bz5_yhng.js";import{T as $}from"./TagifyInput.BafnMlYq.js";import{d as N}from"./react-router-dom.BLIKw1eE.js";import{a as f}from"./CopyIcn.Bz4pX3qF.js";import{b as q}from"./Table.Bhs4KlDc.js";const F=(i,l,a)=>{const t=p({},l);t.field_map.splice(i,0,{}),a(p({},t))},I=(i,l,a)=>{const t=p({},l);t.field_map.length>1&&t.field_map.splice(i,1),a(p({},t))},w=(i,l,a,t)=>{const c=p({},a);c.field_map[l][i.target.name]=i.target.value,i.target.value==="custom"&&(c.field_map[l].customValue=""),t(p({},c))};function P({i,formFields:l,field:a,googleContactsConf:t,setGoogleContactsConf:c}){var m,b;if(((m=t==null?void 0:t.field_map)==null?void 0:m.length)===1&&a.googleContactsFormField===""){const s=p({},t),x=V(s);s.field_map=x,c(s)}const n=(t==null?void 0:t.default.filter(s=>s.required===!0))||[],d=(t==null?void 0:t.default.filter(s=>s.required===!1))||[],h=S(y),{isPro:u}=h;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:a.formField||"",onChange:s=>w(s,i,t,c),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),e.jsx("optgroup",{label:r("Form Fields","bit-integrations"),children:l==null?void 0:l.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`))}),e.jsx("option",{value:"custom",children:r("Custom...","bit-integrations")}),e.jsx("optgroup",{label:sprintf(r("General Smart Codes %s","bit-integrations"),u?"":`(${r("Pro","bit-integrations")})`),children:u&&((b=k)==null?void 0:b.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`)))})]}),a.formField==="custom"&&e.jsx($,{onChange:s=>T(s,i,t,c),label:r("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:a.customValue,placeholder:r("Custom Value","bit-integrations"),formFields:l}),e.jsxs("select",{className:"btcd-paper-inp",disabled:i<n.length,name:"googleContactsFormField",value:i<n.length?n[i].key||"":a.googleContactsFormField||"",onChange:s=>w(s,i,t,c),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),i<n.length?e.jsx("option",{value:n[i].key,children:n[i].label},n[i].key):d.map(({key:s,label:x})=>e.jsx("option",{value:s,children:x},s))]})]}),i>=n.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>F(i,t,c),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>I(i,t,c),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function L({googleContactsConf:i,setGoogleContactsConf:l,formFields:a}){var u;const[t,c]=N.useState(!1),[n,d]=N.useState({show:!1,action:()=>{}}),h=(m,b)=>{const s=p({},i);m.target.value!==""?s.actions.attachments=m.target.value:delete s.actions.attachments,l(p({},s))};return e.jsx("div",{className:"d-flx wdt-200",children:e.jsxs("div",{className:"pos-rel d-flx w-8l",children:[e.jsx("div",{className:"d-flx flx-wrp",children:e.jsx(q,{onChange:()=>d({show:"attachments"}),checked:"attachments"in i.actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:r("Photo","bit-integrations"),subTitle:r("Add picture on google contact account.","bit-integrations")})}),e.jsxs(f,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:"Ok",show:n.show==="attachments",close:()=>d({show:!1}),action:()=>d({show:!1}),title:r("Select Attachment","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2",children:r("Please select file upload fields","bit-integrations")}),e.jsxs("select",{onChange:m=>h(m),name:"attachments",value:(u=i.actions)==null?void 0:u.attachments,className:"btcd-paper-inp w-10 mt-2",children:[e.jsx("option",{value:"",children:r("Select file upload field","bit-integrations")}),a==null?void 0:a.filter(m=>m.type==="file").map(m=>e.jsx("option",{value:m.name,children:m.label},m.name+1))]})]})]})})}function K({flowID:i,formFields:l,googleContactsConf:a,setGoogleContactsConf:t}){const c=n=>{const d=p({},a),{name:h}=n.target;n.target.value!==""?d[h]=n.target.value:delete d[h],d[n.target.name]=n.target.value,t(p({},d))};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("Actions:","bit-integrations")}),e.jsxs("select",{onChange:c,name:"mainAction",value:a==null?void 0:a.mainAction,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:r("Select Actions","bit-integrations")}),(a==null?void 0:a.allActions)&&a.allActions.map(({key:n,label:d})=>e.jsx("option",{value:n,children:d},n))]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-5",children:e.jsx("b",{className:"wdt-100",children:r("Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Google Contacts Fields","bit-integrations")})})]}),a==null?void 0:a.field_map.map((n,d)=>e.jsx(P,{i:d,field:n,formFields:l,googleContactsConf:a,setGoogleContactsConf:t},`rp-m-${d+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>F(a.field_map.length,a,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:r("Utilities","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(L,{googleContactsConf:a,setGoogleContactsConf:t,formFields:l})]})}export{K as G};
