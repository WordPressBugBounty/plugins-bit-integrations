var _=Object.defineProperty;var h=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var j=(t,a,s)=>a in t?_(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,d=(t,a)=>{for(var s in a||(a={}))w.call(a,s)&&j(t,s,a[s]);if(h)for(var s of h(a))k.call(a,s)&&j(t,s,a[s]);return t};import{j as e,_ as c,k as M,g as K,s as f}from"./main.2.7.9.js";import{d as g}from"./react-router-dom.BLIKw1eE.js";import{b as S}from"./Table.Bhs4KlDc.js";import"./Note.B1QjZ60t.js";import{M as $,a as q}from"./Integrations.CEc3UakZ.js";import{g as I}from"./SmailyCommonFunc.BqK4V-Ic.js";function V({smailyConf:t,setSmailyConf:a}){var i;const s=(n,r)=>{const o=d({},t);n.target.checked?o.actions.unsubscribe=!0:delete o.actions.unsubscribe,a(d({},o))};return e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(S,{checked:((i=t.actions)==null?void 0:i.unsubscribe)||!1,onChange:n=>s(n),className:"wdt-200 mt-4 mr-2",value:"update_subscriber",title:c("unsubscribe subscriber","bit-integrations"),subTitle:c("Set the subscriber's status as unsubscribed.","bit-integrations")})})}const N=(t,a,s)=>{const i=d({},a);i.field_map.splice(t,0,{}),s(d({},i))},A=(t,a,s)=>{const i=d({},a);i.field_map.length>1&&i.field_map.splice(t,1),s(d({},i))},F=(t,a,s,i)=>{const n=d({},s);n.field_map[a][t.target.name]=t.target.value,t.target.value==="custom"&&(n.field_map[a].customValue=""),t.target.value==="customFieldKey"&&(n.field_map[a].customFieldKey=""),i(d({},n))},E=(t,a,s,i,n)=>{const r=d({},s);r.field_map[a][n]=t.target.value,i(d({},r))};function v({field:t,index:a,smailyConf:s,setSmailyConf:i,fieldValue:n,fieldLabel:r,className:o}){return e.jsx($,{onChange:b=>E(b,a,s,i,n),label:c(r,"bit-integrations"),className:o,type:"text",value:t[n],placeholder:c(r,"bit-integrations")})}function L({i:t,formFields:a,field:s,smailyConf:i,setSmailyConf:n}){var p,x;const r=(i==null?void 0:i.staticFields.filter(l=>l.required===!0))||[],o=(i==null?void 0:i.staticFields.filter(l=>l.required===!1))||[];if(((p=i==null?void 0:i.field_map)==null?void 0:p.length)===1&&s.smailyFormField===""){const l=d({},i),u=I(l);l.field_map=u,n(l)}const b=M(K),{isPro:m}=b;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:l=>F(l,t,i,n),children:[e.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),e.jsx("optgroup",{label:c("Form Fields","bit-integrations"),children:a==null?void 0:a.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`))}),e.jsx("option",{value:"custom",children:c("Custom...","bit-integrations")}),e.jsx("optgroup",{label:f(c("General Smart Codes %s","bit-integrations"),m?"":`(${c("Pro","bit-integrations")})`),children:m&&((x=q)==null?void 0:x.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),s.formField==="custom"&&e.jsx(v,{field:s,index:t,smailyConf:i,setSmailyConf:n,fieldValue:"customValue",fieldLabel:"Custom Value",className:"mr-2"}),e.jsxs("select",{className:"btcd-paper-inp",disabled:t<r.length,name:"smailyFormField",value:t<r?r[t].label||"":s.smailyFormField||"",onChange:l=>F(l,t,i,n),children:[e.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),t<r.length?e.jsx("option",{value:r[t].key,children:r[t].label},r[t].key):o.map(({key:l,label:u})=>e.jsx("option",{value:l,children:u},l)),e.jsx("option",{value:"customFieldKey",children:c("Custom Field","bit-integrations")})]}),s.smailyFormField==="customFieldKey"&&e.jsx(v,{field:s,index:t,smailyConf:i,setSmailyConf:n,fieldValue:"customFieldKey",fieldLabel:"Custom Field Key",className:"ml-2"})]}),t>=r.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(t,i,n),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>A(t,i,n),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function U({formFields:t,handleInput:a,smailyConf:s,setSmailyConf:i,loading:n,setLoading:r,setSnackbar:o}){const[b,m]=g.useState({name:"",api_user_name:""}),[p,x]=g.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("br",{}),e.jsx("div",{className:"mt-5",children:e.jsx("b",{className:"wdt-100",children:c("Field Map","bit-integrations")})}),e.jsx("br",{}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("Smaily Fields","bit-integrations")})})]}),s==null?void 0:s.field_map.map((l,u)=>e.jsx(L,{i:u,field:l,smailyConf:s,formFields:t,setSmailyConf:i,setSnackbar:o},`rp-m-${u+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>N(s.field_map.length,s,i),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:c("Utilities","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(V,{smailyConf:s,setSmailyConf:i,formFields:t})]})]})}export{U as S};
