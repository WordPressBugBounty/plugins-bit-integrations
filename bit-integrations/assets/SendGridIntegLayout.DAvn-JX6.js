var k=Object.defineProperty;var v=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var N=(s,e,a)=>e in s?k(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,r=(s,e)=>{for(var a in e||(e={}))M.call(e,a)&&N(s,a,e[a]);if(v)for(var a of v(e))L.call(e,a)&&N(s,a,e[a]);return s};import{j as t,_ as c,L as y,k as A,g as $,s as q}from"./main.2.7.8.js";import{d}from"./react-router-dom.BLIKw1eE.js";import{x as R}from"./Note.CbpnsFnB.js";import{b as T}from"./Table.PPpIxK2a.js";import{a as V}from"./CopyIcn.CrDMgwxJ.js";import{g as F,a as I,s as S}from"./SendGridCommonFunc.KHbsIUeP.js";import{a as E,h as f}from"./Integrations.DsKoVZo5.js";import{T as z}from"./TagifyInput.AWOXl6wg.js";function P({sendGridConf:s,setSendGridConf:e,loading:a,setLoading:l}){var h,u;const[o,n]=d.useState({show:!1,action:()=>{}}),j=m=>{const p=r({},s);m.target.checked?(F(s,e,l),p.actions.lists=!0):(n({show:!1}),delete p.actions.lists),n({show:"lists"}),e(r({},p))},b=()=>{n({show:!1})},x=m=>{const p=r({},s);p.selectedLists=m,e(r({},p))};return t.jsxs("div",{className:"pos-rel d-flx w-8",children:[t.jsx(T,{checked:((h=s==null?void 0:s.selectedLists)==null?void 0:h.length)||!1,onChange:m=>j(m),className:"wdt-200 mt-4 mr-2",value:"add_to_lists",title:c("Select Lists","bit-integrations"),subTitle:c("Add contact to lists")}),t.jsxs(V,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:c("Ok","bit-integrations"),show:o.show==="lists",close:b,action:b,title:c("Lists","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:c("Select contact lists","bit-integrations")}),a.lists?t.jsx(y,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):t.jsxs("div",{className:"flx flx-between mt-2",children:[t.jsx(R,{options:(u=s==null?void 0:s.lists)==null?void 0:u.map(m=>({label:m.name,value:m.id})),className:"msl-wrp-options",defaultValue:s==null?void 0:s.selectedLists,onChange:m=>x(m)}),t.jsx("button",{onClick:()=>F(s,e,l),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${c("Refresh Lists","bit-integrations")}'`},type:"button",children:"↻"})]})]})]})}const _=(s,e,a)=>{const l=r({},e);l.field_map.splice(s,0,{}),a(r({},l))},B=(s,e,a)=>{const l=r({},e);l.field_map.length>1&&l.field_map.splice(s,1),a(r({},l))},w=(s,e,a,l)=>{const o=r({},a);o.field_map[e][s.target.name]=s.target.value,s.target.value==="custom"&&(o.field_map[e].customValue=""),l(r({},o))};function H({i:s,formFields:e,field:a,sendGridConf:l,setSendGridConf:o}){var u,m,p;const n=(l==null?void 0:l.staticFields.filter(i=>i.required===!0))||[],b=[...((u=l==null?void 0:l.staticFields)==null?void 0:u.filter(i=>i.required===!1))||[],...l.customFields];if(((m=l==null?void 0:l.field_map)==null?void 0:m.length)===1&&a.sendGridFormField===""){const i=r({},l),g=I(i);i.field_map=g,o(i)}const x=A($),{isPro:h}=x;return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:a.formField||"",onChange:i=>w(i,s,l,o),children:[t.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),t.jsx("optgroup",{label:c("Form Fields","bit-integrations"),children:e==null?void 0:e.map(i=>t.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`))}),t.jsx("option",{value:"custom",children:c("Custom...","bit-integrations")}),t.jsx("optgroup",{label:q(c("General Smart Codes %s","bit-integrations"),h?"":`(${c("Pro","bit-integrations")})`),children:h&&((p=E)==null?void 0:p.map(i=>t.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`)))})]}),a.formField==="custom"&&t.jsx(z,{onChange:i=>f(i,s,l,o),label:c("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:a.customValue,placeholder:c("Custom Value","bit-integrations"),formFields:e}),t.jsxs("select",{className:"btcd-paper-inp",disabled:s<n.length,name:"sendGridFormField",value:s<n?n[s].label||"":a.sendGridFormField||"",onChange:i=>w(i,s,l,o),children:[t.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),s<n.length?t.jsx("option",{value:n[s].key,children:n[s].label},n[s].key):b.map(({key:i,label:g})=>t.jsx("option",{value:i,children:g},i))]})]}),s>=n.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>_(s,l,o),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>B(s,l,o),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function Z({formFields:s,sendGridConf:e,setSendGridConf:a,loading:l,setLoading:o,setSnackbar:n}){const[j,b]=d.useState({name:"",auth_token:""}),[x,h]=d.useState(!1);return t.jsxs("div",{children:[t.jsx("div",{className:"mt-5",children:t.jsxs("b",{className:"wdt-100",children:[c("Field Map","bit-integrations"),t.jsx("button",{onClick:()=>S(e,a,b,h,l,o,"refreshLists"),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${c("Refresh custom fields","bit-integrations")}'`},type:"button",disabled:l.customFields,children:"↻"})]})}),l.customFields&&t.jsx(y,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),t.jsx("br",{}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:c("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:c("SendGrid Fields","bit-integrations")})})]}),e==null?void 0:e.field_map.map((u,m)=>t.jsx(H,{i:m,field:u,sendGridConf:e,formFields:s,setSendGridConf:a,setSnackbar:n},`rp-m-${m+9}`)),t.jsxs("div",{children:[t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>_(e.field_map.length,e,a),className:"icn-btn sh-sm",type:"button",children:"+"})}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:c("Utilities","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsx(P,{sendGridConf:e,setSendGridConf:a,loading:l,setLoading:o})]})]})}export{Z as S};
