var F=Object.defineProperty;var h=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var N=(r,i,a)=>i in r?F(r,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[i]=a,x=(r,i)=>{for(var a in i||(i={}))I.call(i,a)&&N(r,a,i[a]);if(h)for(var a of h(i))L.call(i,a)&&N(r,a,i[a]);return r};import{_ as e,j as s,z as n}from"./main.2.7.8.js";import{u as O,d as l}from"./react-router-dom.BLIKw1eE.js";import"./Note.CbpnsFnB.js";import{S as T}from"./SnackMsg.DGLO5_fd.js";import{S as w}from"./Steps.CeG8Itxy.js";import{I as E,g as z}from"./Integrations.DsKoVZo5.js";import D from"./OneHashCRMAuthorization.GRRWmBlV.js";import{h as H,c as C}from"./OneHashCRMCommonFunc.BXi7LkTd.js";import{O as R}from"./OneHashCRMIntegLayout.BwexuoOo.js";import"./CopyIcn.CrDMgwxJ.js";import"./Table.PPpIxK2a.js";import"./index.rAvPDjud.js";import"./tutorialLinks.C1WWujPT.js";import"./TutorialLink.CvfNjaff.js";function ae({formFields:r,setFlow:i,flow:a,allIntegURL:g}){const y=O(),[f,u]=l.useState(!1),[p,k]=l.useState({}),[o,q]=l.useState(1),[S,c]=l.useState({show:!1}),v=[{key:"customer_name",label:e("Full Name","bit-integrations"),required:!0},{key:"mobile_no",label:e("Mobile Number","bit-integrations"),required:!1},{key:"email_id",label:e("Email Address","bit-integrations"),required:!1},{key:"primary_address",label:e("Primary Address","bit-integrations"),required:!1},{key:"customer_primary_contact",label:e("customer Primary Contact","bit-integrations"),required:!1},{key:"customer_primary_address",label:e("customer Primary Address","bit-integrations"),required:!1}],j=[{key:"first_name",label:e("First Name","bit-integrations"),required:!0},{key:"middle_name",label:e("Middle Name","bit-integrations"),required:!1},{key:"last_name",label:e("Last Name","bit-integrations"),required:!1},{key:"email_id",label:e("Email Address","bit-integrations"),required:!1},{key:"designation",label:e("Designation","bit-integrations"),required:!1},{key:"phone",label:e("Phone Number","bit-integrations"),required:!1},{key:"mobile_no",label:e("Mobile Number","bit-integrations"),required:!1},{key:"gender",label:e("Gender","bit-integrations"),required:!1},{key:"department",label:e("Department","bit-integrations"),required:!1},{key:"company_name",label:e("Company Name","bit-integrations"),required:!1}],P=[{key:"lead_name",label:e("Person Name","bit-integrations"),required:!0},{key:"company_name",label:e("Organization Name","bit-integrations"),required:!0},{key:"email_id",label:e("Email Address","bit-integrations"),required:!1},{key:"title",label:e("Title","bit-integrations"),required:!1},{key:"phone",label:e("Phone Number","bit-integrations"),required:!1},{key:"mobile_no",label:e("Mobile Number","bit-integrations"),required:!1},{key:"fax",label:e("Fax","bit-integrations"),required:!1},{key:"designation",label:e("Designation","bit-integrations"),required:!1},{key:"gender",label:e("Gender","bit-integrations"),required:!1},{key:"campaign_name",label:e("Campaign Name","bit-integrations"),required:!1},{key:"website",label:e("Website","bit-integrations"),required:!1},{key:"notes",label:e("Notes","bit-integrations"),required:!1},{key:"address_title",label:e("Address Title","bit-integrations"),required:!1},{key:"address_line1",label:e("Address Line 1","bit-integrations"),required:!1},{key:"address_line2",label:e("Address Line 2","bit-integrations"),required:!1},{key:"city",label:e("City","bit-integrations"),required:!1},{key:"county",label:e("County","bit-integrations"),required:!1},{key:"state",label:e("State","bit-integrations"),required:!1},{key:"pincode",label:e("Postal Code","bit-integrations"),required:!1},{key:"country",label:e("Country","bit-integrations"),required:!1}],[t,d]=l.useState({name:"OneHashCRM",type:"OneHashCRM",api_key:"",api_secret:"",domain:"",field_map:[{formField:"",oneHashCRMFormField:""}],actionName:"",actionId:"",customerFields:v,contactFields:j,leadFields:P,actions:{}}),M=()=>{u(!0),z(a,i,g,t,y,"","",u).then(m=>{var _;m.success?(n.success((_=m.data)==null?void 0:_.msg),y(g)):n.error(m.data||m)})},A=b=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!C(t)){n.error(e("Please map mandatory fields","bit-integrations"));return}if(t.actionName==="customer"&&!t.selectedCustomerType){n.error(e("Please select Customer Type","bit-integrations"));return}if(t.actionName==="lead"&&!t.selectedLeadStatus){n.error(e("Please select Lead Status","bit-integrations"));return}t.field_map.length>0&&q(b)};return s.jsxs("div",{children:[s.jsx(T,{snack:S,setSnackbar:c}),s.jsx("div",{className:"txt-center mt-2",children:s.jsx(w,{step:3,active:o})}),s.jsx(D,{oneHashCRMConf:t,setOneHashCRMConf:d,step:o,setStep:q,loading:p,setLoading:k,setSnackbar:c}),s.jsxs("div",{className:"btcd-stp-page",style:x({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[s.jsx(R,{formFields:r,handleInput:b=>H(b,t,d),oneHashCRMConf:t,setOneHashCRMConf:d,loading:p,setLoading:k,isLoading:f,setIsLoading:u,setSnackbar:c}),(t==null?void 0:t.actionName)&&s.jsxs("button",{onClick:()=>A(3),disabled:!C(t),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[e("Next","bit-integrations")," Â ",s.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(t==null?void 0:t.actionName)&&s.jsx(E,{step:o,saveConfig:()=>M(),isLoading:f,dataConf:t,setDataConf:d,formFields:r})]})}export{ae as default};
