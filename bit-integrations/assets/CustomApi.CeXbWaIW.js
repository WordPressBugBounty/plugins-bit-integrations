var I=Object.defineProperty;var T=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var S=(i,t,s)=>t in i?I(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s,h=(i,t)=>{for(var s in t||(t={}))P.call(t,s)&&S(i,s,t[s]);if(T)for(var s of T(t))_.call(t,s)&&S(i,s,t[s]);return i};import{_ as a,j as e}from"./main.2.7.11.js";import{d as m,u as C,h as V}from"./react-router-dom.BLIKw1eE.js";import{x as K,y as D}from"./Note.iI4FM_zT.js";import{S as z}from"./SnackMsg.DJhRycHe.js";import{S as B}from"./Steps.KpTwh2fS.js";import{m as E,I as F,s as U}from"./Integrations.CiiC6YXN.js";import{T as L}from"./TutorialLink.BQJGOONg.js";import{t as q}from"./tutorialLinks.C1WWujPT.js";import"./CopyIcn.DaX9e6Na.js";import"./Table.NqkguWs5.js";import"./index.rAvPDjud.js";function H({formID:i,customApiConf:t,setCustomApiConf:s,step:c,setStep:g,isLoading:u,setIsLoading:j,setSnackbar:v,redirectLocation:o,isInfo:n}){const[w,x]=m.useState(!1),{customApi:r}=q,b=[{label:a("API Key","bit-integrations"),value:"apikey"},{label:a("Bearer Token","bit-integrations"),value:"bearer"},{label:a("Basic Auth","bit-integrations"),value:"basic"}],y=[{label:a("Header","bit-integrations"),value:"header"},{label:a("Query String","bit-integrations"),value:"query"}],d=l=>{const p=h({},t);p[l.target.name]=l.target.value,s(p)},k=(l,p)=>{const N=D(t);l?N[p]=l:delete N[p],s(h({},N))};function f(l){switch(l){case"apikey":return!t.key||!t.value||!t.apiKeyAddTo;case"bearer":return!t.key||!t.token;case"basic":return!t.username||!t.password;default:return!0}}return e.jsxs("div",{className:"btcd-stp-page",style:{width:c===1&&900,height:c===1&&"1000px"},children:[e.jsx(L,{title:"Custom Api",youTubeLink:r==null?void 0:r.youTubeLink}),e.jsx(L,{title:"Custom Api",docLink:r==null?void 0:r.docLink}),e.jsxs("div",{className:"d-flx",children:[e.jsx("div",{className:"wdt-200 d-in-b mt-3",children:e.jsx("b",{children:a("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:d,name:"name",value:t.name,type:"text",placeholder:a("Integration Name...","bit-integrations"),disabled:n})]}),e.jsx("br",{}),e.jsxs("div",{className:"d-flx",children:[e.jsx("b",{className:"wdt-200 d-in-b mt-3",children:a("Select Auth Protocol:","bit-integrations")}),e.jsx(K,{defaultValue:t.authType,className:"btcd-paper-drpdwn w-5",singleSelect:!0,options:b,onChange:l=>k(l,"authType")})]}),t.authType==="apikey"&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Key:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:d,name:"key",value:t.key,type:"text",placeholder:a("Key","bit-integrations"),disabled:n})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Value:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:d,name:"value",value:t.value,type:"text",placeholder:a("Value","bit-integrations"),disabled:n})]}),e.jsx("b",{className:"wdt-200 d-in-b mt-3",children:a("Add to:","bit-integrations")}),e.jsx(K,{defaultValue:t.apiKeyAddTo,className:"btcd-paper-drpdwn w-5 mt-2",singleSelect:!0,options:y,onChange:l=>k(l,"apiKeyAddTo")})]}),t.authType==="bearer"&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Key:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:d,name:"key",value:t.key,type:"text",placeholder:a("Key","bit-integrations"),disabled:n})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Token:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:d,name:"token",value:t.token,type:"text",placeholder:a("Token","bit-integrations"),disabled:n})]})]}),t.authType==="basic"&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Key:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:d,name:"key",value:t.key,type:"text",placeholder:a("Key","bit-integrations"),disabled:n})]}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("User Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:d,name:"username",value:t.username,type:"text",placeholder:a("User Name...","bit-integrations"),disabled:n}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Password:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:d,name:"password",value:t.password,type:"text",placeholder:a("Password...","bit-integrations"),disabled:n})]}),e.jsx("br",{}),e.jsx("div",{style:h({},c===1&&{width:900,height:"auto",overflow:"visible"}),children:e.jsxs("button",{onClick:()=>g(2),disabled:f(t.authType)||u,className:"btn btcd-btn-lg purple sh-sm ",type:"button",children:[a("Next","bit-integrations"),e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})})]})}function ee({formFields:i,setFlow:t,flow:s,allIntegURL:c}){const g=C(),{formID:u}=V(),[j,v]=m.useState(!1),[o,n]=m.useState(1),[w,x]=m.useState({show:!1}),[r,b]=m.useState({name:"CustomApi",type:"CustomApi",url:"",field_map:[{formField:"",customApiFormField:""}],actions:{}}),y=()=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),n(3)};return e.jsxs("div",{children:[e.jsx(z,{snack:w,setSnackbar:x}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(B,{step:3,active:o})}),e.jsx(H,{formID:u,customApiConf:r,setCustomApiConf:b,step:o,setStep:n,isLoading:j,setIsLoading:v,setSnackbar:x}),e.jsxs("div",{className:"btcd-stp-page",style:h({},o===2&&{width:900,height:"1000px",overflow:"visible"}),children:[e.jsx(E,{formID:u,formFields:i,customApiConf:r,setCustomApiConf:b,create:!0,step:!0,setStep:!0}),e.jsxs("button",{onClick:()=>y(),className:"btn btcd-btn-lg purple sh-sm flx",type:"button",children:[a("Next","bit-integrations"),"Â ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),e.jsx(F,{step:o,saveConfig:()=>U({flow:s,setFlow:t,allIntegURL:c,navigate:g,conf:r,setIsLoading:v,setSnackbar:x}),isLoading:j,dataConf:r,setDataConf:b,formFields:i})]})}export{ee as default};
