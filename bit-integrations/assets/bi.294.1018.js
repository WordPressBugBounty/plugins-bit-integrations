var V=Object.defineProperty;var _=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var E=(n,s,r)=>s in n?V(n,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[s]=r,u=(n,s)=>{for(var r in s||(s={}))M.call(s,r)&&E(n,r,s[r]);if(_)for(var r of _(s))$.call(s,r)&&E(n,r,s[r]);return n};import{f as D,j as t,r as O,L as Y}from"./main-174.js";import{d as K,_ as i}from"./bi.964.0.js";import{a as q,h as z,b as B}from"./bi.48.3.js";import{T as c,g as S,a as G,b as y,d as R,e as w,f as U,i as W,O as Z,j as I,k as J}from"./bi.185.1017.js";import{T as Q,b as F}from"./bi.755.11.js";import{T as X}from"./bi.54.773.js";import{aj as H,x as j}from"./bi.89.470.js";import{a as f}from"./bi.873.9.js";function g({i:n,formFields:s,field:r,highLevelConf:e,setHighLevelConf:m}){var k,P;const T=(e==null?void 0:e.highLevelFields.filter(l=>l.required===!0))||[],b=((k=e==null?void 0:e.highLevelFields)==null?void 0:k.filter(l=>l.required===!1))||[],N=D(K),{isPro:a}=N,d=l=>{const p=u({},e);p.field_map.splice(l,0,{}),m(p)},o=l=>{const p=u({},e);p.field_map.length>1&&p.field_map.splice(l,1),m(p)},A=(l,p)=>{const x=u({},e);x.field_map[p][l.target.name]=l.target.value,l.target.value==="custom"&&(x.field_map[p].customValue=""),m(x)};return t.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:r.formField||"",onChange:l=>A(l,n),children:[t.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),t.jsx("optgroup",{label:"Campaign Fields",children:s==null?void 0:s.map(l=>t.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`))}),t.jsx("option",{value:"custom",children:i("Custom...","bit-integrations")}),t.jsx("optgroup",{label:`General Smart Codes ${a?"":"(PRO)"}`,children:a&&((P=q)==null?void 0:P.map(l=>t.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),r.formField==="custom"&&t.jsx(X,{onChange:l=>z(l,n,e,m),label:i("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:r.customValue,placeholder:i("Custom Value","bit-integrations"),formFields:s}),t.jsxs("select",{className:"btcd-paper-inp",name:"highLevelField",value:n<T?T[n].label||"":r.highLevelField||"",onChange:l=>A(l,n),disabled:n<T.length,children:[t.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),n<T.length?t.jsx("option",{value:T[n].key,children:T[n].label},T[n].key):b.map(({key:l,label:p})=>t.jsx("option",{value:l,children:p},l))]})]}),n>=T.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>d(n),className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),t.jsx("button",{onClick:()=>o(n),className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:t.jsx(Q,{})})]})]})}function C({highLevelConf:n,setHighLevelConf:s,loading:r,setLoading:e}){var P;const[m,T]=O.useState({show:!1}),b=D(K),{isPro:N}=b,[a,d]=O.useState({}),o=(l,p)=>{const x=u({},n);p==="checkbox"?l.target.checked?x.actions[l.target.value]=!0:delete x.actions[l.target.value]:p==="contactTags"&&(S("high_level_contact_tags",n,a,d,p,r,e,"Tags"),T({show:p})),s(u({},x))},A=()=>{T({show:!1})},k=(l,p)=>{const x=u({},n);x[p]=l,s(u({},x))};return t.jsxs(t.Fragment,{children:[!N&&t.jsx("div",{className:"pt-2",children:t.jsx("span",{className:"actions-note",children:"The Bit Integrations Pro plugin needs to be installed and activated to utilize these features."})}),t.jsxs("div",{className:"pos-rel d-flx w-8",children:[(n.selectedTask===c.CREATE_CONTACT||n.selectedTask===c.UPDATE_CONTACT)&&t.jsx(F,{checked:((P=n.actions)==null?void 0:P.dnd)||!1,onChange:l=>o(l,"checkbox"),className:"wdt-200 mt-4 mr-2",value:"dnd",title:i("Do Not Disturb","bit-integrations"),subTitle:i("Enable do not disturb for contact.","bit-integrations"),isInfo:!N}),[c.CREATE_CONTACT,c.UPDATE_CONTACT,c.CREATE_OPPORTUNITY,c.UPDATE_OPPORTUNITY].includes(n.selectedTask)&&t.jsxs(t.Fragment,{children:[t.jsx(F,{checked:n.selectedTags||!1,onChange:l=>o(l,"contactTags"),className:"wdt-200 mt-4 mr-2",value:"select_menu_post_type",title:i("Select Tags","bit-integrations"),subTitle:i("Select tags and assign them to the contact.","bit-integrations"),isInfo:!N}),t.jsxs(f,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:m.show==="contactTags",close:A,action:A,title:i("Post Types","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsxs("div",{className:"mt-2 flx",children:[i("Select Tags","bit-integrations"),t.jsx(H,{width:350,icnSize:17,className:"ml-1",children:t.jsx("div",{className:"txt-body",children:i("Choose from the existing tags, or create and add new ones by typing them and pressing enter or comma (,).","bit-integrations")})})]}),r.options?t.jsx(Y,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):t.jsxs("div",{className:"flx flx-between mt-2",children:[t.jsx(j,{options:a==null?void 0:a.contactTags,className:"msl-wrp-options",defaultValue:n==null?void 0:n.selectedTags,onChange:l=>k(l,"selectedTags"),style:{width:"100%"},customValue:!0}),t.jsx("button",{onClick:()=>S("high_level_contact_tags",n,a,d,"contactTags",r,e,"Tags"),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh Tags","bit-integrations")}'`},type:"button",children:"↻"})]})]})]})]})]})}function it({formFields:n,highLevelConf:s,setHighLevelConf:r,loading:e,setLoading:m}){const T=a=>{const d=s;if(d.selectedTask=a,a){const o=J(a,(d==null?void 0:d.version)||"v1");d.highLevelFields=o.staticFields,d.field_map=o.fieldMap,a===c.CREATE_CONTACT?I(d,r,e,m):a===c.UPDATE_CONTACT||a===c.CREATE_TASK||a===c.UPDATE_TASK?w(d,r,e,m):(a===c.CREATE_OPPORTUNITY||a===c.UPDATE_OPPORTUNITY)&&y(d,r,e,m)}else d.highLevelFields=[],d.field_map=[];r(u({},d))},b=(a,d)=>{const o=u({},s);if(o[d]=a,a&&o.selectedTask===c.UPDATE_TASK&&d==="selectedContact"&&U(o,r,e,m),a&&d==="selectedPipeline"){o.selectedStage="",o.selectedOpportunity="";const A=o.stages[a].map(k=>({label:k.name,value:k.id}));o.currentStages=A,s.selectedTask===c.UPDATE_OPPORTUNITY&&R(o,r,e,m)}!a&&d==="selectedPipeline"&&(o.selectedStage="",o.selectedOpportunity=""),r(u({},o))},N=()=>s.selectedTask===c.CREATE_TASK||s.selectedTask===c.UPDATE_TASK?[{label:"Incompleted",value:"incompleted"},{label:"Completed",value:"completed"}]:[{label:"Open",value:"open"},{label:"Won",value:"won"},{label:"Lost",value:"lost"},{label:"Abandoned",value:"abandoned"}];return t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsxs("div",{className:"flx mt-3 mb-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Task:","bit-integrations")}),t.jsx(j,{style:{width:"450px"},options:G,className:`msl-wrp-options ${s.selectedTask?"":"height-s"}`,defaultValue:s==null?void 0:s.selectedTask,onChange:a=>T(a),singleSelect:!0})]}),(s.selectedTask===c.CREATE_OPPORTUNITY||s.selectedTask===c.UPDATE_OPPORTUNITY)&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flx mt-3 mb-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Pipeline:","bit-integrations")}),t.jsx(j,{style:{width:"450px"},options:s.pipelines,className:"msl-wrp-options",defaultValue:s==null?void 0:s.selectedPipeline,onChange:a=>b(a,"selectedPipeline"),disabled:e.pipelines||e.contacts||e.users,singleSelect:!0}),t.jsx("button",{onClick:()=>y(s,r,e,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh pipeline list","bit-integrations")}'`},disabled:e.contacts||e.pipelines,type:"button",children:"↻"})]}),t.jsxs("div",{className:"flx mt-3 mb-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Stage:","bit-integrations")}),t.jsx(j,{style:{width:"450px"},options:s.currentStages,className:"msl-wrp-options",defaultValue:s==null?void 0:s.selectedStage,onChange:a=>b(a,"selectedStage"),disabled:!s.selectedPipeline,singleSelect:!0})]})]}),s.selectedTask===c.UPDATE_OPPORTUNITY&&t.jsxs("div",{className:"flx mt-3 mb-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Opportunity:","bit-integrations")}),t.jsx(j,{style:{width:"450px"},options:s.opportunities,className:"msl-wrp-options",defaultValue:s==null?void 0:s.selectedOpportunity,onChange:a=>b(a,"selectedOpportunity"),disabled:!s.selectedPipeline||e.opportunities,singleSelect:!0}),t.jsx("button",{onClick:()=>R(s,r,e,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh opportunity list","bit-integrations")}'`},disabled:!s.selectedPipeline||e.contacts||e.pipelines||e.opportunities,type:"button",children:"↻"})]}),(s.selectedTask===c.UPDATE_CONTACT||s.selectedTask===c.CREATE_TASK||s.selectedTask===c.UPDATE_TASK||s.selectedTask===c.CREATE_OPPORTUNITY||s.selectedTask===c.UPDATE_OPPORTUNITY)&&t.jsxs("div",{className:"flx mt-3 mb-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Contact:","bit-integrations")}),t.jsx(j,{style:{width:"450px"},options:s.contacts,className:"msl-wrp-options",defaultValue:s==null?void 0:s.selectedContact,onChange:a=>b(a,"selectedContact"),singleSelect:!0}),t.jsx("button",{onClick:()=>w(s,r,e,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh contact list","bit-integrations")}'`},disabled:e.contacts,type:"button",children:"↻"})]}),s.selectedTask===c.UPDATE_TASK&&t.jsxs("div",{className:"flx mt-3 mb-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Task:","bit-integrations")}),t.jsx(j,{style:{width:"450px"},options:s.hlTasks,className:"msl-wrp-options",defaultValue:s==null?void 0:s.updateTaskId,onChange:a=>b(a,"updateTaskId"),disabled:!s.selectedContact||e.contacts||e.hlTasks,singleSelect:!0}),t.jsx("button",{onClick:()=>U(s,r,e,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh task list","bit-integrations")}'`},disabled:!s.selectedContact||e.contacts||e.users||e.hlTasks,type:"button",children:"↻"})]}),(s.selectedTask===c.CREATE_TASK||s.selectedTask===c.UPDATE_TASK||s.selectedTask===c.CREATE_OPPORTUNITY||s.selectedTask===c.UPDATE_OPPORTUNITY)&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flx mt-3 mb-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Assignee:","bit-integrations")}),t.jsx(j,{style:{width:"450px"},options:s.users,className:"msl-wrp-options",defaultValue:s==null?void 0:s.selectedUser,onChange:a=>b(a,"selectedUser"),singleSelect:!0}),t.jsx("button",{onClick:()=>W(s,r,e,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh assignee list","bit-integrations")}'`},disabled:e.contacts||e.users,type:"button",children:"↻"})]}),t.jsxs("div",{className:"flx mt-3 mb-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Status:","bit-integrations")}),t.jsx(j,{style:{width:"450px"},options:N(),className:"msl-wrp-options",defaultValue:s==null?void 0:s.selectedTaskStatus,onChange:a=>b(a,"selectedTaskStatus"),singleSelect:!0})]})]}),(e.accounts||e.customFields||e.contacts||e.users||e.hlTasks||e.pipelines||e.opportunities)&&t.jsx(Y,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}),Z.includes(s.selectedTask)&&t.jsx(t.Fragment,{children:t.jsx("span",{className:"action-delete-task-note",children:i("To update, you can select from the list above, or you can map fields. If not selected, ID field mapping is required.","bit-integrations")})}),s.selectedTask===c.CREATE_TASK&&t.jsx("span",{className:"action-delete-task-note",children:i('To create, you can select contact from the list above, or you can map fields. If not selected, "Contact ID" field mapping is required.',"bit-integrations")}),(s.selectedTask===c.CREATE_OPPORTUNITY||s.selectedTask===c.UPDATE_OPPORTUNITY)&&t.jsx("span",{className:"action-delete-task-note",children:i("Either a Select Contact, Email, or Phone Number is required. For Contact you can select from the list above, or you can map field (Contact ID).","bit-integrations")}),s.selectedTask===c.UPDATE_OPPORTUNITY&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("br",{}),t.jsx("span",{className:"action-delete-task-note",children:i('To update, you can select opportunity from the list above, or you can map field.  If not selected, "Opportunity ID" field mapping is required.',"bit-integrations")})]}),s.selectedTask===c.UPDATE_TASK&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"action-delete-task-note",children:i('To update, you can select contact from the list above, or you can map fields. If not selected, "Contact ID" field mapping is required.',"bit-integrations")}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("span",{className:"action-delete-task-note",children:i('You can select task from the list above, or you can map fields. If not selected, "Task ID" field mapping is required. To enable task selection, choose a contact first.',"bit-integrations")})]}),t.jsx("br",{}),t.jsxs("div",{className:"mt-4",children:[t.jsx("b",{className:"wdt-100",children:i("Map Fields","bit-integrations")}),((s==null?void 0:s.selectedTask)===c.CREATE_CONTACT||(s==null?void 0:s.selectedTask)===c.UPDATE_CONTACT)&&t.jsx("button",{onClick:()=>I(s,r,e,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh custom fields","bit-integrations")}'`},type:"button",disabled:e.customFields||e.contacts,children:"↻"})]}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:i("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:i("HighLevel Fields","bit-integrations")})})]}),(s==null?void 0:s.selectedTask)&&t.jsxs(t.Fragment,{children:[s.field_map.map((a,d)=>t.jsx(g,{i:d,field:a,highLevelConf:s,formFields:n,setHighLevelConf:r},`HighLevel-m-${d+9}`)),t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>B(s.field_map.length,s,r),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),(s.selectedTask===c.CREATE_TASK||s.selectedTask===c.UPDATE_TASK)&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("br",{}),t.jsx("span",{className:"action-delete-task-note",children:i('The "Due Date" field must be a date and time with timezone offset. e.g. 2024-10-25T10:00:00Z.',"bit-integrations")})]}),(s.selectedTask===c.CREATE_CONTACT||s.selectedTask===c.UPDATE_CONTACT||s.selectedTask===c.CREATE_OPPORTUNITY||s.selectedTask===c.UPDATE_OPPORTUNITY)&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("br",{}),t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:i("Utilities","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsx(C,{highLevelConf:s,setHighLevelConf:r,loading:e,setLoading:m})]})]})}export{it as H};
