var F=Object.defineProperty,u=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var p=(a,t,d)=>t in a?F(a,t,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[t]=d,c=(a,t)=>{for(var d in t||(t={}))I.call(t,d)&&p(a,d,t[d]);if(m)for(var d of m(t))z.call(t,d)&&p(a,d,t[d]);return a},w=(a,t)=>u(a,_(t));import{d as g,_ as l,s as y}from"./main.2.7.10.js";const R=(a,t,d,s,n,i,e,r,f)=>{let o=c({},t);switch(o[a.target.name]=a.target.value,a.target.name){case"orgId":o=P(o,s,d,n,i);break;case"department":o=$(o,s,d,n,i);break}d(c({},o))},P=(a,t,d,s,n)=>{var e,r,f,o;const i=c({},a);return i.department="",i.field_map=[{formField:"",zohoFormField:""}],i.actions={},(r=(e=i==null?void 0:i.default)==null?void 0:e.departments)!=null&&r[i.orgId]?((o=(f=i==null?void 0:i.default)==null?void 0:f.departments)==null?void 0:o[i.orgId].length)===1&&(i.field_map=h(i)):b(t,i,d,s,n),i},$=(a,t,d,s,n)=>{var e,r;const i=c({},a);return i.field_map=[{formField:"",zohoFormField:""}],i.actions={},(r=(e=i==null?void 0:i.default)==null?void 0:e.fields)!=null&&r[i.orgId]?i.field_map=h(i):D(t,i,d,s,n),i},x=(a,t,d,s,n)=>{s(!0);const i={formID:a,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};g(i,"zdesk_refresh_organizations").then(e=>{if(e&&e.success){const r=c({},t);e.data.organizations&&(r.default=w(c({},r.default),{organizations:e.data.organizations})),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),n({show:!0,msg:l("Portals refreshed","bit-integrations")}),d(c({},r))}else e&&e.data&&e.data.data||!e.success&&typeof e.data=="string"?n({show:!0,msg:`${l("Portals refresh failed Cause:","bit-integrations")}${e.data.data||e.data}. ${l("please try again","bit-integrations")}`}):n({show:!0,msg:l("Portals refresh failed. please try again","bit-integrations")});s(!1)}).catch(()=>s(!1))},b=(a,t,d,s,n)=>{s(!0);const i={formID:a,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,orgId:t.orgId};g(i,"zdesk_refresh_departments").then(e=>{var r,f;if(e&&e.success){const o=c({},t);o.default.departments||(o.default.departments={}),e.data.departments&&(o.default.departments[o.orgId]=e.data.departments),e.data.departments.length===1&&(o.department=e.data.departments[o.orgId][0].departmentName,!((f=(r=o.default)==null?void 0:r.fields)!=null&&f[o.orgId])&&D(a,o,d,s,n)),e.data.tokenDetails&&(o.tokenDetails=e.data.tokenDetails),n({show:!0,msg:l("Departments refreshed","bit-integrations")}),d(c({},o))}else e&&e.data&&e.data.data||!e.success&&typeof e.data=="string"?n({show:!0,msg:y(l("Departments refresh failed Cause: %s. please try again","bit-integrations"),e.data.data||e.data)}):n({show:!0,msg:l("Departments refresh failed. please try again","bit-integrations")});s(!1)}).catch(()=>s(!1))},D=(a,t,d,s,n)=>{s(!0);const i={formID:a,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,orgId:t.orgId};g(i,"zdesk_refresh_fields").then(e=>{if(e&&e.success){const r=c({},t);e.data.fields?(r.default.fields||(r.default.fields={}),r.default.fields[r.orgId]=c({},e.data),r.field_map=h(r),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),n({show:!0,msg:l("Fields refreshed","bit-integrations")})):n({show:!0,msg:`${l("Fields refresh failed Cause:","bit-integrations")}${e.data.data||e.data}. ${l("please try again","bit-integrations")}`}),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),d(c({},r))}else n({show:!0,msg:l("Fields refresh failed. please try again","bit-integrations")});s(!1)}).catch(()=>s(!1))},M=(a,t,d,s,n)=>{s(!0);const i={formID:a,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,orgId:t.orgId};g(i,"zdesk_refresh_owners").then(e=>{if(e&&e.success){const r=c({},t);r.default.owners||(r.default.owners={}),e.data.owners&&(r.default.owners[r.orgId]=e.data.owners),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),n({show:!0,msg:l("Owners refreshed","bit-integrations")}),d(c({},r))}else e&&e.data&&e.data.data||!e.success&&typeof e.data=="string"?n({show:!0,msg:`${l("Owners refresh failed Cause:","bit-integrations")}${e.data.data||e.data}. ${l("please try again","bit-integrations")}`}):n({show:!0,msg:l("Owners refresh failed. please try again","bit-integrations")});s(!1)}).catch(()=>s(!1))},N=(a,t,d,s,n)=>{s(!0);const i={formID:a,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,orgId:t.orgId,departmentId:t.department};g(i,"zdesk_refresh_products").then(e=>{if(e&&e.success){const r=c({},t);r.default.products||(r.default.products={}),e.data.products&&(r.default.products[r.department]=e.data.products),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),n({show:!0,msg:l("Products refreshed","bit-integrations")}),d(c({},r))}else e&&e.data&&e.data.data||!e.success&&typeof e.data=="string"?n({show:!0,msg:`${l("Products refresh failed Cause:","bit-integrations")}${e.data.data||e.data}. ${l("please try again","bit-integrations")}`}):n({show:!0,msg:l("Products refresh failed. please try again","bit-integrations")});s(!1)}).catch(()=>s(!1))},h=a=>{var t;return a.default.fields[a.orgId].required.length>0?(t=a.default.fields[a.orgId].required)==null?void 0:t.map(d=>({formField:"",zohoFormField:d})):[{formField:"",zohoFormField:""}]},v=a=>!((a!=null&&a.field_map?a.field_map.filter(d=>{var s,n,i;return!d.formField&&d.zohoFormField&&((i=(n=(s=a==null?void 0:a.default)==null?void 0:s.fields)==null?void 0:n[a.orgId])==null?void 0:i.required.indexOf(d.zohoFormField))!==-1}):[]).length>0);export{N as a,x as b,v as c,b as d,D as e,R as h,M as r};
