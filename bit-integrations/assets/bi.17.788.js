var N=Object.defineProperty;var g=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var j=(s,n,t)=>n in s?N(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t,b=(s,n)=>{for(var t in n||(n={}))F.call(n,t)&&j(s,t,n[t]);if(g)for(var t of g(n))w.call(n,t)&&j(s,t,n[t]);return s};import{f as k,j as e}from"./main-174.js";import{d as y,_ as l}from"./bi.964.0.js";import{g as M,a as $}from"./bi.477.787.js";import{a as f,h as S}from"./bi.48.3.js";import{T}from"./bi.54.773.js";import{b as p}from"./bi.755.11.js";import{a9 as Y}from"./bi.89.470.js";const _=(s,n,t)=>{const i=b({},n);i.field_map.splice(s,0,{}),t(b({},i))},D=(s,n,t)=>{const i=b({},n);i.field_map.length>1&&i.field_map.splice(s,1),t(b({},i))},v=(s,n,t,i)=>{const r=b({},t);r.field_map[n][s.target.name]=s.target.value,s.target.value==="custom"&&(r.field_map[n].customValue=""),i(b({},r))};function V({i:s,formFields:n,field:t,rapidmailConf:i,setRapidmailConf:r}){var u,x;if(((u=i==null?void 0:i.field_map)==null?void 0:u.length)===1&&t.rapidmailFormField===""){const c=b({},i),h=M(c);c.field_map=h,r(c)}const a=(i==null?void 0:i.recipientsFields.filter(c=>c.required===!0))||[],m=(i==null?void 0:i.recipientsFields.filter(c=>c.required===!1))||[],o=k(y),{isPro:d}=o;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:c=>v(c,s,i,r),children:[e.jsx("option",{value:"",children:l("Select Field","bit-integrations")}),e.jsx("optgroup",{label:l("Form Fields","bit-integrations"),children:n==null?void 0:n.map(c=>e.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`))}),e.jsx("option",{value:"custom",children:l("Custom...","bit-integrations")}),e.jsx("optgroup",{label:sprintf(l("General Smart Codes %s","bit-integrations"),d?"":`(${l("Pro","bit-integrations")})`),children:d&&((x=f)==null?void 0:x.map(c=>e.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`)))})]}),t.formField==="custom"&&e.jsx(T,{onChange:c=>S(c,s,i,r),label:l("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:l("Custom Value","bit-integrations"),formFields:n}),e.jsxs("select",{className:"btcd-paper-inp",disabled:s<a.length,name:"rapidmailFormField",value:s<a?a[s].label||"":t.rapidmailFormField||"",onChange:c=>v(c,s,i,r),children:[e.jsx("option",{value:"",children:l("Select Field","bit-integrations")}),s<a.length?e.jsx("option",{value:a[s].key,children:a[s].label},a[s].key):m.map(({key:c,label:h})=>e.jsx("option",{value:c,children:h},c))]})]}),s>=a.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>_(s,i,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>D(s,i,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function q({rapidmailConf:s,setRapidmailConf:n}){var i,r;const t=(a,m)=>{const o=b({},s);m==="send_activationmail"&&(a.target.checked?o.actions.send_activationmail=!0:delete o.actions.send_activationmail),m==="force_subscribe"&&(a.target.checked?o.actions.force_subscribe=!0:delete o.actions.force_subscribe),n(b({},o))};return e.jsxs("div",{className:"pos-rel d-flx w-8",children:[e.jsx(p,{checked:((i=s.actions)==null?void 0:i.send_activationmail)||!1,onChange:a=>t(a,"send_activationmail"),className:"wdt-200 mt-4 mr-2",value:"user_share",title:l("Double Opt-in","bit-integrations"),subTitle:l("Add Double Opt-in","bit-integrations")}),e.jsx(p,{checked:((r=s.actions)==null?void 0:r.force_subscribe)||!1,onChange:a=>t(a,"force_subscribe"),className:"wdt-200 mt-4 mr-2",value:"force_subscribe",title:l("Force Subscribe","bit-integrations"),subTitle:l("Subscribe without confirmation (status: active)","bit-integrations")})]})}function L({formFields:s,handleInput:n,rapidmailConf:t,setRapidmailConf:i,isLoading:r,setIsLoading:a,setSnackbar:m}){var o;return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:l("Recipient:","bit-integrations")}),e.jsxs("select",{onChange:n,name:"recipient_id",value:t.recipient_id,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:l("Select Recipients","bit-integrations")}),((o=t==null?void 0:t.default)==null?void 0:o.recipientlists)&&t.default.recipientlists.map(({id:d,name:u})=>e.jsx("option",{value:d,children:u},d))]}),e.jsx("button",{onClick:()=>$(t,i,a),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Fetch All Recipients","bit-integrations")}'`},type:"button",disabled:r,children:"â†»"}),e.jsx("br",{}),e.jsx("div",{className:"mt-5",children:e.jsx("b",{className:"wdt-100",children:l("Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Rapidmail Fields","bit-integrations")})})]}),(t==null?void 0:t.recipient_id)&&(t==null?void 0:t.field_map.map((d,u)=>e.jsx(V,{i:u,field:d,rapidmailConf:t,formFields:s,setRapidmailConf:i,setSnackbar:m},`rp-m-${u+9}`))),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>_(t.field_map.length,t,i),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx(Y,{note:A}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:l("Utilities","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(q,{rapidmailConf:t,setRapidmailConf:i})]})}const A=`
    <h4>${l("To ensure compatibility during data imports, use the following date formats:","bit-integrations")}</h4>
    <ul>
      <li>${l("<b>Preferred format:</b> YYYY-MM-DD (ISO 8601, e.g., 2025-12-31) for the highest compatibility.","bit-integrations")}</li>
      <li>${l("<b>Time data:</b> If including time, use YYYY-MM-DD HH:mm (e.g., 2025-12-31 14:30).","bit-integrations")}</li>
  </ul>
  `;export{L as R};
