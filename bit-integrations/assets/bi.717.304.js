var O=Object.defineProperty,$=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var T=(n,t,s)=>t in n?O(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,y=(n,t)=>{for(var s in t||(t={}))H.call(t,s)&&T(n,s,t[s]);if(z)for(var s of z(t))M.call(t,s)&&T(n,s,t[s]);return n},E=(n,t)=>$(n,q(t));var _=(n,t,s)=>new Promise((x,g)=>{var c=r=>{try{l(s.next(r))}catch(h){g(h)}},m=r=>{try{l(s.throw(r))}catch(h){g(h)}},l=r=>r.done?x(r.value):Promise.resolve(r.value).then(c,m);l((s=s.apply(n,t)).next())});import{r as d,f as U,e as V,j as e,L as W,u as J,o as K}from"./main-159.js";import{a2 as G,z as L}from"./bi.939.446.js";import{B as P}from"./bi.258.767.js";import{d as Q,a as X,_ as a,c as Y}from"./bi.698.0.js";import{S as Z}from"./bi.581.13.js";import{S as ee}from"./bi.64.986.js";import{I as te,s as se}from"./bi.707.3.js";import{a as ie,t as ae,r as ne,G as re,h as oe,c as le}from"./bi.277.752.js";import{T as R,t as ce}from"./bi.937.773.js";import"./bi.348.753.js";import"./bi.899.9.js";import"./bi.297.11.js";import"./bi.126.14.js";import"./bi.247.754.js";import"./bi.732.730.js";import"./bi.652.731.js";function de({formID:n,sheetConf:t,setSheetConf:s,step:x,setstep:g,isLoading:c,setIsLoading:m,setSnackbar:l,redirectLocation:r,isEdit:h}){const[f,u]=d.useState(!1),[i,p]=d.useState({clientId:"",clientSecret:""}),v=U(Q),{googleSheet:o}=ce,[k,I]=d.useState([]),[N,D]=V(X),[j,me]=d.useState("Custom Authorization"),C=b=>{ie(t,b,p,m)},B=b=>_(this,null,function*(){yield ae(b,t,s,u,j,k,I,m,l),D(void 0)});d.useEffect(()=>{!N||Object.keys(N).length===0||B(N)},[N]);const A=b=>{const S=y({},t),w=y({},i);w[b.target.name]="",S[b.target.name]=b.target.value,p(w),s(S)},F=()=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),g(2),ne(n,t,s,m,l)};return e.jsxs("div",{className:"btcd-stp-page",style:{width:x===1&&900,height:x===1&&"auto"},children:[(o==null?void 0:o.youTubeLink)&&e.jsx(R,{title:"Google Sheets",youTubeLink:o==null?void 0:o.youTubeLink}),(o==null?void 0:o.docLink)&&e.jsx(R,{title:"Google Sheets",docLink:o==null?void 0:o.docLink}),j==="Custom Authorization"&&e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:A,name:"name",value:t.name,type:"text",placeholder:a("Integration Name...","bit-integrations")}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Homepage URL:","bit-integrations")})}),e.jsx(G,{value:`${window.location.origin}`,className:"field-key-cpy w-6 ml-0",setSnackbar:l}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Authorized Redirect URIs:","bit-integrations")})}),e.jsx(G,{value:r||`${v.api.base}/redirect`,className:"field-key-cpy w-6 ml-0",setSnackbar:l}),e.jsxs("small",{className:"d-blk mt-5",children:[a("To get Client ID and SECRET , Please Visit","bit-integrations")," ",e.jsx("a",{className:"btcd-link",href:"https://console.developers.google.com/apis/credentials",target:"_blank",rel:"noreferrer",children:a("Google API Console","bit-integrations")})]}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Client id:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:A,name:"clientId",value:t.clientId,type:"text",placeholder:a("Client id...","bit-integrations")}),e.jsx("div",{style:{color:"red",fontSize:"15px"},children:i.clientId}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Client secret:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:A,name:"clientSecret",value:t.clientSecret,type:"text",placeholder:a("Client secret...","bit-integrations")}),e.jsx("div",{style:{color:"red",fontSize:"15px"},children:i.clientSecret}),e.jsxs("button",{onClick:()=>C(j),className:"btn btcd-btn-lg purple sh-sm flx",type:"button",disabled:c,children:[f?a("Authorized ✔","bit-integrations"):a("Authorize","bit-integrations"),c&&e.jsx(L,{size:20,clr:"#022217",className:"ml-2"})]}),e.jsx("br",{})]}),c&&j!=="Custom Authorization"&&e.jsx(W,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),f&&j==="One Click Authorization"&&e.jsxs("button",{onClick:()=>C(),className:"btn btcd-btn-lg purple sh-sm flx",type:"button",disabled:c,children:[f?a("Authorized ✔","bit-integrations"):a("Authorize","bit-integrations"),c&&e.jsx(L,{size:20,clr:"#022217",className:"ml-2"})]}),e.jsx("br",{}),e.jsxs("button",{onClick:()=>F(),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",disabled:!f,children:[a("Next","bit-integrations"),e.jsx(P,{className:"ml-1 rev-icn"})]})]})}function ze({formFields:n,setFlow:t,flow:s,allIntegURL:x}){const g=J(),{formID:c}=K(),[m,l]=d.useState(!1),[r,h]=d.useState(1),[f,u]=d.useState({show:!1}),[i,p]=d.useState({name:"Google Sheet",type:"Google Sheet",clientId:"",clientSecret:"",spreadsheetId:"",worksheetName:"",field_map:[{formField:"",googleSheetField:""}],header:"ROWS",headerRow:"A1",actions:{}});d.useEffect(()=>{i.oneClickAuthCredentials===void 0&&Y(null,"get/credentials",{actionName:"googleSheet"},"Get").then(k=>{p(I=>E(y({},I),{oneClickAuthCredentials:k.data}))})},[]);const v=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!le(i)){u({show:!0,msg:a("Please map fields to continue.","bit-integrations")});return}i.spreadsheetId!==""&&i.worksheetName!==""&&i.field_map.length>0&&h(3)};return e.jsxs("div",{children:[e.jsx(Z,{snack:f,setSnackbar:u}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(ee,{step:3,active:r})}),e.jsx(de,{formID:c,sheetConf:i,setSheetConf:p,step:r,setstep:h,setSnackbar:u,isLoading:m,setIsLoading:l}),e.jsxs("div",{className:"btcd-stp-page",style:{width:r===2&&900,height:r===2&&"auto"},children:[e.jsx(re,{formID:c,formFields:n,handleInput:o=>oe(o,i,p,c,l,u),sheetConf:i,setSheetConf:p,isLoading:m,setIsLoading:l,setSnackbar:u}),e.jsxs("button",{onClick:()=>v(),disabled:!i.spreadsheetId||!i.worksheetName||i.field_map.length<1,className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[a("Next","bit-integrations"),e.jsx(P,{className:"ml-1 rev-icn"})]})]}),e.jsx(te,{step:r,saveConfig:()=>se({flow:s,setFlow:t,allIntegURL:x,conf:i,navigate:g,setIsLoading:l,setSnackbar:u}),isLoading:m,dataConf:i,setDataConf:p,formFields:n})]})}export{ze as default};
