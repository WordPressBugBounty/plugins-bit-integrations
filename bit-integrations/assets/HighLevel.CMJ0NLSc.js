import{k as v,g as x,j as t,_ as A,z as s}from"./main.2.7.9.js";import{u as I,h as E,d as r}from"./react-router-dom.BLIKw1eE.js";import"./Note.B1QjZ60t.js";import{B as L}from"./BackIcn.83O8CzQ9.js";import{S as b}from"./Steps.C1SEpuXL.js";import{I as j,g as C}from"./Integrations.CEc3UakZ.js";import N from"./HighLevelAuthorization.DTOA_20E.js";import{O,c as o,T as a}from"./HighLevelCommonFunc.BR7W7F2M.js";import{H as R}from"./HighLevelIntegLayout.BbA9IBWT.js";import"./CopyIcn.Bz4pX3qF.js";import"./SnackMsg.DxKqsuNG.js";import"./Table.Bhs4KlDc.js";import"./index.rAvPDjud.js";import"./tutorialLinks.C1WWujPT.js";import"./TutorialLink.DotDhwIX.js";import"./ProUtilHelpers.HxY5rljX.js";import"./TagifyInput.BafnMlYq.js";import"./tagify.YxUZd8Ix.js";function Z({formFields:c,setFlow:f,flow:u,allIntegURL:T}){const g=v(x),{isPro:k}=g,P=I(),{formID:n}=E(),[h,S]=r.useState(!1),[i,d]=r.useState(1),[p,m]=r.useState({auth:!1,customFields:!1,options:!1,contacts:!1,users:!1,hlTasks:!1,pipelines:!1,opportunities:!1}),[e,l]=r.useState({name:"GoHighLevel",type:"GoHighLevel",api_key:"",field_map:[{formField:"",highLevelField:""}],actions:{},tags:[],version:k?"v2":"v1",highLevelFields:[],selectedTags:"",selectedTask:"",contacts:[],selectedContact:"",selectedTaskStatus:"",users:[],selectedUser:"",hlTasks:[],updateTaskId:"",pipelines:[],selectedPipeline:"",stages:[],currentStages:[],selectedStage:"",opportunities:[],selectedOpportunity:""}),_=U=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300);{if(!O.includes(e.selectedTask)&&!o(e)){s.error("Please map all required fields to continue!");return}if(!(e!=null&&e.selectedTask)){s.error("Please select task to continue!");return}if(e.selectedTask===a.UPDATE_CONTACT&&!e.selectedContact&&!o(e)){s.error("Please select a contact or map fields!");return}if((e.selectedTask===a.CREATE_TASK||e.selectedTask===a.UPDATE_TASK)&&!e.selectedContact&&!o(e)){s.error("Please select a contact or map fields!");return}if(e.selectedTask===a.UPDATE_TASK&&!e.updateTaskId&&!o(e)){s.error("Please select a task or map fields!");return}if(e.selectedTask===a.CREATE_OPPORTUNITY||e.selectedTask===a.UPDATE_OPPORTUNITY){if(!e.selectedPipeline){s.error("Please select a pipeline!");return}if(!e.selectedStage){s.error("Please select a stage!");return}if(!e.selectedTaskStatus){s.error("Please select a status!");return}}e.name!==""&&e.field_map.length>0&&d(3)}};return t.jsxs("div",{children:[t.jsx("div",{className:"txt-center mt-2",children:t.jsx(b,{step:3,active:i})}),t.jsx(N,{formID:n,highLevelConf:e,setHighLevelConf:l,step:i,setstep:d,loading:p,setLoading:m}),t.jsxs("div",{className:"btcd-stp-page",style:{width:i===2&&900,height:i===2&&"auto"},children:[t.jsx(R,{formID:n,formFields:c,highLevelConf:e,setHighLevelConf:l,loading:p,setLoading:m}),t.jsxs("button",{onClick:()=>_(),disabled:!(e!=null&&e.selectedTask),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[A("Next","bit-integrations")," Â ",t.jsx(L,{className:"ml-1 rev-icn"})]})]}),t.jsx(j,{step:i,saveConfig:()=>C(u,f,T,e,P,"","",S),isLoading:h,dataConf:e,setDataConf:l,formFields:c})]})}export{Z as default};
