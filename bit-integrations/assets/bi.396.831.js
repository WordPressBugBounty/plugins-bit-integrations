var _=Object.defineProperty;var S=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var y=(i,t,r)=>t in i?_(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,f=(i,t)=>{for(var r in t||(t={}))D.call(t,r)&&y(i,r,t[r]);if(S)for(var r of S(t))P.call(t,r)&&y(i,r,t[r]);return i};import{_ as c,c as g,V as p}from"./bi.66.0.js";import{u as m}from"./bi.725.443.js";const q=(i,t,r,n,d,l,o,e,s)=>{const a=f({},t);if(o){const u=f({},e);u[i.target.name]="",s(f({},u))}a[i.target.name]=i.target.value,r(f({},a))},O=(i,t,r,n,d)=>{n(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=g(l,"selesforce_campaign_list").then(e=>e&&e.success?(r(s=>{var u;const a=f({},s);return a.default||(a.default={}),(u=a.default)!=null&&u.campaignLists||(a.default.campaignLists={}),e.data.allCampaignLists&&(a.default.campaignLists=e.data.allCampaignLists),e.data.tokenDetails&&(a.tokenDetails=e.data.tokenDetails),a}),n(!1),c("Campaign list refreshed","bit-integrations")):(n(!1),c("Campaign list refresh failed. please try again","bit-integrations")));p.promise(o,{success:e=>e,error:c("Error Occurred","bit-integrations"),loading:c("Loading Campaign list...")})},I=(i,t,r,n,d)=>{n(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=g(l,"selesforce_case_origin").then(e=>e&&e.success?(r(s=>m(s,a=>{a.caseOrigins=e.data})),n(!1),c("Case Origin refreshed","bit-integrations")):(n(!1),c("Case Origin refresh failed. please try again","bit-integrations")));p.promise(o,{success:e=>e,error:c("Error Occurred","bit-integrations"),loading:c("Loading Case Origin...")})},E=(i,t,r,n,d)=>{n(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=g(l,"selesforce_case_type").then(e=>e&&e.success?(r(s=>m(s,a=>{a.caseTypes=e.data})),n(!1),c("Type refreshed","bit-integrations")):(n(!1),c("Type refresh failed. please try again","bit-integrations")));p.promise(o,{success:e=>e,error:c("Error Occurred","bit-integrations"),loading:c("Loading type...")})},$=(i,t,r,n,d)=>{n(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=g(l,"selesforce_case_reason").then(e=>e&&e.success?(r(s=>m(s,a=>{a.caseReasons=e.data})),n(!1),c("Reason refreshed","bit-integrations")):(n(!1),c("Reason refresh failed. please try again","bit-integrations")));p.promise(o,{success:e=>e,error:c("Error Occurred","bit-integrations"),loading:c("Loading Reason...")})},v=(i,t,r,n,d)=>{n(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=g(l,"selesforce_case_status").then(e=>e&&e.success?(r(s=>m(s,a=>{a.caseStatus=e.data})),n(!1),c("Status refreshed","bit-integrations")):(n(!1),c("Status refresh failed. please try again","bit-integrations")));p.promise(o,{success:e=>e,error:c("Error Occurred","bit-integrations"),loading:c("Loading Status...")})},V=(i,t,r,n,d)=>{n(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=g(l,"selesforce_case_priority").then(e=>e&&e.success?(r(s=>m(s,a=>{a.casePriority=e.data})),n(!1),c("Priority refreshed","bit-integrations")):(n(!1),c("Priority refresh failed. please try again","bit-integrations")));p.promise(o,{success:e=>e,error:c("Error Occurred","bit-integrations"),loading:c("Loading Priority...")})},z=(i,t,r,n,d)=>{n(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=g(l,"selesforce_case_potential_liability").then(e=>e&&e.success?(r(s=>m(s,a=>{a.casePotentialLiability=e.data})),n(!1),c("Potential Liability refreshed","bit-integrations")):(n(!1),c("Potential Liability refresh failed. please try again","bit-integrations")));p.promise(o,{success:e=>e,error:c("Error Occurred","bit-integrations"),loading:c("Loading Potential Liability...")})},M=(i,t,r,n,d)=>{n(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=g(l,"selesforce_case_sla_violation").then(e=>e&&e.success?(r(s=>m(s,a=>{a.caseSLAViolation=e.data})),n(!1),c("SLA Violation refreshed","bit-integrations")):(n(!1),c("SLA Violation refresh failed. please try again","bit-integrations")));p.promise(o,{success:e=>e,error:c("Error Occurred","bit-integrations"),loading:c("Loading SLA Violation...")})},T=(i,t,r,n,d)=>{n(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};g(l,"selesforce_lead_list").then(o=>o&&o.success?(r(e=>{var a;const s=f({},e);return s.default||(s.default={}),(a=s.default)!=null&&a.leadLists||(s.default.leadLists={}),o.data.leadLists&&(s.default.leadLists=o.data.leadLists),o.data.tokenDetails&&(s.tokenDetails=o.data.tokenDetails),s}),n(!1),c("Lead list refreshed","bit-integrations")):(n(!1),c("Lead list refresh failed. please try again","bit-integrations"))).catch(()=>n(!1))},U=(i,t,r,n,d)=>{n(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=g(l,"selesforce_contact_list").then(e=>e&&e.success?(r(s=>{var u;const a=f({},s);return a.default||(a.default={}),(u=a.default)!=null&&u.contactLists||(a.default.contactLists={}),e.data.contactLists&&(a.default.contactLists=e.data.contactLists),e.data.tokenDetails&&(a.tokenDetails=e.data.tokenDetails),a}),n(!1),c("Contact list refresh successfully.","bit-integrations")):(n(!1),c("Contact list refresh failed. please try again","bit-integrations")));p.promise(o,{success:e=>e,error:c("Error Occurred","bit-integrations"),loading:c("Loading Contact list...")})},j=(i,t,r,n,d,l)=>{d(!0);const o={formID:i,actionName:t,clientId:r.clientId,clientSecret:r.clientSecret,tokenDetails:r.tokenDetails},e=g(o,"selesforce_custom_field").then(s=>{var u,b;if(!(s!=null&&s.success))return(u=s==null?void 0:s.data[0])!=null&&u.message?"Custom field: "+((b=s==null?void 0:s.data[0])==null?void 0:b.message):"Custom field refresh failed. please try again";const a=s&&s.success?s==null?void 0:s.data:[];return n(h=>{const k=h;return k.selesforceFields=a,k.field_map=A(k),k}),d(!1),"Custom field refresh successfully."});p.promise(e,{success:s=>s,error:c("Error Occurred","bit-integrations"),loading:c(`Loading ${t} list...`)})},x=(i,t,r,n)=>{const d={clientId:i.clientId,clientSecret:i.clientSecret,tokenDetails:i.tokenDetails};r(!0),g(d,"selesforce_custom_action").then(l=>{var o,e;r(!1),t(s=>m(s,a=>{l.success&&(a.selesforceActionModules=[...a.action_modules,...l==null?void 0:l.data])})),p.success(l&&l.success?"Custom Action refresh successfully.":(o=l==null?void 0:l.data[0])!=null&&o.message?"Custom Action: "+((e=l==null?void 0:l.data[0])==null?void 0:e.message):"Custom Action refresh failed. please try again")})},H=(i,t,r,n,d)=>{n(!0);const l={formID:i,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},o=g(l,"selesforce_account_list").then(e=>e&&e.success?(r(s=>{var u;const a=f({},s);return a.default||(a.default={}),(u=a.default)!=null&&u.accountLists||(a.default.accountLists={}),e.data.accountLists&&(a.default.accountLists=e.data.accountLists),e.data.tokenDetails&&(a.tokenDetails=e.data.tokenDetails),a}),n(!1),c("Account list refreshed","bit-integrations")):(n(!1),c("Account list refresh failed. please try again","bit-integrations")));p.promise(o,{success:e=>e,error:c("Error Occurred","bit-integrations"),loading:c("Loading Account list...")})},J=i=>!((i!=null&&i.field_map?i.field_map.filter(r=>!r.formField||!r.selesforceField||!r.formField==="custom"&&!r.customValue):[]).length>0),A=(i,t)=>{const r=(i==null?void 0:i.selesforceFields)||[],n=(i==null?void 0:i.field_map)||[],d=n.reduce((o,e)=>{var a;const s=(a=e.selesforceField)!=null?a:e.selesforceField;return s&&o.push(s),o},[]),l=r.filter(o=>o.required===!0&&!d.includes(o.key));if(l.length>0){const o=l.map(e=>({formField:"",selesforceField:e.key}));n.push(...o)}else n.length===0&&n.push({formField:"",selesforceField:""});return n},K=(i,t,r,n,d,l)=>{if(!i.clientId||!i.clientSecret){r({clientId:i.clientId?"":c("Client Id can't be empty","bit-integrations"),clientSecret:i.clientSecret?"":c("Secret key can't be empty","bit-integrations")});return}d(!0);const o=`https://login.salesforce.com/services/oauth2/authorize?response_type=code&client_id=${i.clientId}&prompt=login%20consent&redirect_uri=${encodeURIComponent(window.location.href)}/redirect`,e=window.open(o,"salesforce","width=400,height=609,toolbar=off"),s=setInterval(()=>{if(e.closed){clearInterval(s);let a={},u=!1;const b=localStorage.getItem("__salesforce");if(b&&(u=!0,a=JSON.parse(b),localStorage.removeItem("__salesforce")),!a.code||a.error||!a||!u){const h=a.error?`Cause: ${a.error}`:"";l({show:!0,msg:`${c("Authorization Failed","bit-integrations")} ${h}. ${c("please try again","bit-integrations")}`}),d(!1)}else{const h=f({},i);h.accountServer=a["accounts-server"],R(a,h,t,n,d,l)}}},500)},R=(i,t,r,n,d,l)=>{const o=f({},i);o.clientId=t.clientId,o.clientSecret=t.clientSecret,o.redirectURI=`${encodeURIComponent(window.location.href)}/redirect`,g(o,"selesforce_generate_token").then(e=>{if(e&&e.success){const s=f({},t);s.tokenDetails=e.data,r(s),n(!0),l({show:!0,msg:c("Authorized Successfully","bit-integrations")})}else e&&e.data&&e.data.data||!e.success&&typeof e.data=="string"?l({show:!0,msg:`${c("Authorization failed Cause:","bit-integrations")}${e.data.data||e.data}. ${c("please try again","bit-integrations")}`}):l({show:!0,msg:c("Authorization failed. please try again","bit-integrations")});d(!1)})};export{O as a,H as b,J as c,U as d,v as e,I as f,x as g,q as h,V as i,z as j,M as k,E as l,$ as m,T as n,j as o,K as p};
