var k=Object.defineProperty;var N=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;var y=(i,n,t)=>n in i?k(i,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[n]=t,j=(i,n)=>{for(var t in n||(n={}))_.call(n,t)&&y(i,t,n[t]);if(N)for(var t of N(n))f.call(n,t)&&y(i,t,n[t]);return i};import{j as e,_ as l,k as w,g as S,L as I}from"./main.2.7.10.js";import{a as L,h as A,b as T}from"./Integrations.BO4oRqVq.js";import{d as q}from"./react-router-dom.BLIKw1eE.js";import{b as M,T as O}from"./Table.DVLhKUbN.js";import{f as R,r as V}from"./AcumbamailCommonFunc.2t2GfYF8.js";import{T as D}from"./TagifyInput.CA5KNd78.js";import{a as $,b as E,c as P}from"./MailChimpIntegrationHelpers.D6dD8hCL.js";function z({acumbamailConf:i,setAcumbamailConf:n,formFields:t}){var x;const[r,a]=q.useState(!1),p=(o,h)=>{const d=j({},i);o.target.checked?d.actions.double_optin=!0:delete d.actions.double_optin,n(j({},d))};return e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(M,{checked:((x=i.actions)==null?void 0:x.double_optin)||!1,onChange:o=>p(o),className:"wdt-200 mt-4 mr-2",value:"double_optin",title:l("Double Opt-in","bit-integrations"),subTitle:l("Double Opt-In for confirm subscription.","bit-integrations")})})}function B({i,formFields:n,field:t,acumbamailConf:r,setAcumbamailConf:a}){var c,m,u,g,F,v;const p=w(S),{isPro:x}=p,o=(c=r.default.allFields[r.listId].required)==null?void 0:c.includes(t.acumbamailFormField),h=Object.entries((u=(m=r.default.allFields)==null?void 0:m[r.listId])==null?void 0:u.fields).filter(s=>s[1].required===!0)||[],d=Object.entries((F=(g=r.default.allFields)==null?void 0:g[r.listId])==null?void 0:F.fields).filter(s=>s[1].required===!1)||[];return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:s=>$(s,i,r,a),children:[e.jsx("option",{value:"",children:l("Select Field","bit-integrations")}),e.jsx("optgroup",{label:l("Form Fields","bit-integrations"),children:n.map(s=>s.type!=="file"&&e.jsx("option",{value:s.name,children:s.label},`ff-zhcrm-${s.name}`))}),e.jsx("option",{value:"custom",children:l("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`${l("General Smart Codes","bit-integrations")} ${x?"":`(${l("Pro","bit-integrations")})`}`,children:x&&((v=L)==null?void 0:v.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`)))})]}),t.formField==="custom"&&e.jsx(D,{onChange:s=>A(s,i,r,a),label:l("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:l("Custom Value","bit-integrations"),formFields:n}),e.jsxs("select",{className:"btcd-paper-inp",name:"acumbamailFormField",disabled:i<1,value:t.acumbamailFormField||"",onChange:s=>$(s,i,r,a),children:[e.jsx("option",{value:"",children:l("Select Field","bit-integrations")}),o&&h.map((s,b)=>e.jsx("option",{value:s[1].key,children:s[1].label},`mchimp-${b*2}`)),!o&&d.map((s,b)=>e.jsx("option",{value:s[1].key,children:s[1].label},`mchimp-${b*2}`))]})]}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>E(i,r,a),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>P(i,r,a),className:"icn-btn sh-sm",type:"button","aria-label":"btn",children:e.jsx(O,{})})]})]})}function Y({formFields:i,handleInput:n,acumbamailConf:t,setAcumbamailConf:r,isLoading:a,setIsLoading:p,setSnackbar:x}){var o,h;return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:l("Actions:","bit-integrations")}),e.jsxs("select",{onChange:n,name:"mainAction",value:t.mainAction,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:l("Select Actions","bit-integrations")}),t.allActions&&t.allActions.map(({key:d,label:c})=>e.jsx("option",{value:d,children:c},d))]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:l("All List:","bit-integrations")}),e.jsxs("select",{onChange:n,name:"listId",value:t.listId,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:l("Select List","bit-integrations")}),((o=t==null?void 0:t.default)==null?void 0:o.allLists)&&Object.entries(t.default.allLists).map(d=>e.jsx("option",{value:d[0],children:d[1].name},d[0]))]}),e.jsx("button",{onClick:()=>R(t,r,p),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Fetch Subscriber List","bit-integrations")}'`},type:"button",disabled:a,children:"↻"}),e.jsx("br",{}),a&&e.jsx(I,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:l("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>V(null,t,r,p),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Refresh Acumbamail Fields","bit-integrations")}'`},type:"button",disabled:a,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Acumbamail Fields","bit-integrations")})})]}),((h=t.default)==null?void 0:h.allFields)&&e.jsxs(e.Fragment,{children:[t.field_map.map((d,c)=>e.jsx(B,{i:c,field:d,acumbamailConf:t,formFields:i,setAcumbamailConf:r},`sheet-m-${c+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>T(t.field_map.length,t,r),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:l("Utilities","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(z,{acumbamailConf:t,setAcumbamailConf:r,formFields:i})]})}export{Y as A};
