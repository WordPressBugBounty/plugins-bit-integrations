var pe=Object.defineProperty;var se=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var ie=(t,r,u)=>r in t?pe(t,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[r]=u,M=(t,r)=>{for(var u in r||(r={}))ge.call(r,u)&&ie(t,u,r[u]);if(se)for(var u of se(r))je.call(r,u)&&ie(t,u,r[u]);return t};import{A as te,j as e,_ as a,L as X,M as me,k as be,g as we,s as ve,C as Ne}from"./main.2.7.8.js";import{a as ye,c as le,h as Fe,b as I,d as _e,T as Re,e as ae,P as de}from"./Integrations.DsKoVZo5.js";import{d as H}from"./react-router-dom.BLIKw1eE.js";import{x as ne}from"./Note.CbpnsFnB.js";import{b as O,d as re}from"./Table.PPpIxK2a.js";import{a as D}from"./CopyIcn.CrDMgwxJ.js";import{C}from"./CheckBox.DmD2kLoZ.js";import{T as Me}from"./TitleModal.Dy5dXzhn.js";import{r as oe,a as ke,b as ce,d as ue,e as he,f as Te,g as Oe}from"./ZohoCRMCommonFunc.J8VFc3iH.js";import{T as $e}from"./TagifyInput.AWOXl6wg.js";function xe({crmConf:t,setCrmConf:r,formFields:u,tab:l,formID:d,setSnackbar:i}){var $,U,Z,z,L,P,q,S,V,f,B,E,o,J,K,Q,w;const[p,_]=H.useState(!1),[x,h]=H.useState(!1),[m,v]=H.useState({show:!1,action:()=>{}});te.isPro;const b=(s,c)=>{var k,F;const n=M({},t);if(l===0){if(c==="attachment"&&(s!==""?n.actions.attachment=s:delete n.actions.attachment),c==="approval"&&(s.target.checked?n.actions.approval=!0:delete n.actions.approval),c==="workflow"&&(s.target.checked?n.actions.workflow=!0:delete n.actions.workflow),c==="blueprint"&&(s.target.checked?n.actions.blueprint=!0:delete n.actions.blueprint),c==="gclid"&&(s.target.checked?n.actions.gclid=!0:delete n.actions.gclid),c==="assignment_rules"&&(s!==""?n.actions.assignment_rules=s:delete n.actions.assignment_rules),c==="tag_rec"&&(s!==""?n.actions.tag_rec=s:delete n.actions.tag_rec),c==="rec_owner"&&(s!==""?n.actions.rec_owner=s:delete n.actions.rec_owner),c==="upsert")if(s.target.checked){const G=(k=n.default.layouts[n.module][n.layout].unique)==null?void 0:k.map((W,Y)=>({i:Y,name:W}));n.actions.upsert={overwrite:!0,crmField:G}}else delete n.actions.upsert}else if(c==="attachment"&&(s!==""?n.relatedlists[l-1].actions.attachment=s:delete n.relatedlists[l-1].actions.attachment),c==="approval"&&(s.target.checked?n.relatedlists[l-1].actions.approval=!0:delete n.relatedlists[l-1].actions.approval),c==="workflow"&&(s.target.checked?n.relatedlists[l-1].actions.workflow=!0:delete n.relatedlists[l-1].actions.workflow),c==="blueprint"&&(s.target.checked?n.relatedlists[l-1].actions.blueprint=!0:delete n.relatedlists[l-1].actions.blueprint),c==="gclid"&&(s.target.checked?n.relatedlists[l-1].actions.gclid=!0:delete n.relatedlists[l-1].actions.gclid),c==="assignment_rules"&&(s!==""?n.relatedlists[l-1].actions.assignment_rules=s:delete n.relatedlists[l-1].actions.assignment_rules),c==="tag_rec"&&(s!==""?n.relatedlists[l-1].actions.tag_rec=s:delete n.relatedlists[l-1].actions.tag_rec),c==="rec_owner"&&(s!==""?n.relatedlists[l-1].actions.rec_owner=s:delete n.relatedlists[l-1].actions.rec_owner),c==="upsert")if(s.target.checked){const G=(F=n.default.layouts[n.relatedlists[l-1].module][n.relatedlists[l-1].layout].unique)==null?void 0:F.map((W,Y)=>({i:Y,name:W}));n.relatedlists[l-1].actions.upsert={overwrite:!0,crmField:G}}else delete n.relatedlists[l-1].actions.upsert;r(M({},n))},g=()=>{v({show:!1})},j=l===0?t.module:t.relatedlists[l-1].module,T=()=>{var c,n;const s=[{title:a("Zoho CRM Tags","bit-integrations"),type:"group",childs:[]},{title:a("Form Fields","bit-integrations"),type:"group",childs:[]}];return(c=t.default.tags)!=null&&c[j]&&(s[0].childs=Object.values((n=t.default.tags)==null?void 0:n[j]).map(k=>({label:k,value:k}))),s[1].childs=u.map(k=>({label:k.label,value:`\${${k.name}}`})),s},N=(s,c)=>{const n=M({},t);l===0?(c==="list"&&(n.actions.upsert.crmField=s),c==="overwrite"&&(n.actions.upsert.overwrite=s)):(c==="list"&&(n.relatedlists[l-1].actions.upsert.crmField=s),c==="overwrite"&&(n.relatedlists[l-1].actions.upsert.overwrite=s)),r(M({},n))},y=()=>{var s;(s=t.default)!=null&&s.crmOwner||ce(d,t,r,h,i),v({show:"rec_owner"})},R=()=>{var s,c;(c=(s=t==null?void 0:t.default)==null?void 0:s.assignmentRules)!=null&&c[j]||oe(l,t,r,h,i),v({show:"assignment_rules"})},A=()=>{var s,c,n,k;if(l&&!((s=t.relatedlists[l-1].actions.upsert)!=null&&s.crmField)){const F=M({},t),G=(c=F.default.layouts[F.relatedlists[l-1].module][F.relatedlists[l-1].layout].unique)==null?void 0:c.map((W,Y)=>({i:Y,name:W}));F.relatedlists[l-1].actions.upsert={overwrite:!0,crmField:G},r(F)}else if(!((n=t.actions.upsert)!=null&&n.crmField)){const F=M({},t),G=(k=F.default.layouts[F.module][F.layout].unique)==null?void 0:k.map((W,Y)=>({i:Y,name:W}));F.actions.upsert={overwrite:!0,crmField:G},r(M({},F))}_(!0)};return e.jsxs("div",{className:"pos-rel",children:[e.jsxs("div",{className:"d-flx flx-wrp",children:[e.jsx(O,{onChange:y,checked:l===0?"rec_owner"in t.actions:"rec_owner"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Record_Owner",title:a("Record Owner","bit-integrations"),subTitle:a("Add a owner to records pushed to Zoho CRM","bit-integrations")}),e.jsx(O,{onChange:()=>v({show:"tag_rec"}),checked:l===0?"tag_rec"in t.actions:"tag_rec"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Tag_Records",title:a("Tag Records","bit-integrations"),subTitle:a("Add a tag to records pushed to Zoho CRM","bit-integrations")}),e.jsx(O,{onChange:()=>v({show:"attachment"}),checked:l===0?"attachment"in t.actions:"attachment"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:a("Attachment","bit-integrations"),subTitle:a("Add attachments or signatures from Trigger to CRM","bit-integrations")}),t.module!=="Tasks"&&e.jsxs(e.Fragment,{children:[e.jsx(O,{onChange:s=>b(s,"workflow"),checked:l===0?"workflow"in t.actions:"workflow"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Workflow",title:a("Workflow","bit-integrations"),subTitle:a("Trigger CRM workflows","bit-integrations")}),e.jsx(O,{onChange:s=>b(s,"approval"),checked:l===0?"approval"in t.actions:"approval"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Approval",title:a("Approval","bit-integrations"),subTitle:a("Send entries to CRM approval list","bit-integrations")}),e.jsx(O,{onChange:s=>b(s,"blueprint"),checked:l===0?"blueprint"in t.actions:"blueprint"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Blueprint",title:a("Blueprint","bit-integrations"),subTitle:a("Trigger CRM Blueprint","bit-integrations")}),e.jsx(O,{onChange:s=>b(s,"gclid"),checked:l===0?"gclid"in t.actions:"gclid"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Capture_GCLID",title:a("Capture GCLID","bit-integrations"),subTitle:a("Sends the click details of AdWords Ads to Zoho CRM","bit-integrations")}),e.jsx(Me,{action:A,children:e.jsx(O,{onChange:s=>b(s,"upsert"),checked:l===0?"upsert"in t.actions:"upsert"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Upsert_Record",title:a("Upsert Records","bit-integrations"),subTitle:a("The record is updated if it already exists else it is inserted as a new record","bit-integrations")})}),e.jsx(O,{onChange:R,checked:l===0?"assignment_rules"in t.actions:"assignment_rules"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Assignment_Rule",title:a("Assignment Rules","bit-integrations"),subTitle:a("Trigger Assignment Rules in Zoho CRM","bit-integrations")})]})]}),e.jsxs(D,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:a("Ok","bit-integrations"),show:m.show==="attachment",close:g,action:g,title:a("Select Attachment","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2",children:a("Select File Upload Fields","bit-integrations")}),e.jsx(ne,{defaultValue:l===0?t.actions.attachment:t.relatedlists[l-1].actions.attachment,className:"mt-2 w-9",onChange:s=>b(s,"attachment"),options:u.filter(s=>s.type==="file").map(s=>({label:s.label,value:s.name}))})]}),e.jsxs(D,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:a("Ok","bit-integrations"),show:m.show==="assignment_rules",close:g,action:g,title:a("Assignment Rules","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2",children:a("Assignment Rules","bit-integrations")}),x?e.jsx(X,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsxs("select",{value:l===0?t.actions.assignment_rules:t.relatedlists[l-1].actions.assignment_rules,className:"btcd-paper-inp",onChange:s=>b(s.target.value,"assignment_rules"),children:[e.jsx("option",{value:"",children:a("Select Assignment Rule","bit-integrations")}),((U=($=t==null?void 0:t.default)==null?void 0:$.assignmentRules)==null?void 0:U[j])&&Object.keys(t.default.assignmentRules[j]).map(s=>e.jsx("option",{value:t.default.assignmentRules[j][s],children:s},s))]}),e.jsx("button",{onClick:()=>oe(l,t,r,h,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh CRM Assignment Rules","bit-integrations")}'`},type:"button",disabled:x,children:"↻"})]})]}),e.jsxs(D,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:a("Ok","bit-integrations"),show:m.show==="tag_rec",close:g,action:g,title:a("Tag Records","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("small",{children:a("Add a tag to records pushed to Zoho CRM","bit-integrations")}),e.jsx("div",{className:"mt-2",children:a("Tag Name","bit-integrations")}),x?e.jsx(X,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(ne,{className:"msl-wrp-options",defaultValue:l===0?t.actions.tag_rec:t.relatedlists[l-1].actions.tag_rec,options:T(),onChange:s=>b(s,"tag_rec"),customValue:!0}),e.jsx("button",{onClick:()=>ke(l,d,t,r,h,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${a("Refresh CRM Tags","bit-integrations")}'`},type:"button",disabled:x,children:"↻"})]})]}),e.jsxs(D,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:a("Ok","bit-integrations"),show:m.show==="rec_owner",close:g,action:g,title:a("Record Owner","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2",children:a("Owner Name","bit-integrations")}),x?e.jsx(X,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsxs("select",{value:l===0?t.actions.rec_owner:t.relatedlists[l-1].actions.rec_owner,className:"btcd-paper-inp",onChange:s=>b(s.target.value,"rec_owner"),children:[e.jsx("option",{value:"",children:a("Select Owner","bit-integrations")}),((Z=t.default)==null?void 0:Z.crmOwner)&&((z=Object.values(t.default.crmOwner))==null?void 0:z.map(s=>e.jsx("option",{value:s.id,children:s.full_name},s.id)))]}),e.jsx("button",{onClick:()=>ce(d,t,r,h,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh CRM Owners","bit-integrations")}'`},type:"button",disabled:x,children:"↻"})]})]}),e.jsx(me,{md:!0,show:p,setModal:_,title:a("Upsert Record","bit-integrations"),children:e.jsx("div",{className:"o-a",children:l===0?((L=t==null?void 0:t.actions)==null?void 0:L.upsert)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-w-m mt-2",children:a("Upsert Using","bit-integrations")}),e.jsx("small",{children:a("Arrange fields in order of preferance for upsertion","bit-integrations")}),e.jsx(re.ReactSortable,{list:(P=t.actions.upsert)==null?void 0:P.crmField,setList:s=>N(s,"list"),children:(S=(q=t.actions.upsert)==null?void 0:q.crmField)==null?void 0:S.map(s=>e.jsxs("div",{className:"upsert_rec w-7 mt-1 flx",children:[e.jsx("span",{className:"btcd-icn btcd-mnu mr-2"}),s.name]},`cf-${s.i}`))}),e.jsx("div",{className:"font-w-m mt-3",children:a("Upsert Preferance","bit-integrations")}),e.jsx("small",{children:a("Overwrite existing field values in Zoho CRM with empty field values from Zoho CRM For Triggers while upserting a record?","bit-integrations")}),e.jsxs("div",{children:[e.jsx(C,{onChange:()=>N(!0,"overwrite"),radio:!0,checked:(V=t.actions.upsert)==null?void 0:V.overwrite,name:"up-rec",title:a("Yes","bit-integrations")}),e.jsx(C,{onChange:()=>N(!1,"overwrite"),radio:!0,checked:!((f=t.actions.upsert)!=null&&f.overwrite),name:"up-rec",title:a("No","bit-integrations")})]})]}):((E=(B=t==null?void 0:t.relatedlists[l-1])==null?void 0:B.actions)==null?void 0:E.upsert)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-w-m mt-2",children:a("Upsert Using","bit-integrations")}),e.jsx("small",{children:a("Arrange fields in order of preferance for upsertion","bit-integrations")}),e.jsx(re.ReactSortable,{list:(o=t.relatedlists[l-1].actions.upsert)==null?void 0:o.crmField,setList:s=>N(s,"list"),children:(K=(J=t.relatedlists[l-1].actions.upsert)==null?void 0:J.crmField)==null?void 0:K.map(s=>e.jsxs("div",{className:"upsert_rec w-7 mt-1 flx",children:[e.jsx("span",{className:"btcd-icn btcd-mnu mr-2"}),s.name]},`cf-${s.i}`))}),e.jsx("div",{className:"font-w-m mt-3",children:a("Upsert Preferance","bit-integrations")}),e.jsx("small",{children:a("Overwrite existing field values in Zoho CRM with empty field values from Zoho CRM For WPForms while upserting a record?","bit-integrations")}),e.jsxs("div",{children:[e.jsx(C,{onChange:()=>N(!0,"overwrite"),radio:!0,checked:(Q=t.relatedlists[l-1].actions.upsert)==null?void 0:Q.overwrite,name:"up-rec",title:a("Yes","bit-integrations")}),e.jsx(C,{onChange:()=>N(!1,"overwrite"),radio:!0,checked:!((w=t.relatedlists[l-1].actions.upsert)!=null&&w.overwrite),name:"up-rec",title:a("No","bit-integrations")})]})]})})})]})}function ee({i:t,formFields:r,uploadFields:u,field:l,crmConf:d,setCrmConf:i,tab:p,type:_}){var g,j,T,N,y,R,A,$,U,Z,z,L,P,q,S,V,f,B,E;const x=p===0?d.module:(j=(g=d.relatedlists)==null?void 0:g[p-1])==null?void 0:j.module,h=p===0?d.layout:(N=(T=d.relatedlists)==null?void 0:T[p-1])==null?void 0:N.layout;let m;u?m=l.zohoFormField===""||(($=(A=(R=(y=d.default.layouts)==null?void 0:y[x])==null?void 0:R[h])==null?void 0:A.requiredFileUploadFields)==null?void 0:$.indexOf(l.zohoFormField))===-1:m=l.zohoFormField===""||((L=(z=(Z=(U=d.default.layouts)==null?void 0:U[x])==null?void 0:Z[h])==null?void 0:z.required)==null?void 0:L.indexOf(l.zohoFormField))===-1;const v=be(we),{isPro:b}=v;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:o=>le(o,t,d,i,u,p),children:[e.jsx("option",{value:"",children:a("Select Field","bit-integrations")}),e.jsx("optgroup",{label:a("Form Fields","bit-integrations"),children:u?r.map(o=>o.type==="file"&&e.jsx("option",{value:o.name,children:o.label},`ff-zhcrm-${o.name}`)):r.map(o=>o.type!=="file"&&e.jsx("option",{value:o.name,children:o.label},`ff-zhcrm-${o.name}`))}),!u&&e.jsx("option",{value:"custom",children:a("Custom...","bit-integrations")}),e.jsx("optgroup",{label:ve(a("General Smart Codes %s","bit-integrations"),b?"":`(${a("Pro","bit-integrations")})`),children:b&&((P=ye)==null?void 0:P.map(o=>e.jsx("option",{value:o.name,children:o.label},`ff-zhcrm-${o.name}`)))})]}),l.formField==="custom"&&e.jsx($e,{onChange:o=>Fe(o,t,d,i,p),label:a("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:a("Custom Value","bit-integrations"),formFields:r}),e.jsxs("select",{className:"btcd-paper-inp",disabled:!m,name:"zohoFormField",value:l.zohoFormField||"",onChange:o=>le(o,t,d,i,u,p),children:[e.jsx("option",{value:"",children:a("Select Field","bit-integrations")}),u?((V=(S=(q=d.default.layouts)==null?void 0:q[x])==null?void 0:S[h])==null?void 0:V.fileUploadFields)&&Object.keys(d.default.layouts[x][h].fileUploadFields).filter(o=>o.required!==!0).map(o=>m?!d.default.layouts[x][h].fileUploadFields[o].required&&e.jsx("option",{value:o,children:d.default.layouts[x][h].fileUploadFields[o].display_label},o):e.jsx("option",{value:o,children:d.default.layouts[x][h].fileUploadFields[o].display_label},o)):((E=(B=(f=d.default.layouts)==null?void 0:f[x])==null?void 0:B[h])==null?void 0:E.fields)&&Object.keys(d.default.layouts[x][h].fields).filter(o=>o.required!==!0).map(o=>m?!d.default.layouts[x][h].fields[o].required&&e.jsx("option",{value:o,children:d.default.layouts[x][h].fields[o].display_label},o):e.jsx("option",{value:o,children:d.default.layouts[x][h].fields[o].display_label},o))]})]}),e.jsx("div",{className:"flx integ-fld-wrp",children:m&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>I(t,d,i,u,p),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>_e(t,d,i,u,p),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})})]})})}function Ue({tab:t,settab:r,formID:u,formFields:l,crmConf:d,setCrmConf:i,handleInput:p,isLoading:_,setIsLoading:x,setSnackbar:h}){var m,v,b,g,j,T,N;return H.useEffect(()=>{ue(0,r)},[]),te.isPro,e.jsxs(e.Fragment,{children:[_&&e.jsx(X,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:a("Layout:","bit-integrations")}),e.jsxs("select",{onChange:p,name:"layout",value:d.layout,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:a("Select Layout","bit-integrations")}),((v=(m=d==null?void 0:d.default)==null?void 0:m.layouts)==null?void 0:v[d.module])&&Object.keys(d.default.layouts[d.module]).map(y=>e.jsx("option",{value:y,children:y},y))]}),e.jsx("button",{onClick:()=>he(t,u,d,i,x,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh CRM Layouts","bit-integrations")}'`},type:"button",disabled:_,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),((T=(j=(g=(b=d.default)==null?void 0:b.layouts)==null?void 0:g[d.module])==null?void 0:j[d.layout])==null?void 0:T.fields)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields","bit-integrations")})})]}),d.field_map.map((y,R)=>e.jsx(ee,{i:R,field:y,crmConf:d,formFields:l,setCrmConf:i,tab:t,setSnackbar:h},`crm-m-${R+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>I(d.field_map.length,d,i,!1,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),Object.keys((N=d.default.layouts[d.module][d.layout])==null?void 0:N.fileUploadFields).length!==0&&e.jsxs("div",{className:"pos-rel",children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Map File Upload Fields","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields","bit-integrations")})})]}),d.upload_field_map.map((y,R)=>e.jsx(ee,{i:R,uploadFields:!0,field:y,crmConf:d,formFields:l,setCrmConf:i,tab:t,setSnackbar:h},`crm-m-${R+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>I(d.upload_field_map.length,d,i,!0,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Utilities","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(xe,{formID:u,formFields:l,crmConf:d,setCrmConf:i,tab:t,setSnackbar:h})]})]})}function Ze({indx:t,tab:r,settab:u,formID:l,formFields:d,crmConf:i,setCrmConf:p,handleInput:_,isLoading:x,setIsLoading:h,setSnackbar:m}){var v,b,g,j,T,N,y,R,A,$,U,Z,z,L,P,q,S,V,f,B,E,o,J,K,Q;return H.useEffect(()=>{ue(t+1,u,l,i,p,h,m)},[]),te.isPro,e.jsxs(e.Fragment,{children:[x&&e.jsx(X,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"pos-rel",children:[e.jsx("b",{className:"wdt-100 d-in-b",children:a("Related List:","bit-integrations")}),e.jsxs("select",{onChange:_,name:"module",value:(b=(v=i==null?void 0:i.relatedlists)==null?void 0:v[r-1])==null?void 0:b.module,className:"btcd-paper-inp w-7",disabled:!i.module,children:[e.jsx("option",{value:"",children:a("Select Related Module","bit-integrations")}),((j=(g=i==null?void 0:i.default)==null?void 0:g.relatedlists)==null?void 0:j[i.module])&&Object.values(i.default.relatedlists[i.module]).map((w,s)=>e.jsx("option",{value:w.module,children:w.name},`${w==null?void 0:w.name}-${t}-${s}`))]}),e.jsx("button",{onClick:()=>Te(l,i,p,h,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh CRM Related Lists","bit-integrations")}'`},type:"button",disabled:x,children:"↻"}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("b",{className:"wdt-100 d-in-b",children:a("Layout:","bit-integrations")}),e.jsxs("select",{onChange:_,name:"layout",value:(N=(T=i==null?void 0:i.relatedlists)==null?void 0:T[r-1])==null?void 0:N.layout,className:"btcd-paper-inp w-7",disabled:!((R=(y=i==null?void 0:i.relatedlists)==null?void 0:y[r-1])!=null&&R.module),children:[e.jsx("option",{value:"",children:a("Select Layout","bit-integrations")}),((Z=(A=i==null?void 0:i.default)==null?void 0:A.layouts)==null?void 0:Z[(U=($=i.relatedlists)==null?void 0:$[r-1])==null?void 0:U.module])&&Object.keys(i.default.layouts[i.relatedlists[r-1].module]).map((w,s)=>e.jsx("option",{value:w,children:w},`${w}-${t}-${s}`))]}),e.jsx("button",{onClick:()=>he(r,l,i,p,h,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh CRM Layouts"'},type:"button",disabled:x,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),((B=(f=(q=(z=i.default)==null?void 0:z.layouts)==null?void 0:q[(P=(L=i==null?void 0:i.relatedlists)==null?void 0:L[r-1])==null?void 0:P.module])==null?void 0:f[(V=(S=i==null?void 0:i.relatedlists)==null?void 0:S[r-1])==null?void 0:V.layout])==null?void 0:B.fields)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields","bit-integrations")})})]}),(J=(o=(E=i.relatedlists)==null?void 0:E[r-1])==null?void 0:o.field_map)==null?void 0:J.map((w,s)=>e.jsx(ee,{i:s,field:w,crmConf:i,formFields:d,setCrmConf:p,tab:r,setSnackbar:m},`crm-m-${s+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>I(i.relatedlists[r-1].field_map.length,i,p,!1,r),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),((Q=(K=i.default)==null?void 0:K.layouts[i.relatedlists[r-1].module])==null?void 0:Q[i.relatedlists[r-1].layout])&&Object.keys(i.default.layouts[i.relatedlists[r-1].module][i.relatedlists[r-1].layout].fileUploadFields).length!==0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("File Upload Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields","bit-integrations")})})]}),i.relatedlists[r-1].upload_field_map.map((w,s)=>e.jsx(ee,{i:s,uploadFields:1,field:w,crmConf:i,formFields:d,setCrmConf:p,tab:r,setSnackbar:m},`crm-m-${s+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>I(i.relatedlists[r-1].upload_field_map.length,i,p,!0,r),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Utilities","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(xe,{formFields:d,crmConf:i,setCrmConf:p,tab:r,formID:l,setSnackbar:m})]})]})}function We({tab:t,settab:r,formID:u,formFields:l,handleInput:d,crmConf:i,setCrmConf:p,isLoading:_,setIsLoading:x,setSnackbar:h}){var b;const m=()=>{if(i.relatedlists.length<3){const g=M({},i);g.relatedlists.push({actions:{},field_map:[{formField:"",zohoFormField:""}],layout:"",module:"",upload_field_map:[{formField:"",zohoFormField:""}]}),p(M({},g))}},v=g=>{const j=M({},i);j.relatedlists.splice(g,1),j.relatedlists.length||r(0),p(M({},j))};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:a("Module:","bit-integrations")}),e.jsxs("select",{onChange:d,name:"module",value:i.module,className:"btcd-paper-inp w-5",disabled:t,children:[e.jsx("option",{value:"",children:a("Select Module","bit-integrations")}),((b=i==null?void 0:i.default)==null?void 0:b.modules)&&Object.keys(i.default.modules).map(g=>e.jsx("option",{value:g,children:i.default.modules[g].plural_label},g))]}),t===0&&e.jsx("button",{onClick:()=>Oe(u,i,p,x,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh CRM Modules","bit-integrations")}'`},type:"button",disabled:_,children:"↻"}),e.jsx("br",{}),e.jsx("div",{children:e.jsxs(Re,{children:[e.jsxs("div",{className:"flx mt-2",children:[e.jsx(ae,{children:e.jsx("button",{className:`btcd-s-tab-link ${t===0&&"s-t-l-active"}`,type:"button",children:a("New Record","bit-integrations")})}),(i==null?void 0:i.relatedlists)&&i.relatedlists.map((g,j)=>e.jsxs(H.Fragment,{children:[e.jsx(ae,{children:e.jsxs("button",{className:`btcd-s-tab-link ${t===j+1&&"s-t-l-active"}`,type:"button",children:[a("Related List #","bit-integrations"),j+1]})}),e.jsx("button",{onClick:()=>v(j),className:"icn-btn","aria-label":"delete-relatedlist",type:"button",children:e.jsx(Ne,{size:"14"})})]},`t-${j*3}`)),i.relatedlists.length<3&&e.jsx("button",{onClick:m,className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Add More Related List","bit-integrations")}'`},type:"button",children:"+"})]}),e.jsx("div",{className:"btcd-hr"}),e.jsx(de,{children:e.jsx(Ue,{tab:t,settab:r,formID:u,formFields:l,crmConf:i,setCrmConf:p,handleInput:d,isLoading:_,setIsLoading:x,setSnackbar:h})}),(i==null?void 0:i.relatedlists)&&i.relatedlists.map((g,j)=>e.jsx(de,{children:e.jsx(Ze,{indx:j,tab:t,settab:r,formID:u,formFields:l,crmConf:i,setCrmConf:p,handleInput:d,isLoading:_,setIsLoading:x,setSnackbar:h})},`p-${j+2.4}`))]})}),e.jsx("br",{})]})}export{We as Z};
