var _=Object.defineProperty;var A=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var v=(n,i,s)=>i in n?_(n,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[i]=s,S=(n,i)=>{for(var s in i||(i={}))z.call(i,s)&&v(n,s,i[s]);if(A)for(var s of A(i))P.call(i,s)&&v(n,s,i[s]);return n};import{j as t,_ as e,s as D,d as F,k as R,g as q}from"./main.2.7.11.js";import{d as f,u as B,h as M}from"./react-router-dom.BLIKw1eE.js";import{z as E,y as W}from"./Note.iI4FM_zT.js";import{S as H}from"./SnackMsg.DJhRycHe.js";import{S as O}from"./Steps.KpTwh2fS.js";import{I as U,s as $}from"./Integrations.CiiC6YXN.js";import{A as G,h as J,c as K}from"./AffiliateIntegLayout.BvFfZWhu.js";import{B as Q}from"./BackIcn.Bt4XO_dx.js";import{t as V}from"./tutorialLinks.C1WWujPT.js";import{T as N}from"./TutorialLink.BQJGOONg.js";import"./CopyIcn.DaX9e6Na.js";import"./Table.NqkguWs5.js";import"./index.rAvPDjud.js";import"./TagifyInput.ey_dUHW4.js";import"./tagify.YxUZd8Ix.js";function X({formID:n,affiliateConf:i,setAffiliateConf:s,step:d,setStep:x,isLoading:u,setIsLoading:b,setSnackbar:k}){const[l,j]=f.useState(!1),[c,m]=f.useState(!1),{affiliate:o}=V,p=()=>{b("auth"),F({},"affiliate_authorize").then(a=>{a!=null&&a.success&&(j(!0),k({show:!0,msg:e("Connected with Affiliate Successfully","bit-integrations")})),b(!1),m(!0)})},y=a=>{const g=W(i);g[a.target.name]=a.target.value,s(g)};return t.jsxs("div",{className:"btcd-stp-page",style:{width:d===1&&900,height:d===1&&"auto"},children:[t.jsx(N,{title:"AffiliateWP",youTubeLink:o==null?void 0:o.youTubeLink}),t.jsx(N,{title:"AffiliateWP",docLink:o==null?void 0:o.docLink}),t.jsx("div",{className:"mt-3",children:t.jsx("b",{children:e("Integration Name:","bit-integrations")})}),t.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:y,name:"name",value:i.name,type:"text",placeholder:e("Integration Name...","bit-integrations")}),u==="auth"&&t.jsxs("div",{className:"flx mt-5",children:[t.jsx(E,{size:25,clr:"#022217",className:"mr-2"}),"Checking if LearnDash is active!!!"]}),c&&!l&&!u&&t.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[t.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),D(e("%s plugin must be activated to integrate with Bit Integrations","bit-integrations"),"Affiliate plugin")]}),!l&&t.jsx("button",{onClick:p,className:"btn btcd-btn-lg purple sh-sm flx mt-5",type:"button",children:e("Connect","bit-integrations")}),l&&t.jsxs("button",{onClick:()=>x(2),className:"btn btcd-btn-lg purple sh-sm flx mt-5",type:"button",disabled:!l,children:[e("Next","bit-integrations"),t.jsx(Q,{className:"ml-1 rev-icn"})]})]})}function bt({formFields:n,setFlow:i,flow:s,allIntegURL:d,isInfo:x,edit:u}){const b=B(),{formID:k}=M(),l=R(q),{siteURL:j}=l,[c,m]=f.useState(!1),[o,p]=f.useState(1),[y,a]=f.useState({show:!1}),g=[{key:"1",label:e("Create a referral for specific affiliate Id","bit-integrations")},{key:"2",label:e("Create a referral for the user","bit-integrations")}],C=[{key:"1",label:e("Paid","bit-integrations")},{key:"2",label:e("Unpaid","bit-integrations")},{key:"3",label:e("Pending","bit-integrations")},{key:"4",label:e("Reject","bit-integrations")}],I=[{key:"1",label:e("Sale","bit-integrations")},{key:"2",label:e("Opt-in","bit-integrations")},{key:"3",label:e("Lead","bit-integrations")}],w=[{key:"amount",label:e("Amount","bit-integrations"),required:!0},{key:"description",label:e("Description","bit-integrations"),required:!0},{key:"reference",label:e("Reference","bit-integrations"),required:!1},{key:"context",label:e("Context","bit-integrations"),required:!1}],[r,h]=f.useState({name:"Affiliate",type:"Affiliate",mainAction:"",affiliate_id:"",referralId:"",statusId:"",field_map:[{formField:"",affiliateFormField:""}],allReferralType:I,allStatus:C,allActions:g,createAffiliateFields:w,actions:{}}),L=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!K(r)){a({show:!0,msg:e("Please map fields to continue.","bit-integrations")});return}r.mainAction!==""&&p(3)};return t.jsxs("div",{children:[t.jsx(H,{snack:y,setSnackbar:a}),t.jsx("div",{className:"txt-center mt-2",children:t.jsx(O,{step:3,active:o})}),t.jsx(X,{formID:k,affiliateConf:r,setAffiliateConf:h,step:o,setStep:p,isLoading:c,setIsLoading:m,setSnackbar:a}),t.jsxs("div",{className:"btcd-stp-page",style:S({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[t.jsx(G,{formFields:n,handleInput:T=>J(T,r,h),affiliateConf:r,setAffiliateConf:h,isLoading:c,setIsLoading:m,setSnackbar:a,allIntegURL:d,isInfo:x,edit:u}),t.jsxs("button",{onClick:()=>L(),disabled:!r.statusId||!r.referralId||c,className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[e("Next","bit-integrations")," ",t.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),t.jsx(U,{step:o,saveConfig:()=>$({flow:s,setFlow:i,allIntegURL:d,navigate:b,conf:r,setIsLoading:m,setSnackbar:a}),isLoading:c,dataConf:r,setDataConf:h,formFields:n})]})}export{bt as default};
