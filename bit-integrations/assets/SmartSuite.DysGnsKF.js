var T=Object.defineProperty;var j=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var k=(s,t,a)=>t in s?T(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,_=(s,t)=>{for(var a in t||(t={}))L.call(t,a)&&k(s,a,t[a]);if(j)for(var a of j(t))F.call(t,a)&&k(s,a,t[a]);return s};import{j as i,_ as o,z as r}from"./main.2.7.10.js";import{u as P,d as n}from"./react-router-dom.BLIKw1eE.js";import"./Note.BEVUC85R.js";import{S as q}from"./SnackMsg.xGMm2bSj.js";import{S as z}from"./Steps.B0Spr3ak.js";import{I as E,g as M}from"./Integrations.BO4oRqVq.js";import A from"./SmartSuiteAuthorization.DxtrUPPo.js";import{d as B,c as y}from"./SmartSuiteCommonFunc.BZIeC4W-.js";import{S as D}from"./SmartSuiteIntegLayout.Cbn9YNjX.js";import"./CopyIcn.DhliU5iM.js";import"./Table.DVLhKUbN.js";import"./index.rAvPDjud.js";import"./tutorialLinks.C1WWujPT.js";import"./TutorialLink.DBJO1IxA.js";import"./TagifyInput.CA5KNd78.js";import"./tagify.YxUZd8Ix.js";import"./ProUtilHelpers.uGYJ1F86.js";function ne({formFields:s,setFlow:t,flow:a,allIntegURL:u}){const b=P(),[g,m]=n.useState(!1),[f,S]=n.useState({}),[c,x]=n.useState(1),[C,d]=n.useState({show:!1}),h=[],[e,p]=n.useState({name:"SmartSuite",type:"SmartSuite",workspaceId:"",apiToken:"",field_map:B(h),actionName:"",smartSuiteFields:h,solutionFields:R,tableFields:G,actionLists:H}),I=()=>{m(!0),M(a,t,u,e,b,"","",m).then(l=>{var v;l.success?(r.success((v=l.data)==null?void 0:v.msg),b(u)):r.error(l.data||l)})},w=N=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!y(e)){r.error(o("Please map mandatory fields","bit-integrations"));return}if((e.actionName==="table"||e.actionName==="record")&&!e.selectedSolution){r.error(o("Please select a solution","bit-integrations"));return}if(e.actionName==="record"&&!e.selectedTable){r.error(o("Please select a table","bit-integrations"));return}e.field_map.length>0&&x(N)};return i.jsxs("div",{children:[i.jsx(q,{snack:C,setSnackbar:d}),i.jsx("div",{className:"txt-center mt-2",children:i.jsx(z,{step:3,active:c})}),i.jsx(A,{smartSuiteConf:e,setSmartSuiteConf:p,step:c,setStep:x,loading:f,setLoading:S,setSnackbar:d}),i.jsxs("div",{className:"btcd-stp-page",style:_({},c===2&&{width:900,height:"auto",overflow:"visible"}),children:[i.jsx(D,{formFields:s,smartSuiteConf:e,setSmartSuiteConf:p,loading:f,setLoading:S,isLoading:g,setIsLoading:m,setSnackbar:d}),(e==null?void 0:e.actionName)&&i.jsxs("button",{onClick:()=>w(3),disabled:!y(e),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[o("Next","bit-integrations")," Â ",i.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&i.jsx(E,{step:c,saveConfig:()=>I(),isLoading:g,dataConf:e,setDataConf:p,formFields:s})]})}const R=[{label:"Name",key:"name",required:!0},{label:"Logo Icon",key:"logo_icon",required:!1}],G=[{label:"Name",key:"name",required:!0}],H=[{name:"solution",label:o("Create Solution","bit-integrations"),is_pro:!1},{name:"table",label:o("Create Table","bit-integrations"),is_pro:!0},{name:"record",label:o("Create Record","bit-integrations"),is_pro:!0}];export{ne as default};
