var E=Object.defineProperty,D=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var N=(r,a,i)=>a in r?E(r,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[a]=i,h=(r,a)=>{for(var i in a||(a={}))O.call(a,i)&&N(r,i,a[i]);if(F)for(var i of F(a))z.call(a,i)&&N(r,i,a[i]);return r},k=(r,a)=>D(r,U(a));import{k as V,g as $,j as e,_ as t,s as G,L as Z}from"./main.2.7.10.js";import{u as A,x as q}from"./Note.BEVUC85R.js";import{c as L,g as B}from"./ProUtilHelpers.uGYJ1F86.js";import{a as H,h as J,b as K}from"./Integrations.BO4oRqVq.js";import{a as Q,d as X,r as S,g as Y}from"./WishlistMemberCommonFunc.CtMJ38NE.js";import{T as f}from"./Table.DVLhKUbN.js";import{T as W}from"./TagifyInput.CA5KNd78.js";function M({i:r,formFields:a,field:i,wishlistMemberConf:u,wishlistFields:d,setWishlistMemberConf:c}){var s;const n=d.filter(l=>l.required===!0)||[],g=d.filter(l=>l.required===!1)||[],v=V($),{isPro:b}=v,p=(l,o)=>{c(m=>A(m,j=>{const{name:R,value:y}=l.target;j.field_map[o][R]=y,y==="custom"&&(j.field_map[o].customValue="")}))};return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:i.formField||"",onChange:l=>p(l,r),children:[e.jsx("option",{value:"",children:t("Select Field","bit-integrations")}),e.jsx("optgroup",{label:t("Form Fields","bit-integrations"),children:a==null?void 0:a.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`))}),e.jsx("option",{value:"custom",children:t("Custom...","bit-integrations")}),e.jsx("optgroup",{label:G(t("General Smart Codes %s","bit-integrations"),b?"":`(${t("Pro","bit-integrations")})`),children:b&&((s=H)==null?void 0:s.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),i.formField==="custom"&&e.jsx(W,{onChange:l=>J(l,r,u,c),label:t("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:i.customValue,placeholder:t("Custom Value","bit-integrations"),formFields:a}),e.jsxs("select",{className:"btcd-paper-inp",disabled:r<n.length,name:"wishlistMemberField",value:r<n.length?n[r].key||"":i.wishlistMemberField||"",onChange:l=>p(l,r),children:[e.jsx("option",{value:"",children:t("Select Field","bit-integrations")}),r<n.length?e.jsx("option",{value:n[r].key,children:n[r].label},n[r].key):g.map(({key:l,label:o})=>e.jsx("option",{value:l,children:o},l))]})]}),(d==null?void 0:d.length)>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Q(r,c),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>X(r,c),className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:e.jsx(f,{})})]})]})}const _=[{label:t("Create New Level","bit-integrations"),value:"create_level",is_pro:!1},{label:t("Update Level","bit-integrations"),value:"update_level",is_pro:!0},{label:t("Delete Level","bit-integrations"),value:"delete_level",is_pro:!0},{label:t("Create New Member","bit-integrations"),value:"create_member",is_pro:!0},{label:t("Update Member Data","bit-integrations"),value:"update_member",is_pro:!0},{label:t("Delete Member","bit-integrations"),value:"delete_member",is_pro:!0},{label:t("Add Member To Level","bit-integrations"),value:"add_member_to_level",is_pro:!0},{label:t("Remove Member From Level","bit-integrations"),value:"remove_member_from_level",is_pro:!0}],P=[{key:"name",label:t("Level Name","bit-integrations"),required:!0}],T=[{key:"id",label:t("Level Id","bit-integrations"),required:!0}],x=[{key:"user_email",label:t("Email Address","bit-integrations"),required:!0}],I=[{key:"user_login",label:t("Username","bit-integrations"),required:!0},{key:"user_email",label:t("Email Address","bit-integrations"),required:!0},{key:"first_name",label:t("First Name","bit-integrations"),required:!1},{key:"last_name",label:t("Last Name","bit-integrations"),required:!1},{key:"user_pass",label:t("Password","bit-integrations"),required:!1},{key:"company",label:t("Company","bit-integrations"),required:!1},{key:"address1",label:t("Street Address Line 1","bit-integrations"),required:!1},{key:"address2",label:t("Street Address Line 2","bit-integrations"),required:!1},{key:"city",label:t("City/Town","bit-integrations"),required:!1},{key:"state",label:t("State/Province","bit-integrations"),required:!1},{key:"zip",label:t("Zip Code","bit-integrations"),required:!1},{key:"country",label:t("Country","bit-integrations"),required:!1}],w=I.map(r=>r.key==="user_login"?k(h({},r),{required:!1}):r),C={create_level:P,update_level:[...T,...P],delete_level:T,create_member:I,update_member:w,delete_member:x,add_member_to_level:x,remove_member_from_level:x};function de({formFields:r,wishlistMemberConf:a,setWishlistMemberConf:i,isLoading:u,setIsLoading:d,setSnackbar:c}){var b,p;const n=V($),{isPro:g}=n,v=(s,l)=>{i(o=>A(o,m=>{m[l]=s,l==="action"&&(m.wishlistFields=C[s]||[],m.field_map=Y(m.wishlistFields)),l==="action"&&s==="create_member"&&S(i,d,c)}))};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsxs("div",{className:"flx",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:t("Action:","bit-integrations")}),e.jsx(q,{defaultValue:a==null?void 0:a.action,className:"mt-2 w-5",onChange:s=>v(s,"action"),options:_==null?void 0:_.map(s=>({label:L(g,s.is_pro)?s.label:B(s.label),value:s.value,disabled:!L(g,s.is_pro)})),singleSelect:!0,closeOnSelect:!0})]}),["create_member","add_member_to_level","remove_member_from_level"].includes(a==null?void 0:a.action)&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsxs("div",{className:"flx",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:t("Membership Levels:","bit-integrations")}),e.jsx(q,{defaultValue:(a==null?void 0:a.level_id)||"",className:"btcd-paper-drpdwn w-5",options:(b=a==null?void 0:a.levels)==null?void 0:b.map(s=>({label:s.label,value:s.value.toString()})),onChange:s=>v(s,"level_id"),closeOnSelect:!0,singleSelect:!0}),e.jsx("button",{onClick:()=>S(i,d,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${t("Refresh Membership Levels","bit-integrations")}'`},type:"button",disabled:u,children:"â†»"})]}),e.jsx("br",{})]}),u&&e.jsx(Z,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(a==null?void 0:a.action)&&!u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:t("Map Fields","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:t("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:t("WishlistMember Fields","bit-integrations")})})]}),a.field_map.map((s,l)=>e.jsx(M,{i:l,field:s,wishlistMemberConf:a,wishlistFields:a==null?void 0:a.wishlistFields,formFields:r,setWishlistMemberConf:i},`wishlist-m-${l+9}`)),((p=a==null?void 0:a.wishlistFields)==null?void 0:p.length)>1&&e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>K(a.field_map.length,i),className:"icn-btn sh-sm",type:"button",children:"+"})})]})]})}export{de as W};
