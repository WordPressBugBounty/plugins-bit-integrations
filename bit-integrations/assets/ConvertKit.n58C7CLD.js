import{j as e,_ as i}from"./main.2.7.11.js";import{u as _,h as j,d as r}from"./react-router-dom.BLIKw1eE.js";import"./Note.iI4FM_zT.js";import{B as I}from"./BackIcn.Bt4XO_dx.js";import{S}from"./SnackMsg.DJhRycHe.js";import{S as v}from"./Steps.KpTwh2fS.js";import{I as w,g as k}from"./Integrations.CiiC6YXN.js";import N from"./ConvertKitAuthorization.lNa6b4nr.js";import{c as p}from"./ConvertKitCommonFunc.C_7bPoQX.js";import{C as P}from"./ConvertKitIntegLayout.1PeywtgV.js";import"./CopyIcn.DaX9e6Na.js";import"./Table.NqkguWs5.js";import"./index.rAvPDjud.js";import"./tutorialLinks.C1WWujPT.js";import"./TutorialLink.BQJGOONg.js";function O({formFields:l,setFlow:c,flow:g,allIntegURL:f}){const b=_(),{formID:u}=j(),[o,m]=r.useState(!1),[a,d]=r.useState(1),[h,s]=r.useState({show:!1}),[t,n]=r.useState({name:"Kit(ConvertKit)",type:"Kit(ConvertKit)",api_secret:"",field_map:[{formField:"",convertKitField:""}],actions:{},module:""}),x=y=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300);{if(!p(t)){s({show:!0,msg:i("Please map all required fields to continue.","bit-integrations")});return}if(!(t!=null&&t.module)){s({show:!0,msg:i("Please select module to continue.","bit-integrations")});return}if((t==null?void 0:t.module)==="add_subscriber_to_a_form"&&!(t!=null&&t.formId)){s({show:!0,msg:i("Please select form to continue.","bit-integrations")});return}if(((t==null?void 0:t.module)==="add_tags_to_a_subscriber"||(t==null?void 0:t.module)==="remove_tags_to_a_subscriber")&&!(t!=null&&t.tagIds)){s({show:!0,msg:i("Please select tag continue.","bit-integrations")});return}t.name!==""&&t.field_map.length>0&&d(3)}};return e.jsxs("div",{children:[e.jsx(S,{snack:h,setSnackbar:s}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(v,{step:3,active:a})}),e.jsx(N,{formID:u,convertKitConf:t,setConvertKitConf:n,step:a,setstep:d,isLoading:o,setIsLoading:m,setSnackbar:s}),e.jsxs("div",{className:"btcd-stp-page",style:{width:a===2&&900,height:a===2&&"auto"},children:[e.jsx(P,{formID:u,formFields:l,convertKitConf:t,setConvertKitConf:n,isLoading:o,setIsLoading:m,setSnackbar:s}),e.jsxs("button",{onClick:()=>x(),disabled:!p(t),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[i("Next","bit-integrations")," Â ",e.jsx(I,{className:"ml-1 rev-icn"})]})]}),e.jsx(w,{step:a,saveConfig:()=>k(g,c,f,t,b,"","",m),isLoading:o,dataConf:t,setDataConf:n,formFields:l})]})}export{O as default};
