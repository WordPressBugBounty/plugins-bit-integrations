var z=Object.defineProperty;var V=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var q=(d,i,r)=>i in d?z(d,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[i]=r,t=(d,i)=>{for(var r in i||(i={}))E.call(i,r)&&q(d,r,i[r]);if(V)for(var r of V(i))W.call(i,r)&&q(d,r,i[r]);return d};import{j as e,_ as s,k as B,g as G,s as D,L as P}from"./main.2.7.11.js";import{M as I,a as J,h as K}from"./Integrations.CiiC6YXN.js";import{T as Q,b as k}from"./Table.NqkguWs5.js";import{g as X,a as S,b as n}from"./ConstantContactCommonFunc.BSHf1cYe.js";import{T as Y}from"./TagifyInput.ey_dUHW4.js";import{d as Z}from"./react-router-dom.BLIKw1eE.js";import{x as A}from"./Note.iI4FM_zT.js";import{a as T}from"./CopyIcn.DaX9e6Na.js";const H=(d,i,r,l,h)=>{const u=t({},i);l?u.upload_field_map.splice(d,0,{}):u.field_map.splice(d,0,{}),r(t({},u))},o=(d,i,r,l,h)=>{const u=t({},i);u.field_map.length>1&&u.field_map.splice(d,1),r(t({},u))},$=(d,i,r,l,h,u)=>{const x=t({},r);x.field_map[i][d.target.name]=d.target.value,d.target.value==="custom"&&(x.field_map[i].customValue=""),l(t({},x))},L=(d,i,r,l)=>{const h=t({},r);h.address_field[i].customValue=d.target.value,l(t({},h))},f=(d,i,r,l)=>{const h=t({},r);h.phone_field[i].customValue=d.target.value,l(t({},h))},O=(d,i,r,l,h,u)=>{const x=t({},r);x.address_field[i][d.target.name]=d.target.value,l(t({},x))},R=(d,i,r,l)=>{const h=t({},r);h.phone_field[i][d.target.name]=d.target.value,l(t({},h))},U=(d,i,r)=>{const l=t({},i);l.phone_field||(l.address_field=[]),l.address_field.push({}),r(t({},l))},C=(d,i,r)=>{const l=t({},i);l.address_field&&l.address_field.length>1&&l.address_field.splice(d,1),r(t({},l))},ee=(d,i,r)=>{const l=t({},i);l.phone_field&&l.phone_field.length>1&&l.phone_field.splice(d,1),r(t({},l))};function le({i:d,formFields:i,field:r,constantContactConf:l,setConstantContactConf:h,addressField:u}){const x=r.required,v=u.filter(a=>!a.required);return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsx("div",{className:"pos-rel flx",children:e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:r.formField||"",onChange:a=>O(a,d,l,h),children:[e.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),i.map(a=>a.type!=="file"&&e.jsx("option",{value:a.name,children:a.label},`ff-zhcrm-${a.name}`)),e.jsx("option",{value:"custom",children:s("Custom...","bit-integrations")})]}),r.formField==="custom"&&e.jsx(I,{onChange:a=>L(a,d,l,h),label:s("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:r.customValue,placeholder:s("Custom Value","bit-integrations")}),e.jsxs("select",{className:"btcd-paper-inp",name:"constantContactAddressField",value:r.constantContactAddressField||"",onChange:a=>O(a,d,l,h),disabled:x,children:[e.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),x?Object.values(u).map((a,g)=>e.jsx("option",{value:a.tag,children:a.name},`add-${g*2}`)):Object.values(v).map((a,g)=>e.jsx("option",{value:a.tag,children:a.name},`add-${g*2}`))]})]})}),!x&&e.jsxs(e.Fragment,{children:[(l==null?void 0:l.address_field.length)<5&&e.jsx("button",{onClick:()=>U(d,l,h),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>C(d,l,h),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})}function ie({i:d,formFields:i,field:r,constantContactConf:l,setConstantContactConf:h,phoneField:u}){const x=r.required,v=u.filter(a=>!a.required);return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsx("div",{className:"pos-rel flx",children:e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:r.formField||"",onChange:a=>R(a,d,l,h),children:[e.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),i.map(a=>a.type!=="file"&&e.jsx("option",{value:a.name,children:a.label},`ff-zhcrm-${a.name}`)),e.jsx("option",{value:"custom",children:s("Custom...","bit-integrations")})]}),r.formField==="custom"&&e.jsx(I,{onChange:a=>f(a,d,l,h),label:s("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:r.customValue,placeholder:s("Custom Value","bit-integrations")}),e.jsxs("select",{className:"btcd-paper-inp",name:"constantContactPhoneField",value:r.constantContactPhoneField||"",onChange:a=>R(a,d,l,h),disabled:x,children:[e.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),x?Object.values(u).map((a,g)=>e.jsx("option",{value:a.tag,children:a.name},`add-${g*2}`)):Object.values(v).map((a,g)=>e.jsx("option",{value:a.tag,children:a.name},`add-${g*2}`))]})]})}),!x&&e.jsx("button",{onClick:()=>ee(d,l,h),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(Q,{})})]})}function se({i:d,formFields:i,field:r,constantContactConf:l,setConstantContactConf:h}){var g,c,F,w;if(((g=l==null?void 0:l.field_map)==null?void 0:g.length)===1&&r.constantContactFormField===""){const p=t({},l),_=X(p);p.field_map=_,h(p)}const u=((c=l==null?void 0:l.default)==null?void 0:c.constantContactFields.filter(p=>p.required===!0))||[],x=((F=l==null?void 0:l.default)==null?void 0:F.constantContactFields.filter(p=>p.required===!1))||[],v=B(G),{isPro:a}=v;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:r.formField||"",onChange:p=>$(p,d,l,h),children:[e.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),e.jsx("optgroup",{label:s("Form Fields","bit-integrations"),children:i==null?void 0:i.map(p=>e.jsx("option",{value:p.name,children:p.label},`ff-rm-${p.name}`))}),e.jsx("option",{value:"custom",children:s("Custom...","bit-integrations")}),e.jsx("optgroup",{label:D(s("General Smart Codes %s","bit-integrations"),a?"":`(${s("Pro","bit-integrations")})`),children:a&&((w=J)==null?void 0:w.map(p=>e.jsx("option",{value:p.name,children:p.label},`ff-rm-${p.name}`)))})]}),r.formField==="custom"&&e.jsx(Y,{onChange:p=>K(p,d,l,h),label:s("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:r.customValue,placeholder:s("Custom Value","bit-integrations"),formFields:i}),e.jsxs("select",{className:"btcd-paper-inp",disabled:d<u.length,name:"constantContactFormField",value:d<u?u[d].label||"":r.constantContactFormField||"",onChange:p=>$(p,d,l,h),children:[e.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),d<u.length?e.jsx("option",{value:u[d].key,children:u[d].label},u[d].key):x.map(({key:p,label:_})=>e.jsx("option",{value:p,children:_},p))]})]}),d>=u.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>H(d,l,h),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>o(d,l,h),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function de({id:d,constantContactConf:i,setConstantContactConf:r,address:l,phone:h,isLoading:u,setIsLoading:x}){var _,N,M;const[v,a]=Z.useState({show:!1,action:()=>{}}),g=(m,j)=>{const b=t({},i);j==="update"&&(m.target.checked?b.actions.update=!0:delete b.actions.update),j==="list_ids"&&(S(d,i,r,u,x),m.target.checked?b.actions.list=!0:delete b.actions.list,a({show:j})),j==="tag_ids"&&(n(d,i,r,u,x),m.target.checked?b.actions.tag=!0:delete b.actions.tag,a({show:j})),j==="address_type"&&(m.target.checked?(b.actions.address=!0,b.address_field=l.filter(y=>y.required).map(y=>({formField:"",constantContactAddressField:y.tag,required:!0}))):i.address_type===""&&(delete b.actions.address,b.address_field=""),a({show:j})),j==="phone_type"&&(m.target.checked?(b.actions.phone=!0,b.phone_field=h.filter(y=>y.required).map(y=>({formField:"",constantContactPhoneField:y.tag,required:!0}))):i.phone_type===""&&(delete b.actions.phone,b.phone_field=""),a({show:j})),r(t({},b))},c=()=>{a({show:!1})},F=(m,j)=>{const b=t({},i);j==="list_ids"&&m.length?b.actions.list=!0:j==="list_ids"&&m.length<1&&delete b.actions.list,j==="address_type"&&m.length?b.actions.address=!0:j==="address_type"&&m.length<1&&(delete b.actions.address,b.address_field=[]),j==="phone_type"&&m.length?b.actions.phone=!0:j==="phone_type"&&m.length<1&&(delete b.actions.phone,b.phone_field=[]),b[j]=m,r(t({},b))},w=[{label:s("Home","bit-integrations"),value:"home"},{label:s("Work","bit-integrations"),value:"work"},{label:s("Other","bit-integrations"),value:"other"}],p=[{label:s("Home","bit-integrations"),value:"home"},{label:s("Work","bit-integrations"),value:"work"},{label:s("Mobile","bit-integrations"),value:"mobile"},{label:s("Fax","bit-integrations"),value:"fax"},{label:s("Other","bit-integrations"),value:"other"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pos-rel d-flx w-8",children:[e.jsx(k,{checked:(i==null?void 0:i.address_type)||!1,onChange:m=>g(m,"address_type"),className:"wdt-200 mt-4 mr-2",value:"address",title:s("Add Address Field","bit-integrations"),subTitle:s("Add Address Field","bit-integrations")}),e.jsx(k,{checked:(i==null?void 0:i.phone_type)||!1,onChange:m=>g(m,"phone_type"),className:"wdt-200 mt-4 mr-2",value:"phone",title:s("Add Phone Field","bit-integrations"),subTitle:s("Add Phone Field","bit-integrations")}),e.jsx(k,{checked:i.tag_ids.length||!1,onChange:m=>g(m,"tag_ids"),className:"wdt-200 mt-4 mr-2",value:"tag_ids",title:s("Tags","bit-integrations"),subTitle:s("Add Tags","bit-integrations")}),e.jsx(k,{checked:(i==null?void 0:i.list_ids.length)||!1,onChange:m=>g(m,"list_ids"),className:"wdt-200 mt-4 mr-2",value:"list_ids",title:s("Lists","bit-integrations"),subTitle:s("Add Lists","bit-integrations")}),e.jsx(k,{checked:((_=i==null?void 0:i.actions)==null?void 0:_.update)||!1,onChange:m=>g(m,"update"),className:"wdt-200 mt-4 mr-2",value:"update",title:s("Update Contact","bit-integrations"),subTitle:s("Update Contact","bit-integrations")})]}),e.jsxs(T,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:s("Ok","bit-integrations"),show:v.show==="address_type",close:c,action:c,title:s("Address Type","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("div",{className:"flx flx-between mt-2",children:e.jsx(A,{className:"msl-wrp-options",defaultValue:i==null?void 0:i.address_type,options:w.map(m=>({label:m.label,value:m.value})),onChange:m=>F(m,"address_type"),customValue:!0,singleSelect:!0})})]}),e.jsxs(T,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:s("Ok","bit-integrations"),show:v.show==="phone_type",close:c,action:c,title:s("Phone Type","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("div",{className:"flx flx-between mt-2",children:e.jsx(A,{className:"msl-wrp-options",defaultValue:i==null?void 0:i.phone_type,options:p.map(m=>({label:m.label,value:m.value})),onChange:m=>F(m,"phone_type"),customValue:!0,singleSelect:!0})})]}),e.jsxs(T,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:s("Ok","bit-integrations"),show:v.show==="list_ids",close:c,action:c,title:s("Lists","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),u.list?e.jsx(P,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(A,{className:"msl-wrp-options",defaultValue:i==null?void 0:i.list_ids,options:(N=i==null?void 0:i.lists)==null?void 0:N.map(m=>({label:m.listName,value:m.listId})),onChange:m=>F(m,"list_ids"),customValue:!0}),e.jsx("button",{onClick:()=>S(i,r,u,x),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${s("Refresh Lists","bit-integrations")}'`},type:"button",disabled:u.list,children:"↻"})]})]})," ",e.jsxs(T,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:s("Ok","bit-integrations"),show:v.show==="tag_ids",close:c,action:c,title:s("Tags","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),u.tag?e.jsx(P,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(A,{className:"msl-wrp-options",defaultValue:i==null?void 0:i.tag_ids,options:(M=i==null?void 0:i.tags)==null?void 0:M.map(m=>({label:m.tagName,value:m.tagId})),onChange:m=>F(m,"tag_ids"),customValue:!0}),e.jsx("button",{onClick:()=>n(i,r,u,x),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${s("Refresh Tags","bit-integrations")}'`},type:"button",disabled:u.tag,children:"↻"})]})]})]})}function ge({id:d,formFields:i,handleInput:r,constantContactConf:l,setConstantContactConf:h,isLoading:u,setIsLoading:x,setSnackbar:v}){var c,F,w,p;const a=[{tag:"street",name:s("Street","bit-integrations"),required:!1},{tag:"city",name:s("City","bit-integrations"),required:!1},{tag:"state",name:s("State","bit-integrations"),required:!1},{tag:"postal_code",name:s("Postal Code","bit-integrations"),required:!1},{tag:"country",name:s("Country","bit-integrations"),required:!1}],g=[{tag:"phone_number",name:s("Phone Number","bit-integrations"),required:!0}];return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:s("Source:","bit-integrations")}),e.jsxs("select",{onChange:r,name:"source_type",value:l.source_type,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:s("Select Source","bit-integrations")}),e.jsx("option",{value:"Contact",children:s("Contact","bit-integrations")}),e.jsx("option",{value:"Account",children:s("Account","bit-integrations")})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),(l==null?void 0:l.source_type)!==""&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:s("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:s("ConstantContact Fields","bit-integrations")})})]}),l==null?void 0:l.field_map.map((_,N)=>e.jsx(se,{i:N,field:_,constantContactConf:l,formFields:i,setConstantContactConf:h,setSnackbar:v},`rp-m-${N+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>H(l.field_map.length,l,h,!1),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx("br",{}),e.jsx("br",{}),(l==null?void 0:l.source_type)!==""&&((c=l.actions)==null?void 0:c.address)&&l.address_type!==""&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:s("Address Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:s("Form Address Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:s("Constant Contact Address Fields","bit-integrations")})})]}),(F=l==null?void 0:l.address_field)==null?void 0:F.map((_,N)=>e.jsx(le,{i:N,field:_,constantContactConf:l,formFields:i,setConstantContactConf:h,addressField:a},`sheet-m-${N+9}`)),(l==null?void 0:l.address_field.length)<5&&e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>U(l.address_field.length,l,h),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx("br",{}),e.jsx("br",{})," ",(l==null?void 0:l.source_type)!==""&&((w=l.actions)==null?void 0:w.phone)&&l.phone_type!==""&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:s("Phone Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:s("Form Phone Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:s("Constant Contact Phone Fields","bit-integrations")})})]}),(p=l==null?void 0:l.phone_field)==null?void 0:p.map((_,N)=>e.jsx(ie,{i:N,field:_,constantContactConf:l,formFields:i,setConstantContactConf:h,phoneField:g},`sheet-m-${N+9}`))]}),e.jsx("br",{}),e.jsx("br",{}),(l==null?void 0:l.source_type)!==""&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:s("Utilities","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(de,{id:d,constantContactConf:l,setConstantContactConf:h,address:a,phone:g,isLoading:u,setIsLoading:x})]})]})}export{ge as C};
