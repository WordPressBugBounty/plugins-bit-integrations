var P=Object.defineProperty,v=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var C=(e,s,t)=>s in e?P(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,l=(e,s)=>{for(var t in s||(s={}))F.call(s,t)&&C(e,t,s[t]);if(q)for(var t of q(s))O.call(s,t)&&C(e,t,s[t]);return e},n=(e,s)=>v(e,E(s));import{_ as d,c as b,z as c}from"./bi.964.0.js";import"./main-174.js";const o={CREATE_CONTACT:"createContact",UPDATE_CONTACT:"updateContact",CREATE_TASK:"createTask",UPDATE_TASK:"updateTask",CREATE_OPPORTUNITY:"createOpportunity",UPDATE_OPPORTUNITY:"updateOpportunity"},U=[{label:d("Create Contact","bit-integrations"),value:o.CREATE_CONTACT},{label:d("Update Contact","bit-integrations"),value:o.UPDATE_CONTACT},{label:d("Create Task","bit-integrations"),value:o.CREATE_TASK},{label:d("Update Task","bit-integrations"),value:o.UPDATE_TASK},{label:d("Create Opportunity","bit-integrations"),value:o.CREATE_OPPORTUNITY},{label:d("Update Opportunity","bit-integrations"),value:o.UPDATE_OPPORTUNITY}],R=[o.UPDATE_CONTACT],S=(e,s,t)=>{const r=l({},s);r.name=e.target.value,t(l({},r))},w=(e,s,t,r,u,a)=>{const i=l({},e);if(!i.name||!i.api_key){t({name:i.name?"":d("Integration name can't be empty","bit-integrations"),api_key:i.api_key?"":d("Access Api Token Key can't be empty","bit-integrations")});return}if((i==null?void 0:i.version)==="v2"&&!(i!=null&&i.location_id)){t({location_id:d("Location ID can't be empty for v2","bit-integrations")}),a(n(l({},u),{auth:!1}));return}const h={api_key:i.api_key,version:i==null?void 0:i.version,location_id:i==null?void 0:i.location_id};a(n(l({},u),{auth:!0})),b(h,"highLevel_authorization").then(_=>{var y;_!=null&&_.success?(r(!0),c.success("Authorized Successfully")):c.error(((y=_==null?void 0:_.data)==null?void 0:y.message)||d("Authorization Failed","bit-integrations")),a(n(l({},u),{auth:!1,accounts:!1}))})},T=e=>!((e!=null&&e.field_map?e.field_map.filter(t=>!t.formField||!t.highLevelField||!t.formField==="custom"&&!t.customValue):[]).length>0),f=(e,s,t,r)=>{const u={api_key:e.api_key,version:e==null?void 0:e.version,location_id:e==null?void 0:e.location_id};r(n(l({},t),{customFields:!0})),b(u,"get_highLevel_contact_custom_fields").then(a=>{if(a.success&&a.data){const i=l({},e),h=k(e.selectedTask);i.highLevelFields=[...h,...a.data],s(i),r(n(l({},t),{customFields:!1})),c.success(d("Custom fields fetch successfully","bit-integrations"));return}r(n(l({},t),{customFields:!1})),c.error(a!=null&&a.data?a.data:d("Something went wrong!","bit-integrations"))})},g=(e,s,t,r)=>{const u={api_key:e.api_key,version:e==null?void 0:e.version,location_id:e==null?void 0:e.location_id};r(n(l({},t),{contacts:!0})),b(u,"get_highLevel_contacts").then(a=>{if(a.success&&a.data){const i=l({},e);i.contacts=a.data,s(i),r(n(l({},t),{contacts:!1})),c.success(d("Contacts fetched successfully","bit-integrations")),i.selectedTask===o.UPDATE_CONTACT&&f(i,s,t,r),(i.selectedTask===o.CREATE_TASK||i.selectedTask===o.UPDATE_TASK||i.selectedTask===o.CREATE_OPPORTUNITY)&&D(i,s,t,r);return}r(n(l({},t),{contacts:!1})),c.error(a!=null&&a.data?a.data:d("Something went wrong!","bit-integrations"))})},D=(e,s,t,r)=>{const u={api_key:e.api_key,version:e==null?void 0:e.version,location_id:e==null?void 0:e.location_id};r(n(l({},t),{users:!0})),b(u,"get_highLevel_users").then(a=>{if(a.success&&a.data){const i=l({},e);i.users=a.data,s(i),r(n(l({},t),{users:!1})),c.success(d("Users fetched successfully","bit-integrations"));return}r(n(l({},t),{users:!1})),c.error(a!=null&&a.data?a.data:d("Something went wrong!","bit-integrations"))})},M=(e,s,t,r)=>{const u={api_key:e.api_key,version:e==null?void 0:e.version,location_id:e==null?void 0:e.location_id,contact_id:e.selectedContact};r(n(l({},t),{hlTasks:!0})),b(u,"get_highLevel_tasks").then(a=>{if(a.success&&a.data){const i=l({},e);i.hlTasks=a.data,s(i),r(n(l({},t),{hlTasks:!1})),c.success(d("Task fetched successfully","bit-integrations"));return}r(n(l({},t),{hlTasks:!1})),c.error(a!=null&&a.data?a.data:d("Something went wrong!","bit-integrations"))})},m=(e,s,t,r)=>{const u={api_key:e.api_key,version:e==null?void 0:e.version,location_id:e==null?void 0:e.location_id};r(n(l({},t),{pipelines:!0})),b(u,"get_highLevel_pipelines").then(a=>{if(a.success&&a.data){const i=l({},e);i.pipelines=a.data.pipelineList,i.stages=a.data.stages,s(i),r(n(l({},t),{pipelines:!1})),c.success(d("Pipelines fetched successfully","bit-integrations")),(i.selectedTask===o.CREATE_OPPORTUNITY||i.selectedTask===o.UPDATE_OPPORTUNITY)&&g(i,s,t,r);return}r(n(l({},t),{pipelines:!1})),c.error(a!=null&&a.data?a.data:d("Something went wrong!","bit-integrations"))})},K=(e,s,t,r)=>{const u={api_key:e.api_key,version:e==null?void 0:e.version,location_id:e==null?void 0:e.location_id,pipeline_id:e.selectedPipeline};r(n(l({},t),{opportunities:!0})),b(u,"get_highLevel_opportunities").then(a=>{if(a.success&&a.data){const i=l({},e);i.opportunities=a.data,s(i),r(n(l({},t),{opportunities:!1})),c.success(d("Opportunities fetched successfully","bit-integrations"));return}r(n(l({},t),{opportunities:!1})),c.error(a!=null&&a.data?a.data:d("Something went wrong!","bit-integrations"))})},V=(e,s,t,r,u,a,i,h="")=>{if(!e)return;const _={api_key:s.api_key,version:s==null?void 0:s.version,location_id:s==null?void 0:s.location_id};i(n(l({},a),{options:!0})),b(_,e).then(y=>{if(y.success&&y.data){const A=l({},t);A[u]=y.data,r(A),i(n(l({},a),{options:!1})),c.success(d(`${h} fetched successfully`,"bit-integrations"));return}i(n(l({},a),{options:!1})),c.error(y!=null&&y.data?y.data:d("Something went wrong!","bit-integrations"))})},k=e=>{const s=[{key:"email",label:"Email",required:e===o.CREATE_CONTACT},{key:"firstName",label:"First Name",required:!1},{key:"lastName",label:"Last Name",required:!1},{key:"name",label:"Full Name",required:!1},{key:"phone",label:"Phone",required:!1},{key:"dateOfBirth",label:"Date of Birth",required:!1},{key:"address1",label:"Address 1",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1},{key:"country",label:"Country",required:!1},{key:"postalCode",label:"postalCode (Zip)",required:!1},{key:"companyName",label:"Company Name",required:!1},{key:"website",label:"Website",required:!1}];return e===o.UPDATE_CONTACT&&s.unshift({key:"id",label:"ID",required:!1}),s},Y=(e,s="v1")=>{if(e===o.CREATE_CONTACT)return{staticFields:k(e),fieldMap:[{formField:"",highLevelField:"email"}]};if(e===o.UPDATE_CONTACT)return{staticFields:k(e),fieldMap:[{formField:"",highLevelField:""}]};if(e===o.CREATE_TASK)return{staticFields:[{key:"title",label:"Title",required:!0},{key:"dueDate",label:"Due Date",required:!0},{key:"description",label:"Description",required:!1},{key:"contactId",label:"Contact ID",required:!1}],fieldMap:[{formField:"",highLevelField:"title"},{formField:"",highLevelField:"dueDate"}]};if(e===o.UPDATE_TASK)return{staticFields:[{key:"title",label:"Title",required:!0},{key:"dueDate",label:"Due Date",required:!0},{key:"taskId",label:"Task ID",required:!1},{key:"description",label:"Description",required:!1},{key:"contactId",label:"Contact ID",required:!1}],fieldMap:[{formField:"",highLevelField:"title"},{formField:"",highLevelField:"dueDate"}]};if(e===o.CREATE_OPPORTUNITY)return s==="v1"?{staticFields:[{key:"title",label:"Title",required:!0},{key:"name",label:"Name",required:!1},{key:"email",label:"Email",required:!1},{key:"phone",label:"Phone Number",required:!1},{key:"companyName",label:"Company Name",required:!1},{key:"monetaryValue",label:"Monetary Value",required:!1},{key:"contactId",label:"Contact ID",required:!1}],fieldMap:[{formField:"",highLevelField:"title"}]}:{staticFields:[{key:"name",label:"Name",required:!0},{key:"monetaryValue",label:"Monetary Value",required:!1},{key:"contactId",label:"Contact ID",required:!1}],fieldMap:[{formField:"",highLevelField:"name"}]};if(e===o.UPDATE_OPPORTUNITY)return s==="v1"?{staticFields:[{key:"title",label:"Title",required:!0},{key:"name",label:"Name",required:!1},{key:"email",label:"Email",required:!1},{key:"phone",label:"Phone Number",required:!1},{key:"companyName",label:"Company Name",required:!1},{key:"monetaryValue",label:"Monetary Value",required:!1},{key:"opportunityId",label:"Opportunity ID",required:!1},{key:"contactId",label:"Contact ID",required:!1}],fieldMap:[{formField:"",highLevelField:"title"}]}:{staticFields:[{key:"name",label:"Name",required:!0},{key:"monetaryValue",label:"Monetary Value",required:!1},{key:"contactId",label:"Contact ID",required:!1},{key:"opportunityId",label:"Opportunity ID",required:!1}],fieldMap:[{formField:"",highLevelField:"name"}]}};export{R as O,o as T,U as a,m as b,T as c,K as d,g as e,M as f,V as g,S as h,D as i,f as j,Y as k,w as l};
