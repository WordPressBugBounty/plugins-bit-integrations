var B=Object.defineProperty;var Z=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var L=(t,l,e)=>l in t?B(t,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[l]=e,h=(t,l)=>{for(var e in l||(l={}))ee.call(l,e)&&L(t,e,l[e]);if(Z)for(var e of Z(l))te.call(l,e)&&L(t,e,l[e]);return t};import{d as G,z as A,_ as i,j as a,L as d,k as ae,g as le,s as ie}from"./main.2.7.11.js";import{d as M}from"./react-router-dom.BLIKw1eE.js";import{x as O,a9 as re}from"./Note.iI4FM_zT.js";import{a as ce,h as ne,b as me}from"./Integrations.CiiC6YXN.js";import{a as pe}from"./CopyIcn.DaX9e6Na.js";import{b as se}from"./Table.NqkguWs5.js";import{T as he}from"./TagifyInput.ey_dUHW4.js";const xe=(t,l,e)=>{const c=h({},l);c.field_map.splice(t,0,{}),e(h({},c))},ge=(t,l,e)=>{const c=h({},l);c.field_map.length>1&&c.field_map.splice(t,1),e(h({},c))},o=(t,l,e,c)=>{const n=h({},e);n.field_map[l][t.target.name]=t.target.value,t.target.value==="custom"&&(n.field_map[l].customValue=""),c(h({},n))},De=t=>{switch(Number(t.mainAction)){case E:return t.privacyId===void 0;case Y:return t.groupId===void 0;case z:return t.friendId===void 0;case Q:return t.friendId===void 0;case T:return t.forumId===void 0;case D:return t.groupId===void 0;case y:return t.friendId===void 0;case v:return t.groupId===void 0||t.friendId===void 0;case N:return t.groupId===void 0||t.friendId===void 0;case S:return t.friendId===void 0;case $:return t.friendId===void 0;case H:return t.forumId===void 0;case R:return t.groupId===void 0||t.friendId===void 0;case U:return t.friendId===void 0;case k:return t.friendId===void 0;case I:return t.topicId===void 0||t.forumId===void 0;case C:return t.userStatusId===void 0;default:return!1}},E=1,Y=2,z=3,Q=4,T=5,D=6,y=7,v=8,N=9,S=10,V=11,$=12,H=13,R=14,U=15,k=16,I=17,C=18,Ve=(t,l,e,c,n,s)=>{const m=h({},l),{name:j}=t.target;t.target.value!==""?m[j]=t.target.value:delete m[j],j==="mainAction"&&(m.field_map=[{formField:"",buddyBossFormField:""}]),m[t.target.name]=t.target.value,e(h({},m))},b=(t,l,e,c)=>{e(!0),G(null,"fetch_all_group").then(n=>{if(n&&n.success){l(s=>{const m=h({},s);if(m.default||(m.default={}),n.data)if(Number(t.mainAction)===D||Number(t.mainAction)===R){const w=[{id:"any",name:"Any"},...n.data];m.default.allGroup=w}else m.default.allGroup=n.data;return m}),e(!1),A.success(i("All Group fetched successfully","bit-integrations"));return}e(!1),A.error(i("Group fetch failed. please try again","bit-integrations"))}).catch(()=>e(!1))},q=(t,l,e,c)=>{e(!0),G(null,"fetch_all_user").then(n=>{if(n&&n.success){l(s=>{const m=h({},s);return m.default||(m.default={}),n.data&&(m.default.allUser=n.data),m}),e(!1),A.success(i("All User fetched successfully","bit-integrations"));return}e(!1),A.error(i("User fetch failed. please try again","bit-integrations"))}).catch(()=>e(!1))},f=(t,l,e,c)=>{e(!0),G(null,"fetch_all_forum").then(n=>{if(n&&n.success){const s=h({},t);s.default||(s.default={}),n.data&&(s.default.allForum=n.data),l(h({},s)),e(!1),A.success(i("All Forum fetched successfully","bit-integrations"));return}e(!1),A.error(i("Forum list fetch failed. please try again","bit-integrations"))}).catch(()=>e(!1))},je=(t,l,e,c)=>{e(!0);const n={forumID:t.forumId};G(n,"fetch_all_topic").then(s=>{if(s&&s.success){const m=h({},t);m.default||(m.default={}),s.data&&(m.default.allTopic=s.data),l(h({},m)),e(!1),A.success(i("All Topic fetched successfully","bit-integrations"));return}e(!1),A.error(i("Topic list fetch failed. please try again","bit-integrations"))}).catch(()=>e(!1))},_e=t=>{var l=[];switch(Number(t.mainAction)){case E:l=t==null?void 0:t.createGroupFields;break;case T:l=t==null?void 0:t.topicInForumFields;break;case v:case V:l=t==null?void 0:t.sendAllUserNotificationFields;break;case N:case S:l=t==null?void 0:t.sendAllGroupPrivateMessageFields;break;case R:l=t==null?void 0:t.addPostToGroupFields;break;case U:l=t==null?void 0:t.addPostSiteWideActivityStreamFields;break;case I:l=t==null?void 0:t.postReplyTopicForumFields;break}const e=l.filter(c=>c.required===!0);return e.length>0?e.map(c=>({formField:"",buddyBossFormField:c.key})):[{formField:"",buddyBossFormField:""}]},$e=t=>[E,T,v,N,S,V,R,U,k,I].includes(t.mainAction)?!((t.field_map?t.field_map.filter(e=>!e.formField&&!e.buddyBossFormField):[]).length>0):!0;function Fe({buddyBossConf:t,setBuddyBossConf:l,formFields:e}){var g;const[c,n]=M.useState(!1),[s,m]=M.useState({show:!1,action:()=>{}}),j=(x,p)=>{var P;const F=h({},t);(P=x.target)!=null&&P.checked?(F.actions.privacy=!0,m({show:"privacy"})):(m({show:!1}),delete F.actions.privacy),l(h({},F))},w=()=>{m({show:!1})},u=(x,p)=>{const F=h({},t);x!==""?F[p]=x:delete F[p],l(h({},F))};return a.jsxs("div",{className:"pos-rel d-flx w-8",children:[a.jsx(se,{checked:((g=t==null?void 0:t.actions)==null?void 0:g.privacy)||!1,onChange:x=>j(x),className:"wdt-200 mt-4 mr-2",value:"privacy",title:i("Add Privacy","bit-integrations"),subTitle:i("Add privacy of group","bit-integrations")}),a.jsxs(pe,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:i("Ok","bit-integrations"),show:s.show==="privacy",close:w,action:w,title:i("Status","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),a.jsx("div",{className:"mt-2",children:i("Select privacy of group","bit-integrations")}),c?a.jsx(d,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):a.jsx("div",{className:"flx flx-between mt-2",children:a.jsx(O,{className:"msl-wrp-options",defaultValue:t==null?void 0:t.privacyId,options:t==null?void 0:t.groupPrivacyOptions.map(x=>({label:x.label,value:x.key})),onChange:x=>u(x,"privacyId"),singleSelect:!0})})]})]})}function ve({i:t,formFields:l,field:e,buddyBossConf:c,setBuddyBossConf:n,mainAction:s,buddyBossFields:m}){var x;M.useEffect(()=>{var p;if(((p=c==null?void 0:c.field_map)==null?void 0:p.length)===1&&e.buddyBossFormField===""){const F=h({},c),P=_e(F);F.field_map=P,n(F)}},[s]);const j=m.filter(p=>p.required===!0)||[],w=m.filter(p=>p.required===!1)||[],u=ae(le),{isPro:g}=u;return a.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:a.jsxs("div",{className:"pos-rel flx",children:[a.jsxs("div",{className:"flx integ-fld-wrp",children:[a.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:e.formField||"",onChange:p=>o(p,t,c,n),children:[a.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),a.jsx("optgroup",{label:i("Form Fields","bit-integrations"),children:l==null?void 0:l.map(p=>a.jsx("option",{value:p.name,children:p.label},`ff-rm-${p.name}`))}),a.jsx("option",{value:"custom",children:i("Custom...","bit-integrations")}),a.jsx("optgroup",{label:ie(i("General Smart Codes %s","bit-integrations"),g?"":`(${i("Pro","bit-integrations")})`),children:g&&((x=ce)==null?void 0:x.map(p=>a.jsx("option",{value:p.name,children:p.label},`ff-rm-${p.name}`)))})]}),e.formField==="custom"&&a.jsx(he,{onChange:p=>ne(p,t,c,n),label:i("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:e.customValue,placeholder:i("Custom Value","bit-integrations"),formFields:l}),a.jsxs("select",{className:"btcd-paper-inp",disabled:t<j.length,name:"buddyBossFormField",value:t<(j==null?void 0:j.length)?j[t].key||"":e.buddyBossFormField||"",onChange:p=>o(p,t,c,n),children:[a.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),t<j.length?a.jsx("option",{value:j[t].key,children:j[t].label},j[t].key):w.map(({key:p,label:F})=>a.jsx("option",{value:p,children:F},p))]})]}),t>=j.length&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>xe(t,c,n),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),a.jsx("button",{onClick:()=>ge(t,c,n),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:a.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function He({formFields:t,handleInput:l,buddyBossConf:e,setBuddyBossConf:c,isLoading:n,setIsLoading:s,setSnackbar:m,allIntegURL:j,isInfo:w,edit:u}){var F,P,J,K,X;const g=Number(e==null?void 0:e.mainAction);M.useEffect(()=>{Se.includes(g)&&b(e,c,s),Ne.includes(g)&&q(e,c,s),we.includes(g)&&f(e,c,s)},[g]);const x=(r,_)=>{const W=h({},e);r!==""?W[_]=r:delete W[_],c(h({},W))},p=r=>{let _;switch(g){case E:_=(e==null?void 0:e.createGroupFields)||[];break;case T:_=(e==null?void 0:e.topicInForumFields)||[];break;case v:case V:_=(e==null?void 0:e.sendAllUserNotificationFields)||[];break;case N:case S:_=(e==null?void 0:e.sendAllGroupPrivateMessageFields)||[];break;case R:_=(e==null?void 0:e.addPostToGroupFields)||[];break;case U:case k:_=(e==null?void 0:e.addPostSiteWideActivityStreamFields)||[];break;case I:_=(e==null?void 0:e.postReplyTopicForumFields)||[];break;default:_=[]}return _};return a.jsxs(a.Fragment,{children:[a.jsx("br",{}),a.jsx("b",{className:"wdt-200 d-in-b",children:i("Actions:","bit-integrations")}),a.jsxs("select",{onChange:l,name:"mainAction",value:e==null?void 0:e.mainAction,className:"btcd-paper-inp w-5",children:[a.jsx("option",{value:"",children:i("Select Actions","bit-integrations")}),(e==null?void 0:e.allActions)&&e.allActions.map(({key:r,label:_})=>a.jsx("option",{value:r,children:_},r))]}),a.jsx("br",{}),a.jsx("br",{}),Ae.includes(g)&&a.jsxs(a.Fragment,{children:[a.jsx("br",{}),a.jsxs("div",{className:"flx mt-4",children:[a.jsx("b",{className:"wdt-200 d-in-b",children:i("Select group:","bit-integrations")}),a.jsx(O,{className:"w-5",defaultValue:e==null?void 0:e.groupId,options:((F=e==null?void 0:e.default)==null?void 0:F.allGroup)&&e.default.allGroup.map(r=>({label:r.name,value:r.id})),onChange:r=>x(r,"groupId"),singleSelect:!0}),a.jsx("button",{onClick:()=>b(e,c,s),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Fetch All Groups","bit-integrations")}'`},type:"button",disabled:n,children:"↻"})]})]}),Ie.includes(g)&&a.jsxs(a.Fragment,{children:[a.jsx("br",{}),a.jsxs("div",{className:"flx mt-4",children:[a.jsx("b",{className:"wdt-200 d-in-b",children:`${Number(e.mainAction)===v||Number(e.mainAction)===S?i("Sender User","bit-integrations"):i("Select User","bit-integrations")}`}),a.jsx(O,{className:"w-5",defaultValue:e==null?void 0:e.friendId,options:((P=e==null?void 0:e.default)==null?void 0:P.allUser)&&e.default.allUser.map(r=>({label:r.display_name,value:r.ID})),onChange:r=>x(r,"friendId"),singleSelect:g!==$}),a.jsx("button",{onClick:()=>q(e,c,s),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Fetch All User","bit-integrations")}'`},type:"button",disabled:n,children:"↻"})]})]}),g===S&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flx mt-4",children:[a.jsx("b",{className:"wdt-200 d-in-b",children:i("Recipient User","bit-integrations")}),a.jsxs("select",{className:"btcd-paper-inp w-5",name:"formField",value:(e==null?void 0:e.recipientUserId)||"",onChange:r=>x(r.target.value,"recipientUserId"),children:[a.jsx("option",{value:"",children:i("Select User","bit-integrations")}),a.jsx("optgroup",{label:i("Logged In User","bit-integrations"),children:a.jsx("option",{value:"loggedInUser",children:i("Logged In User","bit-integrations")})}),a.jsx("optgroup",{label:i("All User","bit-integrations"),children:((J=e==null?void 0:e.default)==null?void 0:J.allUser)&&e.default.allUser.map(r=>a.jsx("option",{value:r.ID,children:r.display_name},`ff-rm-${r.ID}`))}),a.jsx("optgroup",{label:i("Select user id from Form Fields","bit-integrations"),children:t==null?void 0:t.map(r=>a.jsx("option",{value:"${"+r.name+"}",children:r.label},`ff-rm-${r.name}`))})]}),a.jsx("button",{onClick:()=>q(e,c,s),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Fetch All User","bit-integrations")}'`},type:"button",disabled:n,children:"↻"})]})}),Pe.includes(g)&&a.jsxs(a.Fragment,{children:[a.jsx("br",{}),a.jsxs("div",{className:"flx mt-4",children:[a.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Forum:","bit-integrations")}),a.jsx(O,{className:"w-5",defaultValue:e==null?void 0:e.forumId,options:((K=e==null?void 0:e.default)==null?void 0:K.allForum)&&e.default.allForum.map(r=>({label:r.forum_title,value:r.forum_id.toString()})),onChange:r=>x(r,"forumId"),singleSelect:g!==H}),a.jsx("button",{onClick:()=>f(e,c,s),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Fetch All Forum","bit-integrations")}'`},type:"button",disabled:n,children:"↻"})]})]}),(e==null?void 0:e.forumId)!==void 0&&g===I&&a.jsxs(a.Fragment,{children:[a.jsx("br",{}),a.jsxs("div",{className:"flx mt-4",children:[a.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Topic:","bit-integrations")}),a.jsx(O,{className:"w-5",defaultValue:e==null?void 0:e.topicId,options:((X=e==null?void 0:e.default)==null?void 0:X.allTopic)&&e.default.allTopic.map(r=>({label:r.topic_title,value:r.topic_id.toString()})),onChange:r=>x(r,"topicId"),singleSelect:!0}),a.jsx("button",{onClick:()=>je(e,c,s),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Fetch All Topic","bit-integrations")}'`},type:"button",disabled:n,children:"↻"})]})]}),g===C&&a.jsxs(a.Fragment,{children:[a.jsx("br",{}),a.jsxs("div",{className:"flx mt-4",children:[a.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Status:","bit-integrations")}),a.jsx(O,{className:"w-5",defaultValue:e==null?void 0:e.userStatusId,options:e.userStatusOptions.map(r=>({label:r.label,value:r.key})),onChange:r=>x(r,"userStatusId"),singleSelect:!0})]})]}),a.jsx("br",{}),a.jsx("br",{}),n&&a.jsx(d,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),a.jsxs(a.Fragment,{children:[Re.includes(g)&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-4",children:a.jsx("b",{className:"wdt-100",children:i("Map Fields","bit-integrations")})}),a.jsx("div",{className:"btcd-hr mt-1"}),a.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[a.jsx("div",{className:"txt-dp",children:a.jsx("b",{children:i("Form Fields","bit-integrations")})}),a.jsx("div",{className:"txt-dp",children:a.jsx("b",{children:i("BuddyBoss Fields","bit-integrations")})})]}),e.field_map.map((r,_)=>a.jsx(ve,{i:_,field:r,buddyBossConf:e,formFields:t,setBuddyBossConf:c,setSnackbar:m,mainAction:e==null?void 0:e.mainAction,buddyBossFields:p()},`rp-m-${_+9}`)),a.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:a.jsx("button",{onClick:()=>me(e.field_map.length,e,c),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),a.jsx("br",{}),a.jsx("br",{}),Number(e.mainAction)===E&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-4",children:a.jsx("b",{className:"wdt-100",children:i("Utilities","bit-integrations")})}),a.jsx("div",{className:"btcd-hr mt-1"}),a.jsx(Fe,{buddyBossConf:e,setBuddyBossConf:c,formFields:t})]})]}),a.jsx("br",{}),a.jsx(re,{note:i("Some integrations will only work for logged-in users.","bit-integrations")})]})}const Se=[Y,D,v,N],Ne=[z,Q,v,N,S,$,U,k],Ae=[Y,D,v,N,R],Ie=[z,Q,y,v,N,S,$,R,U,k],Re=[E,T,v,N,S,V,R,U,k,I],we=[T,H,I],Pe=[T,H,I];export{Y as A,He as B,E as C,z as E,Q as F,T as P,D as R,y as S,v as a,N as b,$e as c,S as d,V as e,$ as f,H as g,Ve as h,De as i,R as j,U as k,k as l,I as m,C as n};
