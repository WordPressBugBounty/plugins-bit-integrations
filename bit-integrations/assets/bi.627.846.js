var _=Object.defineProperty;var k=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var y=(n,t,c)=>t in n?_(n,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[t]=c,p=(n,t)=>{for(var c in t||(t={}))D.call(t,c)&&y(n,c,t[c]);if(k)for(var c of k(t))R.call(t,c)&&y(n,c,t[c]);return n};import{_ as s,c as g,V as m}from"./bi.985.0.js";import{u as f}from"./bi.175.449.js";const O=(n,t,c,a,d,o,l,e,i)=>{const r=p({},t);if(l){const u=p({},e);u[n.target.name]="",i(p({},u))}r[n.target.name]=n.target.value,c(p({},r))},F=(n,t,c,a,d)=>{a(!0);const o={formID:n,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_campaign_list").then(e=>e&&e.success?(c(i=>{var u;const r=p({},i);return r.default||(r.default={}),(u=r.default)!=null&&u.campaignLists||(r.default.campaignLists={}),e.data.allCampaignLists&&(r.default.campaignLists=e.data.allCampaignLists),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),r}),a(!1),s("Campaign list refreshed","bit-integrations")):(a(!1),s("Campaign list refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Campaign list...")})},w=(n,t,c,a,d)=>{a(!0);const o={formID:n,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_case_origin").then(e=>e&&e.success?(c(i=>f(i,r=>{r.caseOrigins=e.data})),a(!1),s("Case Origin refreshed","bit-integrations")):(a(!1),s("Case Origin refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Case Origin...")})},E=(n,t,c,a,d)=>{a(!0);const o={formID:n,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_case_type").then(e=>e&&e.success?(c(i=>f(i,r=>{r.caseTypes=e.data})),a(!1),s("Type refreshed","bit-integrations")):(a(!1),s("Type refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading type...")})},$=(n,t,c,a,d)=>{a(!0);const o={formID:n,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_case_reason").then(e=>e&&e.success?(c(i=>f(i,r=>{r.caseReasons=e.data})),a(!1),s("Reason refreshed","bit-integrations")):(a(!1),s("Reason refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Reason...")})},N=(n,t,c,a,d)=>{a(!0);const o={formID:n,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_case_status").then(e=>e&&e.success?(c(i=>f(i,r=>{r.caseStatus=e.data})),a(!1),s("Status refreshed","bit-integrations")):(a(!1),s("Status refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Status...")})},v=(n,t,c,a,d)=>{a(!0);const o={formID:n,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_case_priority").then(e=>e&&e.success?(c(i=>f(i,r=>{r.casePriority=e.data})),a(!1),s("Priority refreshed","bit-integrations")):(a(!1),s("Priority refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Priority...")})},V=(n,t,c,a,d)=>{a(!0);const o={formID:n,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_case_potential_liability").then(e=>e&&e.success?(c(i=>f(i,r=>{r.casePotentialLiability=e.data})),a(!1),s("Potential Liability refreshed","bit-integrations")):(a(!1),s("Potential Liability refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Potential Liability...")})},z=(n,t,c,a,d)=>{a(!0);const o={formID:n,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_case_sla_violation").then(e=>e&&e.success?(c(i=>f(i,r=>{r.caseSLAViolation=e.data})),a(!1),s("SLA Violation refreshed","bit-integrations")):(a(!1),s("SLA Violation refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading SLA Violation...")})},M=(n,t,c,a,d)=>{a(!0);const o={formID:n,actionName:t.actionName,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_get_lead_sources").then(e=>e&&e.success?(c(i=>f(i,r=>{r.leadSources=e.data})),a(!1),s("Lead Source refreshed","bit-integrations")):(a(!1),s("Lead Source refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Lead Source...")})},T=(n,t,c,a,d)=>{a(!0);const o={formID:n,actionName:t.actionName,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_get_lead_status").then(e=>e&&e.success?(c(i=>f(i,r=>{r.leadStatus=e.data})),a(!1),s("Lead Status refreshed","bit-integrations")):(a(!1),s("Lead Status refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Lead Status...")})},U=(n,t,c,a,d)=>{a(!0);const o={formID:n,actionName:t.actionName,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_get_lead_ratings").then(e=>e&&e.success?(c(i=>f(i,r=>{r.leadRatings=e.data})),a(!1),s("Lead Rating refreshed","bit-integrations")):(a(!1),s("Lead Rating refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Lead Rating...")})},j=(n,t,c,a,d)=>{a(!0);const o={formID:n,actionName:t.actionName,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_get_lead_industries").then(e=>e&&e.success?(c(i=>f(i,r=>{r.leadIndustries=e.data})),a(!1),s("Industry refreshed","bit-integrations")):(a(!1),s("Industry refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Industry...")})},x=(n,t,c,a,d)=>{a(!0);const o={formID:n,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};g(o,"selesforce_lead_list").then(l=>l&&l.success?(c(e=>{var r;const i=p({},e);return i.default||(i.default={}),(r=i.default)!=null&&r.leadLists||(i.default.leadLists={}),l.data.leadLists&&(i.default.leadLists=l.data.leadLists),l.data.tokenDetails&&(i.tokenDetails=l.data.tokenDetails),i}),a(!1),s("Lead list refreshed","bit-integrations")):(a(!1),s("Lead list refresh failed. please try again","bit-integrations"))).catch(()=>a(!1))},H=(n,t,c,a,d)=>{a(!0);const o={formID:n,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_contact_list").then(e=>e&&e.success?(c(i=>{var u;const r=p({},i);return r.default||(r.default={}),(u=r.default)!=null&&u.contactLists||(r.default.contactLists={}),e.data.contactLists&&(r.default.contactLists=e.data.contactLists),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),r}),a(!1),s("Contact list refresh successfully.","bit-integrations")):(a(!1),s("Contact list refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Contact list...")})},J=(n,t,c,a,d,o)=>{d(!0);const l={formID:n,actionName:t,clientId:c.clientId,clientSecret:c.clientSecret,tokenDetails:c.tokenDetails},e=g(l,"selesforce_custom_field").then(i=>{var u,b;if(!(i!=null&&i.success))return(u=i==null?void 0:i.data[0])!=null&&u.message?"Custom field: "+((b=i==null?void 0:i.data[0])==null?void 0:b.message):"Custom field refresh failed. please try again";const r=i&&i.success?i==null?void 0:i.data:[];return a(S=>{const h=S;return h.selesforceFields=r,h.field_map=P(h),h}),d(!1),"Custom field refresh successfully."});m.promise(e,{success:i=>i,error:s("Error Occurred","bit-integrations"),loading:s(`Loading ${t} list...`)})},K=(n,t,c,a)=>{const d={clientId:n.clientId,clientSecret:n.clientSecret,tokenDetails:n.tokenDetails};c(!0),g(d,"selesforce_custom_action").then(o=>{var l,e;c(!1),t(i=>f(i,r=>{o.success&&(r.selesforceActionModules=[...r.action_modules,...o==null?void 0:o.data])})),m.success(o&&o.success?"Custom Action refresh successfully.":(l=o==null?void 0:o.data[0])!=null&&l.message?"Custom Action: "+((e=o==null?void 0:o.data[0])==null?void 0:e.message):"Custom Action refresh failed. please try again")})},W=(n,t,c,a,d)=>{a(!0);const o={formID:n,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},l=g(o,"selesforce_account_list").then(e=>e&&e.success?(c(i=>{var u;const r=p({},i);return r.default||(r.default={}),(u=r.default)!=null&&u.accountLists||(r.default.accountLists={}),e.data.accountLists&&(r.default.accountLists=e.data.accountLists),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),r}),a(!1),s("Account list refreshed","bit-integrations")):(a(!1),s("Account list refresh failed. please try again","bit-integrations")));m.promise(l,{success:e=>e,error:s("Error Occurred","bit-integrations"),loading:s("Loading Account list...")})},Z=n=>!((n!=null&&n.field_map?n.field_map.filter(c=>!c.formField||!c.selesforceField||!c.formField==="custom"&&!c.customValue):[]).length>0),P=(n,t)=>{const c=(n==null?void 0:n.selesforceFields)||[],a=(n==null?void 0:n.field_map)||[],d=a.reduce((l,e)=>{var r;const i=(r=e.selesforceField)!=null?r:e.selesforceField;return i&&l.push(i),l},[]),o=c.filter(l=>l.required===!0&&!d.includes(l.key));if(o.length>0){const l=o.map(e=>({formField:"",selesforceField:e.key}));a.push(...l)}else a.length===0&&a.push({formField:"",selesforceField:""});return a},B=(n,t,c,a,d,o,l)=>{if(!n.clientId||!n.clientSecret){c({clientId:n.clientId?"":s("Client Id can't be empty","bit-integrations"),clientSecret:n.clientSecret?"":s("Secret key can't be empty","bit-integrations")});return}d(!0);const e=`https://login.salesforce.com/services/oauth2/authorize?response_type=code&client_id=${n.clientId}&prompt=login%20consent&state=${encodeURIComponent(window.location.href)}/redirect&redirect_uri=${encodeURIComponent(l.api.base)}/redirect`,i=window.open(e,"salesforce","width=400,height=609,toolbar=off"),r=setInterval(()=>{if(i.closed){clearInterval(r);let u={},b=!1;const S=localStorage.getItem("__salesforce");if(S&&(b=!0,u=JSON.parse(S),localStorage.removeItem("__salesforce")),!u.code||u.error||!u||!b){const h=u.error?`Cause: ${u.error}`:"";o({show:!0,msg:`${s("Authorization Failed","bit-integrations")} ${h}. ${s("please try again","bit-integrations")}`}),d(!1)}else{const h=p({},n);h.accountServer=u["accounts-server"],A(u,h,t,a,d,o,l)}}},500)},A=(n,t,c,a,d,o,l)=>{const e=p({},n);e.clientId=t.clientId,e.clientSecret=t.clientSecret,e.redirectURI=`${l.api.base}/redirect`,g(e,"selesforce_generate_token").then(i=>{if(i&&i.success){const r=p({},t);r.tokenDetails=i.data,c(r),a(!0),o({show:!0,msg:s("Authorized Successfully","bit-integrations")})}else i&&i.data&&i.data.data||!i.success&&typeof i.data=="string"?o({show:!0,msg:`${s("Authorization failed Cause:","bit-integrations")}${i.data.data||i.data}. ${s("please try again","bit-integrations")}`}):o({show:!0,msg:s("Authorization failed. please try again","bit-integrations")});d(!1)})};export{F as a,W as b,Z as c,H as d,N as e,w as f,K as g,O as h,v as i,V as j,z as k,E as l,$ as m,M as n,T as o,U as p,j as q,x as r,J as s,B as t};
