import{u as I,l as v,r as n,j as t}from"./main-830.js";import{d as B,_ as a,I as y,F as k}from"./bi.597.15.js";import{B as C}from"./bi.910.697.js";import{S as _}from"./bi.963.902.js";import N from"./bi.882.179.js";import{c as w}from"./bi.592.691.js";import{S as E}from"./bi.396.692.js";import"./bi.972.713.js";import"./bi.715.660.js";import"./bi.530.661.js";function A({formFields:m,setFlow:u,flow:f,allIntegURL:g}){const x=I(),{formID:d}=v(),[r,o]=n.useState(!1),[s,c]=n.useState(1),[b,i]=n.useState({show:!1}),[S,p]=n.useState({templateId:"",RedirectionUrl:""}),[e,l]=n.useState({name:"Brevo(Sendinblue)",type:"Brevo(Sendinblue)",lists:[],api_key:"",field_map:[{formField:"",sendinBlueField:""}],actions:{}}),h=j=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),j===3){if(e.templateId===""||e.redirectionUrl===""){p({templateId:e.templateId?"":a("Template name can't be empty","bit-integrations"),redirectionUrl:e.redirectionUrl?"":a("Redirection url name can't be empty","bit-integrations")});return}if(!w(e)){i({show:!0,msg:a("Please map all required fields to continue.","bit-integrations")});return}e.name!==""&&e.field_map.length>0&&c(3)}};return t.jsxs("div",{children:[t.jsx(B,{snack:b,setSnackbar:i}),t.jsx("div",{className:"txt-center mt-2",children:t.jsx(_,{step:3,active:s})}),t.jsx(N,{formID:d,sendinBlueConf:e,setSendinBlueConf:l,step:s,setstep:c,isLoading:r,setIsLoading:o,setSnackbar:i}),t.jsxs("div",{className:"btcd-stp-page",style:{width:s===2&&900,height:s===2&&"auto"},children:[t.jsx(E,{formID:d,formFields:m,sendinBlueConf:e,setSendinBlueConf:l,isLoading:r,setIsLoading:o,setSnackbar:i,error:S,setError:p}),t.jsxs("button",{onClick:()=>h(3),disabled:e.field_map.length<1,className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[a("Next","bit-integrations"),t.jsx(C,{className:"ml-1 rev-icn"})]})]}),t.jsx(y,{step:s,saveConfig:()=>k(f,u,g,e,x,"","",o),isLoading:r,dataConf:e,setDataConf:l,formFields:m})]})}export{A as default};
