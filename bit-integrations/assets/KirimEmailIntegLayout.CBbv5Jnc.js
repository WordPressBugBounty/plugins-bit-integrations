var w=Object.defineProperty;var v=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var N=(a,l,n)=>l in a?w(a,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[l]=n,b=(a,l)=>{for(var n in l||(l={}))y.call(l,n)&&N(a,n,l[n]);if(v)for(var n of v(l))A.call(l,n)&&N(a,n,l[n]);return a};import{k as S,g as I,j as e,_ as r,s as L,L as M}from"./main.2.7.11.js";import{x as V}from"./Note.iI4FM_zT.js";import"./react-router-dom.BLIKw1eE.js";import{a as $,h as q}from"./Integrations.CiiC6YXN.js";import{g as R,a as T}from"./KirimEmailCommonFunc.BXslRl_5.js";import{T as H}from"./TagifyInput.ey_dUHW4.js";const _=(a,l,n,t,p)=>{const d=b({},l);d.field_map.splice(a,0,{}),n(b({},d))},P=(a,l,n,t,p)=>{const d=b({},l);d.field_map.length>1&&d.field_map.splice(a,1),n(b({},d))},i=(a,l,n,t,p,d)=>{const u=b({},n);u.field_map[l][a.target.name]=a.target.value,a.target.value==="custom"&&(u.field_map[l].customValue=""),t(b({},u))};function D({i:a,field:l,formFields:n,kirimEmailConf:t,setKirimEmailConf:p}){var h,g,x,c;if(((h=t==null?void 0:t.field_map)==null?void 0:h.length)===1&&l.kirimEmailFormField===""){const s=b({},t),o=R(s);s.field_map=o,p(s)}const d=((g=t==null?void 0:t.subscriberFields)==null?void 0:g.filter(s=>s.required===!0))||[],u=((x=t==null?void 0:t.subscriberFields)==null?void 0:x.filter(s=>s.required===!1))||[],F=S(I),{isPro:j}=F;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:s=>i(s,a,t,p),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),e.jsx("optgroup",{label:r("Form Fields","bit-integrations"),children:n==null?void 0:n.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`))}),e.jsx("option",{value:"custom",children:r("Custom...","bit-integrations")}),e.jsx("optgroup",{label:L(r("General Smart Codes %s","bit-integrations"),j?"":`(${r("Pro","bit-integrations")})`),children:j&&((c=$)==null?void 0:c.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`)))})]}),l.formField==="custom"&&e.jsx(H,{onChange:s=>q(s,a,t,p),label:r("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:r("Custom Value","bit-integrations"),formFields:n}),e.jsxs("select",{className:"btcd-paper-inp",disabled:a<d.length,name:"kirimEmailFormField",value:a<d.length?d[a].key||"":l.kirimEmailFormField||"",onChange:s=>i(s,a,t,p),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),a<d.length?e.jsx("option",{value:d[a].key,children:d[a].label},d[a].key):u.map(({key:s,label:o})=>e.jsx("option",{value:s,children:o},s))]})]}),a>=d.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>_(a,t,p),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>P(a,t,p),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function W({formID:a,formFields:l,handleInput:n,kirimEmailConf:t,setKirimEmailConf:p,isLoading:d,setIsLoading:u,setSnackbar:F,a:j}){var x;const h=c=>{const s=b({},t),{name:o}=c.target;c.target.value!==""?s[o]=c.target.value:delete s[o],s[c.target.name]=c.target.value,p(b({},s))},g=(c,s)=>{const o=b({},t);c!==""?o[s]=c:delete o[s],p(b({},o))};return e.jsxs(e.Fragment,{children:[d&&e.jsx(M,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("Actions:","bit-integrations")}),e.jsxs("select",{onChange:h,name:"mainAction",value:t==null?void 0:t.mainAction,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:r("Select Actions","bit-integrations")}),(t==null?void 0:t.allActions)&&t.allActions.map(({key:c,label:s})=>e.jsx("option",{value:c,children:s},c))]}),e.jsx("br",{}),e.jsx("br",{}),t.mainAction==="1"&&e.jsxs("div",{className:"flx mt-4",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:r("Select List:","bit-integrations")}),e.jsx(V,{className:"w-5",defaultValue:t==null?void 0:t.listId,options:((x=t==null?void 0:t.default)==null?void 0:x.allLists)&&(t==null?void 0:t.default.allLists.map(c=>({label:c.name,value:c.id}))),onChange:c=>g(c,"listId"),singleSelect:!0}),e.jsx("button",{onClick:()=>T(t,p,u),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${r("Fetch All lists","bit-integrations")}'`},type:"button",disabled:d,children:"â†»"})]}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:r("Map Fields","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Kirim Email Fields","bit-integrations")})})]}),t.field_map.map((c,s)=>e.jsx(D,{i:s,field:c,formFields:l,kirimEmailConf:t,setKirimEmailConf:p},`keap-m-${s+9}`)),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>_(t.field_map.length,t,p),className:"icn-btn sh-sm",type:"button",children:"+"})})]})]})}export{W as K};
