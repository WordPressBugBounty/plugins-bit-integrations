var T=Object.defineProperty;var j=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var y=(a,e,s)=>e in a?T(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s,S=(a,e)=>{for(var s in e||(e={}))k.call(e,s)&&y(a,s,e[s]);if(j)for(var s of j(e))C.call(e,s)&&y(a,s,e[s]);return a};import{u as I,r as o,j as i}from"./main-175.js";import{_ as l,V as r}from"./bi.23.0.js";import"./bi.89.449.js";import{S as L}from"./bi.801.13.js";import{S as N}from"./bi.120.997.js";import{I as E,g as M}from"./bi.518.3.js";import V from"./bi.507.293.js";import{c as F}from"./bi.433.994.js";import{c as z,a as B,t as D,b as H,o as q,m as G,A as J}from"./bi.745.995.js";import"./bi.757.9.js";import"./bi.925.11.js";import"./bi.13.14.js";import"./bi.58.782.js";import"./bi.404.831.js";import"./bi.673.739.js";import"./bi.492.740.js";function nt({formFields:a,setFlow:e,flow:s,allIntegURL:d}){const u=I(),[g,c]=o.useState(!1),[b,f]=o.useState({}),[n,x]=o.useState(1),[P,_]=o.useState({show:!1}),[t,m]=o.useState({name:"ACPT",type:"ACPT",base_url:window.location.origin,api_key:"",field_map:[{formField:"",acptFormField:""}],label_field_map:[{formField:"",acptFormField:""}],acptFields:[],acptLabels:[],utilities:{},icon:"wordpress",capability:"manage_options",module:"",cptFields:z,cptLabels:B,taxonomyLabels:D,taxonomyFields:H,optionPageFields:q,modules:G}),w=()=>{c(!0),M(s,e,d,t,u,"","",c).then(p=>{var v;p.success?(r.success((v=p.data)==null?void 0:v.msg),u(d)):r.error(p.data||p)})},A=h=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!F(t)){r.error(l("Please map mandatory fields","bit-integrations"));return}if(["create_cpt","update_cpt","create_option_page","update_option_page"].includes(t.module)&&!(t!=null&&t.icon)){r.error(l("Please select Icon","bit-integrations"));return}if(["create_option_page","update_option_page"].includes(t.module)&&!(t!=null&&t.capability)){r.error(l("Please select Capability","bit-integrations"));return}t.field_map.length>0&&x(h)};return i.jsxs("div",{children:[i.jsx(L,{snack:P,setSnackbar:_}),i.jsx("div",{className:"txt-center mt-2",children:i.jsx(N,{step:3,active:n})}),i.jsx(V,{acptConf:t,setAcptConf:m,step:n,setStep:x,loading:b,setLoading:f}),i.jsxs("div",{className:"btcd-stp-page",style:S({},n===2&&{width:900,minHeight:"400px",height:"auto",overflow:"visible"}),children:[i.jsx(J,{formFields:a,acptConf:t,setAcptConf:m,loading:b,setLoading:f,isLoading:g,setIsLoading:c,setSnackbar:_}),(t==null?void 0:t.module)&&i.jsxs("button",{onClick:()=>A(3),disabled:!F(t),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[l("Next","bit-integrations")," Â ",i.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(t==null?void 0:t.module)&&i.jsx(E,{step:n,saveConfig:()=>w(),isLoading:g,dataConf:t,setDataConf:m,formFields:a})]})}export{nt as default};
