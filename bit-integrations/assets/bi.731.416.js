var I=Object.defineProperty;var C=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var h=(s,i,a)=>i in s?I(s,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[i]=a,x=(s,i)=>{for(var a in i||(i={}))M.call(i,a)&&h(s,a,i[a]);if(C)for(var a of C(i))R.call(i,a)&&h(s,a,i[a]);return s};import{u as E,r as n,j as r}from"./main-174.js";import"./bi.89.470.js";import{_ as e,z as l}from"./bi.964.0.js";import{S as T}from"./bi.404.13.js";import{S as z}from"./bi.60.1041.js";import{I as L,g as O}from"./bi.48.3.js";import W from"./bi.456.264.js";import{h as A,c as _}from"./bi.222.958.js";import{C as B}from"./bi.504.959.js";import"./bi.873.9.js";import"./bi.755.11.js";import"./bi.410.14.js";import"./bi.546.818.js";import"./bi.54.773.js";import"./bi.573.774.js";function re({formFields:s,setFlow:i,flow:a,allIntegURL:m}){const c=E(),[S,g]=n.useState(!1),[f,y]=n.useState({}),[o,k]=n.useState(1),[N,p]=n.useState({show:!1}),v=[{key:"name",label:e("Name","bit-integrations"),required:!0},{key:"email_domain",label:e("Email","bit-integrations"),required:!1},{key:"details",label:e("Description","bit-integrations"),required:!1},{key:"street",label:e("Street","bit-integrations"),required:!1},{key:"city",label:e("City","bit-integrations"),required:!1},{key:"state",label:e("State","bit-integrations"),required:!1},{key:"postal_code",label:e("Postal Code","bit-integrations"),required:!1},{key:"country",label:e("Country","bit-integrations"),required:!1},{key:"phone_numbers",label:e("Phone","bit-integrations"),required:!1},{key:"websites",label:e("Website","bit-integrations"),required:!1}],j=[{key:"name",label:e("Name","bit-integrations"),required:!0},{key:"title",label:e("Title","bit-integrations"),required:!1},{key:"details",label:e("Description","bit-integrations"),required:!1},{key:"email_domain",label:e("Email","bit-integrations"),required:!1},{key:"phone_numbers",label:e("Phone","bit-integrations"),required:!1},{key:"street",label:e("Street","bit-integrations"),required:!1},{key:"city",label:e("City","bit-integrations"),required:!1},{key:"state",label:e("State","bit-integrations"),required:!1},{key:"postal_code",label:e("Postal Code","bit-integrations"),required:!1},{key:"country",label:e("Country","bit-integrations"),required:!1},{key:"websites",label:e("Website","bit-integrations"),required:!1}],P=[{key:"name",label:e("Opportunity Name","bit-integrations"),required:!0},{key:"close_date",label:e("Close Date","bit-integrations"),required:!1},{key:"details",label:e("Opportunity Details","bit-integrations"),required:!1},{key:"monetary_value",label:e("Value","bit-integrations"),required:!1}],D=[{key:"name",label:e("Task Name","bit-integrations"),required:!0},{key:"due_date",label:e("Due Date","bit-integrations"),required:!1},{key:"reminder_date",label:e("Reminder Date","bit-integrations"),required:!1},{key:"details",label:e("Description","bit-integrations"),required:!1}],[t,d]=n.useState({name:"CopperCRM",type:"CopperCRM",api_key:"",api_email:"",field_map:[{formField:"",coppercrmFormField:""}],actionName:"",companyFields:v,personFields:j,opportunityFields:P,taskFields:D,actions:{}}),w=()=>{g(!0),O(a,i,m,t,c,"","",g).then(u=>{var q;u.success?(l.success((q=u.data)==null?void 0:q.msg),c(m)):l.error(u.data||u)})},F=b=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!_(t)){l.error(e("Please map mandatory fields","bit-integrations"));return}if(t.actionName==="opportunity"){if(!t.selectedCRMPeople){l.error(e("Please select a people","bit-integrations"));return}if(!t.selectedCRMPipelines&&t.actionName==="opportunity"){l.error(e("Please select a Pipeline","bit-integrations"));return}}t.field_map.length>0&&k(b)};return r.jsxs("div",{children:[r.jsx(T,{snack:N,setSnackbar:p}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(z,{step:3,active:o})}),r.jsx(W,{copperCRMConf:t,setCopperCRMConf:d,step:o,setStep:k,loading:f,setLoading:y,setSnackbar:p}),r.jsxs("div",{className:"btcd-stp-page",style:x({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(B,{formFields:s,handleInput:b=>A(b,t,d),copperCRMConf:t,setCopperCRMConf:d,loading:f,setLoading:y,setSnackbar:p}),(t==null?void 0:t.actionName)&&r.jsxs("button",{onClick:()=>F(3),disabled:!_(t),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[e("Next","bit-integrations")," Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(t==null?void 0:t.actionName)&&r.jsx(L,{step:o,saveConfig:()=>w(),isLoading:S,dataConf:t,setDataConf:d,formFields:s})]})}export{re as default};
