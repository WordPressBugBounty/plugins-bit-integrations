var T=Object.defineProperty;var j=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var y=(a,e,s)=>e in a?T(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s,S=(a,e)=>{for(var s in e||(e={}))k.call(e,s)&&y(a,s,e[s]);if(j)for(var s of j(e))C.call(e,s)&&y(a,s,e[s]);return a};import{u as I,r as o,j as i}from"./main-174.js";import{_ as l,z as r}from"./bi.964.0.js";import"./bi.89.470.js";import{S as L}from"./bi.404.13.js";import{S as N}from"./bi.60.1041.js";import{I as z,g as E}from"./bi.48.3.js";import M from"./bi.195.302.js";import{c as F}from"./bi.968.1031.js";import{c as B,a as D,t as H,b as q,o as G,m as J,A as K}from"./bi.930.1032.js";import"./bi.873.9.js";import"./bi.755.11.js";import"./bi.410.14.js";import"./bi.546.818.js";import"./bi.45.805.js";import"./bi.54.773.js";import"./bi.573.774.js";function nt({formFields:a,setFlow:e,flow:s,allIntegURL:d}){const u=I(),[g,c]=o.useState(!1),[b,f]=o.useState({}),[n,x]=o.useState(1),[P,_]=o.useState({show:!1}),[t,m]=o.useState({name:"ACPT",type:"ACPT",base_url:window.location.origin,api_key:"",field_map:[{formField:"",acptFormField:""}],label_field_map:[{formField:"",acptFormField:""}],acptFields:[],acptLabels:[],utilities:{},icon:"wordpress",capability:"manage_options",module:"",cptFields:B,cptLabels:D,taxonomyLabels:H,taxonomyFields:q,optionPageFields:G,modules:J}),w=()=>{c(!0),E(s,e,d,t,u,"","",c).then(p=>{var v;p.success?(r.success((v=p.data)==null?void 0:v.msg),u(d)):r.error(p.data||p)})},A=h=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!F(t)){r.error(l("Please map mandatory fields","bit-integrations"));return}if(["create_cpt","update_cpt","create_option_page","update_option_page"].includes(t.module)&&!(t!=null&&t.icon)){r.error(l("Please select Icon","bit-integrations"));return}if(["create_option_page","update_option_page"].includes(t.module)&&!(t!=null&&t.capability)){r.error(l("Please select Capability","bit-integrations"));return}t.field_map.length>0&&x(h)};return i.jsxs("div",{children:[i.jsx(L,{snack:P,setSnackbar:_}),i.jsx("div",{className:"txt-center mt-2",children:i.jsx(N,{step:3,active:n})}),i.jsx(M,{acptConf:t,setAcptConf:m,step:n,setStep:x,loading:b,setLoading:f}),i.jsxs("div",{className:"btcd-stp-page",style:S({},n===2&&{width:900,minHeight:"400px",height:"auto",overflow:"visible"}),children:[i.jsx(K,{formFields:a,acptConf:t,setAcptConf:m,loading:b,setLoading:f,isLoading:g,setIsLoading:c,setSnackbar:_}),(t==null?void 0:t.module)&&i.jsxs("button",{onClick:()=>A(3),disabled:!F(t),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[l("Next","bit-integrations")," Â ",i.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(t==null?void 0:t.module)&&i.jsx(z,{step:n,saveConfig:()=>w(),isLoading:g,dataConf:t,setDataConf:m,formFields:a})]})}export{nt as default};
